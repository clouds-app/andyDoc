(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-025f09bd"],{"0e4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},o=[],s={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},n=s,r=(a("33bc"),a("5d22")),l=Object(r["a"])(n,i,o,!1,null,"550d1612",null);e["a"]=l.exports},"0ee7":function(t,e,a){},"1f47":function(t,e,a){"use strict";a.r(e);var i,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bodyContentBox"},[a("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[a("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/sale/lbAddPrice/lbAddPriceItem/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),a("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}}),a("lbAddCopy",{ref:"lbAddCopy",on:{submitSuccess:t.submitSuccess}})],1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{title:"楞别加价复制",width:"30%",height:"40%",subTitle:"",loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showPopupBox,callback:function(e){t.showPopupBox=e},expression:"showPopupBox"}},[a("vxe-form",{ref:"firstForm",attrs:{data:t.formData,size:"small",span:"24",rules:t.formRules,"title-align":"right","title-width":"90"}},[a("vxe-form-item",{attrs:{title:"复制单号"},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-input",{attrs:{disabled:""},model:{value:t.formData.billNo,callback:function(e){t.$set(t.formData,"billNo",e)},expression:"formData.billNo"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户编号",field:"guestCode"}},[a("popUpPullDown",{attrs:{matchField:t.popUpPullDownConfig.editRender.matchField,currentValue:t.formData.guestCode,field:t.popUpPullDownConfig.field,paramsItem:t.popUpPullDownConfig},on:{popupChange:t.popupChange}})],1),a("vxe-form-item",{attrs:{title:"生效日期",field:"date"},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-input",{attrs:{type:"datetime",placeholder:"请选择日期","label-format":"",transfer:!0},model:{value:t.formData.billDate,callback:function(e){t.$set(t.formData,"billDate",e)},expression:"formData.billDate"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"审核"},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-checkbox",{model:{value:t.formData.iisAudit,callback:function(e){t.$set(t.formData,"iisAudit",e)},expression:"formData.iisAudit"}})]},proxy:!0}])})],1)],1)},r=[],l=a("60b5"),u=(a("6a61"),a("1472")),c=a.n(u),f=a("6b6c"),d=a("f3f3"),m=a("de33"),p={billNo:"",guestCode:"",custCodeList:"",billDate:"",iisAudit:!1},b={name:"lbAddPriceCopyFn",components:{popUpPullDown:d["a"],regionInput:m["a"]},provide:function(){var t=this;return{getPopupConfig:function(){return t.popupConfig}}},data:function(){return{popUpPullDownConfig:{field:"guestName",editRender:{defaultText:"",defaultValue:"",matchField:"guestCode:custCode,guestName:shortName",name:"popup",sourceKey:"customerMultiBox_common"}},popupConfig:{},formRules:{guestCode:[{required:!0,message:"请输入客户"}]},vxeModalLoading:!1,showPopupBox:!1,formData:Object.assign({},p)}},computed:{currentSelectRowItem:function(){var t=this.$store.state.app.currentSelectRowItem;return t}},watch:{showPopupBox:function(t,e){t?this.initData():this.formData=Object.assign({},p)}},methods:{initData:function(){var t=this.currentSelectRowItem.row;t&&(this.formData.billNo=t.billNo,this.formData.billDate=c()().format("YYYY-MM-DD HH:mm:ss"))},regionChange:function(t){this.formData.areaName=t.areaName,this.formData.areaCode=t.areaCode},popupChange:function(t){this.formData=Object.assign({},this.formData,t.matchField),this.formData.custCodeList=t.matchField.guestCode},submitEvent:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,a=e.$refs["firstForm"],!a){t.next=14;break}return t.prev=3,t.next=6,a.validate();case 6:t.sent,i="sale/lbAddPrice/copy",o={billNo:this.formData.billNo,custCodeList:this.formData.custCodeList,billDate:this.formData.billDate,iisAudit:this.formData.iisAudit},f["a"].post(i,o).then((function(t){s.showPopupBox=!1,s.$XModal.message({message:"操作成功!",status:"success"}),s.$emit("submitSuccess")})),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](3);case 14:case"end":return t.stop()}}),t,this,[[3,12]])})));function e(){return t.apply(this,arguments)}return e}()}},h=b,g=a("5d22"),w=Object(g["a"])(h,n,r,!1,null,"57ff3b1a",null),v=w.exports,x=a("79dc"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{resize:"",remember:"",fullscreen:"",title:t.title,width:"80%",height:"88%",subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{formValueChangeRes:t.formValueChangeRes,showEditBox:t.showEditBox,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[a("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData},on:{"cell-click":t.cellClickEvent}})],1)]},proxy:!0}])})],1)])},D=[],y=a("7dd6"),F=a("cb39"),T=a("5180"),k=a.n(T),B=a("bf8c"),O=void 0,P={mapList:{lbAddPriceItems:"firstTable"}},N={name:"edit-lbAddPrice",mixins:[B["a"]],components:{formItemRender:F["a"],tabsTool:x["a"]},getPopupConfig:function(){return O.popupConfig},data:function(){var t=this;return{editBoxFormHeight:40,requstConfig:{modulePreUrl:"/sale/lbAddPrice",mainFormName:"salelbaddpriceFm",tab1FormName:"salelbaddpriceitemFm"},popupConfig:{paiCS:{lbCode:""},lbCode:{getshowPopUpDown:function(){return t.getshowPopUpBox({field:"custName"})}}}}},methods:(i={cellClickEvent:function(t){var e=t.column.property;if("paiCS"==e){var a=t.row["lbCode"];this.popupConfig.paiCS.lbCode=a}},iisAddAction:function(){console.log("=eidtBox==iisAddAction========="),this.insertEvent(-1)},closeWindowAction:function(){this.popupConfig.paiCS.lbCode="",this.firstFormDataMaster=k()(this.formDefaultDataObj),this.setTableDefaultData(P,[])},setDefaultValue:function(t){t.master?(this.firstFormData=Object.assign({},P),this.firstFormDataMaster=k()(t.master),this.setTableDefaultData(P,t)):(this.firstFormData=Object.assign({},P),this.firstFormDataMaster=k()(t),this.setTableDefaultData(P,[]))}},Object(y["a"])(i,"closeWindowAction",(function(){})),Object(y["a"])(i,"submitEvent",function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,o,s,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,a=e.$refs["renderForm"].$refs["firstForm"],!a){t.next=33;break}return t.prev=3,t.next=6,a.validate();case 6:return t.sent,t.next=9,this.fullValidEvent("firstTable");case 9:t.sent,i=this.$refs.firstTable.getRecordset().insertRecords,o=0;case 12:if(!(o<i.length-1)){t.next=25;break}s=o+1;case 14:if(!(s<i.length)){t.next=22;break}if(i[o].lbCode!==i[s].lbCode||i[o].paiCS!==i[s].paiCS){t.next=19;break}return console.error("==".concat(this.subTitle,">>=====提交表单<<包含重复数据>>错误===========")),this.$XModal.message({message:"请勿添加重复数据!",status:"error"}),t.abrupt("return");case 19:s++,t.next=14;break;case 22:o++,t.next=12;break;case 25:n=this.getRecordset(this.firstFormData),r="".concat(this.requstConfig.modulePreUrl,"/saveOrUpdate"),this.request["update"](r,n).then((function(t){setTimeout((function(){e.showEditBox=!1}),1e3),e.$emit("submitSuccess",n)})),t.next=33;break;case 30:t.prev=30,t.t0=t["catch"](3),console.error("==".concat(this.subTitle,">>=====提交表单<<验证>>错误==========="));case 33:case"end":return t.stop()}}),t,this,[[3,30]])})));function e(){return t.apply(this,arguments)}return e}()),i)},S=N,I=(a("3b69"),Object(g["a"])(S,C,D,!1,null,"042ea6b1",null)),_=I.exports,A=a("1b62"),L=a("2ddf"),R=a("0e4a"),$={name:"lbAddPrice",components:{editBox:_,tabsTool:x["a"],bodyContentDownItem:R["a"],lbAddCopy:v},data:function(){return{requstConfig:{modulePreUrl:"/sale/lbAddPrice",mainFormName:"salelbaddpriceFm",tab1FormName:"salelbaddpriceitemFm"}}},mixins:[A["a"],L["a"]],methods:{copyFn:function(){var t=this.$refs["lbAddCopy"];t&&(t.showPopupBox=!0)},extBtnFunction:function(t){switch(t){case"copyFn":this.copyFn();break;default:break}}}},E=$,H=(a("6dc1"),Object(g["a"])(E,o,s,!1,null,"c361b2a4",null));e["default"]=H.exports},"2af3":function(t,e,a){},"33bc":function(t,e,a){"use strict";a("c294")},"3b69":function(t,e,a){"use strict";a("2af3")},"44a9":function(t,e,a){},"6dc1":function(t,e,a){"use strict";a("44a9")},"79dc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsButtonListBox"},[a("div",{staticClass:"tabsButtonListItem leftItem"},[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,i){return[a("vxe-radio-button",{key:i,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(a){return t.selectTabClick(e.key)}}})]}))],2)],1),a("div",{staticClass:"tabsButtonListItem rightItem"})])},o=[],s={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},n=(a("5180"),{name:"tabs-formList",mixins:[s],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],a=this.$store.state.app.currentRouterName;if("sysFrom"!=a&&""!=a){var i=this.$store.state.app.tableColumnsInfo;if(i[a]){for(var o in i[a].listView)if("2"===i[a].listView[o].tableType){var s=i[a].listView[o].tableDesc,n=i[a].listView[o].formSort,r=i[a].listView[o].formSort;e.push({key:"tab"+n,value:s,formSort:r})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),r=n,l=(a("e551"),a("5d22")),u=Object(l["a"])(r,i,o,!1,null,"19af0b3a",null);e["a"]=u.exports},c294:function(t,e,a){},e551:function(t,e,a){"use strict";a("0ee7")}}]);