(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19444d61"],{"0e4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},r=[],o={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},s=o,n=(a("33bc"),a("5d22")),c=Object(n["a"])(s,i,r,!1,null,"550d1612",null);e["a"]=c.exports},"0ee7":function(t,e,a){},"298a":function(t,e,a){},"33bc":function(t,e,a){"use strict";a("c294")},"3f87":function(t,e,a){"use strict";a("298a")},"42f5":function(t,e,a){"use strict";a("c252")},"42fb":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bodyContentBox"},[a("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[a("div",{staticStyle:{display:"flex"},style:{width:t.windowOffsetWidth+"px"}},[a("div",{staticClass:"leftBox",style:{width:t.windowOffsetWidth/2.5+"px"}},[a("div",{staticClass:"fromBox"},[a("span",{staticClass:"title"},[t._v("交货日期")]),a("vxe-input",{staticStyle:{width:"6.4rem"},attrs:{size:"mini",type:"date",transfer:""},model:{value:t.formData.startTime,callback:function(e){t.$set(t.formData,"startTime",e)},expression:"formData.startTime"}}),a("span",{staticClass:"title"},[t._v("至")]),a("vxe-input",{staticStyle:{width:"6.4rem"},attrs:{size:"mini",type:"date",transfer:""},model:{value:t.formData.endTime,callback:function(e){t.$set(t.formData,"endTime",e)},expression:"formData.endTime"}}),a("Button",{staticClass:"button",on:{click:t.starClickEvent}},[t._v(t._s(t.showDetail?"送货详情":"开始送货"))])],1),a("nvxe-grid",{ref:"firstTables",attrs:{loading:t.isloading,toolbarConfigShow:!1,columnsFormName:t.requstConfig.mainFormName,height:t.windowOffsetHeight-30,data:t.carData},on:{"cell-click":t.cellClickEvent}})],1),a("div",{staticClass:"rightBox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetail,expression:"!showDetail"}]},[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,columnsFormName:t.requstConfig.tab1FormName,height:.6*t.windowOffsetHeight,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}}),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/stockPaperOut/item/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab2FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab2"===t.selectTab,expression:"selectTab==='tab2'"}]},[a("nvxe-grid",{ref:"secondTable",attrs:{dataUrl:"/stockPaperOut/off/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab3FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)])],1),a("dir",{directives:[{name:"show",rawName:"v-show",value:t.showDetail,expression:"showDetail"}],staticClass:"showBox"},[a("sendDateil",{ref:"editBox",attrs:{row:t.row,windowOffsetHeightS:t.windowOffsetHeight,showDetail:t.showDetail}})],1),a("editBox",{ref:"editBoxs",on:{submitSuccess:t.submitSuccess}})],1)])])])},r=[],o=a("60b5"),s=(a("6a61"),a("62f9"),a("c22d"),a("9b5f"),a("6b6c")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showDetail,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[t.bool?a("div",[a("nvxe-edit-grid",{ref:"firstTable",attrs:{isMainTable:!0,"show-footer":"","footer-method":t.footerMethod,checkboxColumnShow:!0,loading:t.isloading,toolbarConfigShow:!1,columnsFormName:t.requstConfig.tab1FormName,height:t.windowOffsetHeightS-120,data:t.orderDetail},on:{"edit-closed":t.editClosedEvent,"cell-click":t.cellClickEvent,"checkbox-all":t.checkboxAllEvent,"checkbox-change":t.checkboxEvent}})],1):t._e(),a("vxe-form",{ref:"firstForm",attrs:{span:"2",size:"mini","title-align":"right","title-width":"110","title-overflow":!0,data:t.autoAccReceFormData}},[a("vxe-form-item",{attrs:{"title-width":"35",title:" "}},[a("vxe-button",{attrs:{status:"danger",content:"删除"},on:{click:t.delClickEvent}})],1),a("vxe-form-item",{attrs:{"title-width":"25",title:" "}},[a("vxe-button",{attrs:{status:"primary",content:"生产送货单"},on:{click:t.createOrderEvemt}})],1),a("vxe-form-item",{attrs:{span:"6",title:"预估运费",field:"fare"}},[a("vxe-input",{attrs:{disabled:""},model:{value:t.autoAccReceFormData.fare,callback:function(e){t.$set(t.autoAccReceFormData,"fare",e)},expression:"autoAccReceFormData.fare"}})],1),a("vxe-form-item",{attrs:{span:"6",title:"已选体积",field:"cube"}},[a("vxe-input",{attrs:{disabled:""},model:{value:t.autoAccReceFormData.cube,callback:function(e){t.$set(t.autoAccReceFormData,"cube",e)},expression:"autoAccReceFormData.cube"}})],1)],1)]},proxy:!0}])})],1)},c=[],l=(a("24a8"),a("3bae"),a("3337"),a("b3b0"),a("16ca"),a("1d43"),a("79dc")),u=a("cb39"),f=a("5180"),m=a.n(f),d=a("bf8c"),h=a("f1c9"),b={name:"InventoryList",mixins:[d["a"]],components:{formItemRender:u["a"],tabsTool:l["a"]},provide:function(){var t=this;return{getPopupModalConfig:function(){return t.popupModalConfig}}},data:function(){return{orderDetail:[],loading:!1,editBoxFormHeight:80,requstConfig:{modulePreUrl:"/stock/CarList",mainFormName:"stockOutCarListFm",tab1FormName:"stockOutCarListItemFm"},tableColumnsData:{},bool:!1,firstFormDataMaster:{},isloading:!1,autoAccReceFormData:{fare:0,cube:0},popupModalConfig:{firstTable:{title:"数据查询",mainFormName:"sPaperOutCarListPopFm",fieldName:"coNo",editDisabled:!0,requstTab1Config:{isStoredProcedure:!0,modulePreUrl:"/stock/proc/page/spSPaperOutCarListPop",filterName:"coNo",params:{},subformName:"sPaperOutCarListItemFm"}}}}},props:{showDetail:{type:Boolean,default:!1},windowOffsetHeightS:{type:Number||String,default:400},row:{type:Object,default:function(){return{}}}},watch:{row:{handler:function(t,e){"{}"!=JSON.stringify(t)&&this.bool&&this._openAction()},deep:!0,immediate:!0}},methods:{sountNoQty:function(){this.orderDetail.forEach((function(t){t.noQty=Number(t.coQty)-Number(t.carQty)-Number(t.coClQty)}))},editClosedEvent:function(t){var e=t.column,a=(t.$rowIndex,t.row);switch(e.property){case"carQty":a.noQty=Number(a.coQty)-Number(a.carQty)-Number(a.coClQty);break;default:break}},popupModalDataResEvent:function(t,e){var a=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;a[e].noQty=Number(a[e].coQty)-Number(a[e].carQty)-Number(a[e].coClQty)},createOrderEvemt:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$refs.firstTable.$refs.originEditTalbe.getCheckboxRecords(),!(e.length<=0)){t.next=4;break}return this.$XModal.message({message:"请勾选数据！",status:"warning"}),t.abrupt("return");case 4:return this.isloading=!0,a="/stock/proc/list/spSaveCarListItemToDeli_KSJT",i={CarNo:this.firstFormDataMaster.carNo},r="",e.forEach((function(t){""==r?r=t.coNo+"="+(t.bakQty?t.bakQty:"0"):r+=","+t.coNo+"="+(t.bakQty?t.bakQty:"0")})),i.CarListNo=this.row.pclNo,i.CoBackQtyList=r,t.next=13,s["a"]["post"](a,i);case 13:o=t.sent,this.$refs.firstTable.$refs.originEditTalbe.remove(e),this.$XModal.message({message:o.list[0].Result,status:"success"}),this.isloading=!1,this.$parent.renovateClickEvent();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),delClickEvent:function(){var t=this.$refs.firstTable.$refs.originEditTalbe.getCheckboxRecords();t.length>0?this.$refs.firstTable.$refs.originEditTalbe.remove(t):this.$XModal.message({message:"请勾选数据！",status:"warning"})},footerMethod:function(t){var e=t.columns,a=t.data,i=["coQty","outQty","noQty","stockQty","curryQty","bakQty","cube"],r=[e.map((function(t,e){return 0===e?"全部":i.includes(t.property)?h.sum(a,t.property):null}))];return r},_openAction:function(){this.bool=!0,this.loadColumnsByName(this.requstConfig.mainFormName),Object.keys(this.row).length>0&&!this.row.iisSend?this.getOrderDateil():Object.keys(this.row).length>0&&(this.firstFormDataMaster=this.row,this.orderDetail=[])},getOrderDateil:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isloading=!0,e="".concat(this.requstConfig.modulePreUrl,"/detail?id=").concat(this.row.id),a={},t.next=5,s["a"]["post"](e,a);case 5:i=t.sent,this.orderDetail=[],setTimeout((function(){r.firstFormDataMaster=i.master,r.isloading=!1,r.orderDetail=i.items.defaultList,r.getFare(),r.sountNoQty()}),500);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkboxAllEvent:function(){this.getFare()},checkboxEvent:function(){this.getFare()},getFare:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r,o,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e="/stock/proc/list/spPaperDeliCalcFeeMoney",a={Price:this.row.feePrice},i=this.$refs.firstTable.$refs.originEditTalbe.getCheckboxRecords(),this.autoAccReceFormData.cube=0,!(i.length>0)){t.next=12;break}return r="",i.forEach((function(t){n.autoAccReceFormData.cube+=Number(t.cube),""==r?r=t.coNo+"="+t.coQty:r+=","+t.coNo+"="+t.coQty})),a.OrderList=r,t.next=10,s["a"]["post"](e,a);case 10:o=t.sent,this.autoAccReceFormData.fare=o.list[0].CalcMoney;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cellClickEvent:function(t){var e=t.row,a=t.$rowIndex,i=t.$columnIndex,r=t.rowid,o=t.column,s={row:e,rowIndex:a,columnIndex:i,rowid:r,randomNum:999999*Math.random()};this.$store.dispatch("set_editSelectRowItemAction",s),t.column.editRender&&"popupModal"==t.column.editRender.name&&this.setFirstTableFilterList(o.property)},setFirstTableFilterList:function(){try{var t=this.$refs["firstTable"].$refs["originEditTalbe"];this.$refs["renderForm"].$refs["firstForm"].data;if(t){var e=t.getTableData().tableData,a="",i=this.popupModalConfig.firstTable.requstTab1Config.filterName;e.forEach((function(t){t[i]&&(""==a?a=t[i]:a+=","+t[i])})),this.popupModalConfig.firstTable.requstTab1Config.params.filterList=a}}catch(r){console.warn("====setFirstTableFilterList=====")}}}},p=b,w=(a("3f87"),a("5d22")),g=Object(w["a"])(p,n,c,!1,null,"64ee7ed7",null),v=g.exports,x=a("1472"),C=a.n(x),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{resize:"",remember:"",fullscreen:"",title:t.title,subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showEditBox,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[a("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab2"==t.selectTab,expression:"selectTab == 'tab2'"}]},[a("nvxe-edit-grid",{ref:"secondTable",attrs:{"edit-rules":t.requiredRule[t.requstConfig.tab2FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab2FormName,data:t.secondTableData}})],1)]},proxy:!0}])})],1)])},D=[],T={mapList:{items:"firstTable",feeItems:"secondTable"}},F={name:"edit-outCarList",mixins:[d["a"]],components:{formItemRender:u["a"],tabsTool:l["a"]},data:function(){return{editBoxFormHeight:170,requstConfig:{modulePreUrl:"/stockPaperOut",mainFormName:"stockpaperoutFm",tab1FormName:"stockpaperout_itemFm",tab2FormName:"stockPaperOutOtherFee"}}},methods:{closeWindowAction:function(){this.firstFormDataMaster=m()(this.formDefaultDataObj),this.setTableDefaultData(T,[])},setDefaultValue:function(t){t.master?(this.firstFormData=Object.assign({},T),this.firstFormDataMaster=m()(t.master),this.setTableDefaultData(T,t)):(this.firstFormData=Object.assign({},T),this.firstFormDataMaster=m()(t),this.setTableDefaultData(T,[]))}}},k=F,N=(a("644a"),Object(w["a"])(k,y,D,!1,null,"b186d454",null)),O=N.exports,R=a("1b62"),B=a("2ddf"),$=a("0e4a"),E={name:"paperInList",components:{editBox:O,tabsTool:l["a"],bodyContentDownItem:$["a"],sendDateil:v},provide:function(){var t=this;return{getCenterBtnConfig:function(){return t.centerBtnConfig}}},data:function(){return{centerBtnConfig:{iisAdd:!1},requstConfig:{modulePreUrl:"/stockPaperOut",mainFormName:"stockPaperOutCarListFm",tab1FormName:"stockpaperoutFm",tab2FormName:"stockpaperout_itemFm",tab3FormName:"stockPaperOutOtherFee"},isloading:!1,carData:[],tabList:[{key:"tab1",value:"纸板成品出货明细表"},{key:"tab2",value:"出货单其他费用"}],formData:{startTime:C()().subtract(7,"day").format("YYYY-MM-DD"),endTime:C()().format("YYYY-MM-DD")},showDetail:!1,row:{},isRenovate:!1}},mixins:[R["a"],B["a"]],watch:{formData:{handler:function(t,e){var a=this;setTimeout((function(){a.getCarInfo(t)}),1e3)},deep:!0,immediate:!0},row:{handler:function(t,e){Object.keys(t).length>0&&this.reviseRow(t)},deep:!0,immediate:!0}},methods:{reviseRow:function(t){var e=this,a=this.$refs.mainTable.$refs.originListTalbe.getTableData().tableData;a.some((function(a){if(a.pclNo==t.pclNo)return e.$refs.mainTable.$refs.originListTalbe.setCurrentRow(a),e.saveRowDataToVuex(a),!0}))},saveRowDataToVuex:function(t){var e={row:t,rowIndex:"0",columnIndex:"0",rowid:""};this.$store.dispatch("set_currentSelectRowItemAction",e)},iisEditAction:function(){var t=this.$refs["editBoxs"];t&&(t.showEditBox=!0)},renovateClickEvent:function(){this.showDetail&&(this.isRenovate=!0),this.getCarInfo(this.formData)},cellClickEvent:function(t){this.row=t.row},starClickEvent:function(){var t=this;void 0!==this.row&&(this.showDetail=!this.showDetail,this.showDetail&&(this.$refs.editBox._openAction(),this.isRenovate=!1),!this.showDetail&&this.isRenovate&&setTimeout((function(){t.search()}),500))},getCarInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.startTime&&""!==e.endTime){t.next=3;break}return this.$XModal.message({message:"时间不能为空！",status:"warning"}),t.abrupt("return");case 3:return this.isloading=!0,a="/stock/CarList/item/carList",t.next=7,s["a"]["post"](a,e);case 7:i=t.sent,i.length>0&&(this.carData=i,this.$refs.firstTables.$refs.originListTalbe.setCurrentRow(this.carData[0]),this.row=this.carData[0]),this.isloading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},L=E,I=(a("42f5"),Object(w["a"])(L,i,r,!1,null,"3520ad00",null));e["default"]=I.exports},"644a":function(t,e,a){"use strict";a("d104")},"79dc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsButtonListBox"},[a("div",{staticClass:"tabsButtonListItem leftItem"},[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,i){return[a("vxe-radio-button",{key:i,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(a){return t.selectTabClick(e.key)}}})]}))],2)],1),a("div",{staticClass:"tabsButtonListItem rightItem"})])},r=[],o={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},s=(a("5180"),{name:"tabs-formList",mixins:[o],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],a=this.$store.state.app.currentRouterName;if("sysFrom"!=a&&""!=a){var i=this.$store.state.app.tableColumnsInfo;if(i[a]){for(var r in i[a].listView)if("2"===i[a].listView[r].tableType){var o=i[a].listView[r].tableDesc,s=i[a].listView[r].formSort,n=i[a].listView[r].formSort;e.push({key:"tab"+s,value:o,formSort:n})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),n=s,c=(a("e551"),a("5d22")),l=Object(c["a"])(n,i,r,!1,null,"19af0b3a",null);e["a"]=l.exports},c252:function(t,e,a){},c294:function(t,e,a){},d104:function(t,e,a){},e551:function(t,e,a){"use strict";a("0ee7")}}]);