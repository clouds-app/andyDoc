(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1efe0f0b"],{"0e4a":function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?r("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?r("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?r("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},a=[],o={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},n=o,s=(r("33bc"),r("5d22")),l=Object(s["a"])(n,i,a,!1,null,"550d1612",null);e["a"]=l.exports},"0ee7":function(t,e,r){},"1a07":function(t,e,r){},"33bc":function(t,e,r){"use strict";r("c294")},7603:function(t,e,r){"use strict";r("1a07")},"79dc":function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tabsButtonListBox"},[r("div",{staticClass:"tabsButtonListItem leftItem"},[r("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,i){return[r("vxe-radio-button",{key:i,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(r){return t.selectTabClick(e.key)}}})]}))],2)],1),r("div",{staticClass:"tabsButtonListItem rightItem"})])},a=[],o={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},n=(r("5180"),{name:"tabs-formList",mixins:[o],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],r=this.$store.state.app.currentRouterName;if("sysFrom"!=r&&""!=r){var i=this.$store.state.app.tableColumnsInfo;if(i[r]){for(var a in i[r].listView)if("2"===i[r].listView[a].tableType){var o=i[r].listView[a].tableDesc,n=i[r].listView[a].formSort,s=i[r].listView[a].formSort;e.push({key:"tab"+n,value:o,formSort:s})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),s=n,l=(r("e551"),r("5d22")),u=Object(l["a"])(s,i,a,!1,null,"19af0b3a",null);e["a"]=u.exports},a5e4:function(t,e,r){},aa1f:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bodyContentBox"},[r("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[r("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[r("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[r("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[r("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/pur/prodPo/item/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[r("template",{slot:"toolbar_buttons"},[r("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),r("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}})],1)},a=[],o=r("60b5"),n=(r("6a61"),r("e3b5"),r("79dc")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nvxe-modal",{attrs:{remember:"",fullscreen:"",title:t.title,subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[r("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[r("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[r("div",{staticStyle:{overflow:"auto"},style:{height:.9*t.editBoxFormHeight+"px"}},[r("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showEditBox,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[r("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[r("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[r("nvxe-edit-grid",{ref:"firstTable",attrs:{isMainTable:!0,"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData},on:{"edit-closed":t.editClosedEvent,"cell-click":t.cellClickEvent}})],1)]},proxy:!0}])})],1)])},l=[],u=(r("3bae"),r("1d43"),r("24a8"),r("529f"),r("cb39")),f=r("5180"),c=r.n(f),m=(r("1472"),r("bf8c")),d={mapList:{items:"firstTable"}},p={name:"edit-prodPo",mixins:[m["a"]],components:{formItemRender:u["a"],tabsTool:n["a"]},provide:function(){var t=this;return{getPopupModalConfig:function(){return t.popupModalConfig},getshowPopUpBox:function(){return t.getshowPopUpBox({field:"vendName"})}}},data:function(){return{editBoxFormHeight:180,requstConfig:{modulePreUrl:"/pur/prodPo",mainFormName:"purprodpoFm",tab1FormName:"purprodpoItemFm"},popupModalConfig:{firstTable:{title:"辅料采购列表",mainFormName:"spProdPoPopFm",fieldName:"poLine",editDisabled:!0,requstTab1Config:{isStoredProcedure:!0,modulePreUrl:"/proc/prod/page/spProdPoPop",filterName:"applyNo",params:{},subformName:"spProdPoPopItemFm"}}}}},methods:{popupModalDataResEvent:function(t,e){var r=this,i=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.getSumTableDataToFormBy("poQty:poQty"),i.forEach((function(a,o){o>=t&&o<=e&&r.getprice(i[o])}))},cellClickEvent:function(t){var e=t.column;t.column.editRender&&"popupModal"==t.column.editRender.name&&this.setFirstTableFilterList(e.property)},setFirstTableFilterList:function(t){try{var e=this.$refs["firstTable"].$refs["originEditTalbe"],r=this.$refs["renderForm"].$refs["firstForm"].data;if(e){var i=e.getTableData().tableData,a="",o="applyNo"==t?this.popupModalConfig.firstTable.requstTab1Config.filterName:"ppNo";i.forEach((function(t){t[o]&&(""==a?a=t[o]:a+=","+t[o])})),this.popupModalConfig.firstTable.requstTab1Config.params.filterList=a,this.popupModalConfig.firstTable.requstTab1Config.params["vendCode"]=r["vendCode"],this.popupModalConfig.firstTable.requstTab1Config.params.type="applyNo"==t?"A":"B"}}catch(n){console.warn("====setFirstTableFilterList=====")}},popupChange:function(t){var e=this,r=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;"vendName"===t.field&&r.forEach((function(t){e.getprice(t)}))},iisDelActionEvent:function(){this.getSumTableDataToFormBy("amt:amt"),this.getSumTableDataToFormBy("taxAmt:taxAmt"),this.getSumTableDataToFormBy("poQty:poQty")},closeWindowAction:function(){this.firstFormDataMaster=c()(this.formDefaultDataObj),this.setTableDefaultData(d,[])},setDefaultValue:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.showColumn();case 2:e.master?(this.firstFormData=Object.assign({},d),this.firstFormDataMaster=c()(e.master),this.setTableDefaultData(d,e)):(this.firstFormData=Object.assign({},d),this.firstFormDataMaster=c()(e),this.setTableDefaultData(d,[]));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),showColumn:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,i,a,o,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$store.getters.loginUserInfo_getter.sysParams,r=e.ApplyToPOWithProd,i=e.ReportPriceTOPOWithProd,a=this.$refs.firstTable.$refs.originEditTalbe.getColumns(),"0"!=r){t.next=6;break}return o=a.filter((function(t){return"申购单号"==t.title})),t.next=6,this.$refs.firstTable.$refs.originEditTalbe.hideColumn(o[0]);case 6:if("0"!=i){t.next=10;break}return n=a.filter((function(t){return"辅料编号"==t.title})),t.next=10,this.$refs.firstTable.$refs.originEditTalbe.hideColumn(n[0]);case 10:if("1"!=i&&"1"!=r){t.next=14;break}return s=a.filter((function(t){return"辅料"==t.title})),t.next=14,this.$refs.firstTable.$refs.originEditTalbe.hideColumn(s[0]);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editClosedEvent:function(t){var e=t.column,r=t.$rowIndex,i=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData,a=this;switch(e.property){case"poQty":a.getprice(i[r]),this.getSumTableDataToFormBy("poQty:poQty");break;case"price":a.getprice(i[r]);break;default:break}},getprice:function(t){var e=t.price;if(Number(e)&&Number(this.firstFormDataMaster.rate)){var r=Number(e)-Number(e)*(this.firstFormDataMaster.rate/(this.firstFormDataMaster.rate+1));t["taxPrice"]=r.toFixed(2),t["amt"]=(Number(t["price"])*Number(t["poQty"])).toFixed(2),t["taxAmt"]=(Number(r)*Number(t["poQty"])).toFixed(2),this.getSumTableDataToFormBy("amt:amt"),this.getSumTableDataToFormBy("taxAmt:taxAmt"),this.getSumTableDataToFormBy("poQty:poQty")}}}},b=p,h=(r("7603"),r("5d22")),g=Object(h["a"])(b,s,l,!1,null,"65e77390",null),T=g.exports,w=r("1b62"),v=r("2ddf"),x=r("0e4a"),C={name:"paperAliasList",components:{editBox:T,tabsTool:n["a"],bodyContentDownItem:x["a"]},data:function(){return{requstConfig:{modulePreUrl:"/pur/prodPo",mainFormName:"purprodpoFm",tab1FormName:"purprodpoItemFm"}}},mixins:[w["a"],v["a"]],methods:{showColumn:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,i,a,o,n,s,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$store.getters.loginUserInfo_getter.sysParams,r=e.ApplyToPOWithProd,i=e.ReportPriceTOPOWithProd,a=this.$refs.firstTable.$refs.originListTalbe.getColumns(),!(a.length>4)){t.next=17;break}if("0"!=r){t.next=7;break}return o=a.filter((function(t){return"申购单号"==t.title})),t.next=7,this.$refs.firstTable.$refs.originListTalbe.hideColumn(o[0]);case 7:if("0"!=i){t.next=11;break}return n=a.filter((function(t){return"辅料编号"==t.title})),t.next=11,this.$refs.firstTable.$refs.originListTalbe.hideColumn(n[0]);case 11:if("1"!=i&&"1"!=r){t.next=15;break}return s=a.filter((function(t){return"辅料"==t.title})),t.next=15,this.$refs.firstTable.$refs.originListTalbe.hideColumn(s[0]);case 15:t.next=18;break;case 17:setTimeout((function(){l.showColumn()}),500);case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.showColumn()}},y=C,F=(r("c484"),Object(h["a"])(y,i,a,!1,null,"6fff88d2",null));e["default"]=F.exports},c294:function(t,e,r){},c484:function(t,e,r){"use strict";r("a5e4")},e551:function(t,e,r){"use strict";r("0ee7")}}]);