(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-217ac848"],{"0e4a":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?i("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?i("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?i("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},a=[],n={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},s=n,r=(i("33bc"),i("5d22")),c=Object(r["a"])(s,o,a,!1,null,"550d1612",null);e["a"]=c.exports},"0ee7":function(t,e,i){},"33bc":function(t,e,i){"use strict";i("c294")},"5e90":function(t,e,i){"use strict";i("8194")},"79dc":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabsButtonListBox"},[i("div",{staticClass:"tabsButtonListItem leftItem"},[i("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,o){return[i("vxe-radio-button",{key:o,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(i){return t.selectTabClick(e.key)}}})]}))],2)],1),i("div",{staticClass:"tabsButtonListItem rightItem"})])},a=[],n={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},s=(i("5180"),{name:"tabs-formList",mixins:[n],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],i=this.$store.state.app.currentRouterName;if("sysFrom"!=i&&""!=i){var o=this.$store.state.app.tableColumnsInfo;if(o[i]){for(var a in o[i].listView)if("2"===o[i].listView[a].tableType){var n=o[i].listView[a].tableDesc,s=o[i].listView[a].formSort,r=o[i].listView[a].formSort;e.push({key:"tab"+s,value:n,formSort:r})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),r=s,c=(i("e551"),i("5d22")),l=Object(c["a"])(r,o,a,!1,null,"19af0b3a",null);e["a"]=l.exports},8194:function(t,e,i){},a4dd:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bodyContentBox"},[i("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[i("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[i("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[i("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[i("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/account/vendInvoice/item/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[i("template",{slot:"toolbar_buttons"},[i("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),i("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}})],1)},a=[],n=i("79dc"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nvxe-modal",{attrs:{remember:"",fullscreen:"",title:t.title,subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[i("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[i("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[i("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[i("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showEditBox,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[i("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[i("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[i("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData},on:{"cell-click":t.cellClickEvent,"edit-closed":t.editClosedEvent}})],1)]},proxy:!0}])})],1)])},r=[],c=(i("1d43"),i("3bae"),i("24a8"),i("cb39")),l=i("5180"),u=i.n(l),f=(i("1472"),i("bf8c")),m=function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}}(),d={mapList:{items:"firstTable"}},b={name:"Invoice",mixins:[f["a"]],components:{formItemRender:c["a"],tabsTool:n["a"]},provide:function(){var t=this;return{getPopupModalConfig:function(){return t.popupModalConfig},getshowPopUpBox:function(){return t.getshowPopUpBox({field:"vendName"})}}},data:function(){return{editBoxFormHeight:80,requstConfig:{modulePreUrl:"/account/vendInvoice",mainFormName:"accountvendinvoiceFm",tab1FormName:"accountvendinvoice_itemFm"},popupModalConfig:{firstTable:{title:"开票登记明细列表",mainFormName:"spAccountVendReceFm",fieldName:"prods",requstTab1Config:{isStoredProcedure:!0,modulePreUrl:"/proc/prod/page/spAccountVendRecePop",filterName:"billNo",params:{},subformName:"spAccountVendRecePopFm"}}}}},methods:{closeWindowAction:function(){this.firstFormDataMaster=u()(this.formDefaultDataObj),this.setTableDefaultData(d,[])},setDefaultValue:function(t){t.master?(this.firstFormData=Object.assign({},d),this.firstFormDataMaster=u()(t.master),this.setTableDefaultData(d,t)):(this.firstFormData=Object.assign({},d),this.firstFormDataMaster=u()(t),this.setTableDefaultData(d,[]))},cellClickEvent:function(t){t.column.editRender&&"popupModal"==t.column.editRender.name&&this.setFirstTableFilterList()},setFirstTableFilterList:function(){try{var t=this.$refs["firstTable"].$refs["originEditTalbe"];if(t){var e=t.getTableData().tableData,i="",o=this.popupModalConfig.firstTable.requstTab1Config.filterName;e.forEach((function(t){t[o]&&(""==i?i=t[o]:i+=","+t[o])})),this.popupModalConfig.firstTable.requstTab1Config.params.sDate="",this.popupModalConfig.firstTable.requstTab1Config.params.eDate="",this.popupModalConfig.firstTable.requstTab1Config.params.vendCode=this.firstFormDataMaster.vendCode,this.popupModalConfig.firstTable.requstTab1Config.params.filterList=i}}catch(a){console.warn("====setFirstTableFilterList=====")}},tableOperationChange:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t.getSumTableDataToFormBy("invoiceAmt:invoicedAmt")}),100)}))},popUpTableChange:function(t){var e=t.tableInfo.data,i=t.tableInfo.$rowIndex,o=Number(t.resParams.matchField.invoiceCoinRate),a=Number(e[i]["billCoinRate"]);e[i]["coinRate"]=this.formatAmountByType(a/o),e[i]["invoiceAmt"]=Number(e[i]["billInvoicedAmt"])*Number(e[i]["coinRate"]),this.getSumTableDataToFormBy("invoiceAmt:invoicedAmt"),this.recount_noWriteOffAmt()},popupModalDataResEvent:function(t,e){this.getSumTableDataToFormBy("invoiceAmt:invoicedAmt"),this.getSumTableDataToFormBy("noWriteOffAmt:invoicedAmt")},recount_noWriteOffAmt:function(){var t=Number(this.firstFormDataMaster["irAmt"])-Number(this.firstFormDataMaster["writeOffAmt"]);this.firstFormDataMaster["noWriteOffAmt"]=this.formatAmountByCustom(t)},editClosedEvent:function(t){var e=this,i=t.column,o=(t.$rowIndex,t.row),a=this;switch(i.property){case"invoicedAmt":a.getSumTableDataToFormBy("invoiceAmt:invoicedAmt"),a.getSumTableDataToFormBy("noWriteOffAmt:invoicedAmt"),m((function(){o.invoicedAmt>o.notInvoicedAmt&&(o.invoicedAmt=0,e.$XModal.message({message:"开票金额不能大于未开票金额",status:"warning"}),a.getSumTableDataToFormBy("invoiceAmt:invoicedAmt"))}),500);break;default:break}}}},p=b,h=(i("c442"),i("5d22")),v=Object(h["a"])(p,s,r,!1,null,"2d5c62a4",null),g=v.exports,w=i("1b62"),T=i("2ddf"),C=i("0e4a"),F={name:"Invoice",components:{editBox:g,tabsTool:n["a"],bodyContentDownItem:C["a"]},data:function(){return{requstConfig:{modulePreUrl:"/account/vendInvoice",mainFormName:"accountvendinvoiceFm",tab1FormName:"accountvendinvoice_itemFm"}}},mixins:[w["a"],T["a"]],methods:{}},x=F,y=(i("5e90"),Object(h["a"])(x,o,a,!1,null,"0a1af20a",null));e["default"]=y.exports},c294:function(t,e,i){},c442:function(t,e,i){"use strict";i("f78e")},e551:function(t,e,i){"use strict";i("0ee7")},f78e:function(t,e,i){}}]);