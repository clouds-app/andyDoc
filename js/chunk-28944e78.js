(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28944e78"],{"002d":function(e,t,r){"use strict";r("3cfd")},"05a0":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bodyContentBox"},[r("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[r("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[r("nvxe-grid",{ref:"mainTable",attrs:{"tree-config":{accordion:!0,lazy:!0,hasChild:"hasChild",loadMethod:e.loadChildrenMethod,trigger:"cell",children:"children",iconOpen:"vxe-icon--remove",iconClose:"vxe-icon--circle-plus"},loading:e.listLoading,toolbarConfigShow:!0,isMainTable:!0,height:.6*e.windowOffsetHeight,columnsFormName:e.requstConfig.mainFormName,dataUrl:e.requstConfig.modulePreUrl+"/"+e.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[r("div",{staticClass:"firstTableBox"},[r("div",{staticClass:"firstTableItem leftItem"},[r("nvxe-grid",{ref:"firstTable",attrs:{loading:e.firstLoading,handleEventInFront:!0,toolbarConfig:e.toolbarConfig,height:.4*e.windowOffsetHeight,columnsFormName:e.requstConfig.tab1FormName,params:{rowItem:e.currentSelectRowItem.row,updateFlag:e.updateFlag}},on:{handleEventInFront:e.loadData_sysresourceexpFm,"cell-click":e.cellClickEvent_firstTable},scopedSlots:e._u([{key:"toolbar_buttons",fn:function(){return[r("commonButtonList",{attrs:{showEditBtn:!0,currentRowItem:e.currentRowItem},on:{operationEvent:e.operationEvent}})]},proxy:!0}])})],1),r("div",{staticClass:"firstTableItem rightItem"},[r("nvxe-grid",{ref:"secondTable",attrs:{loading:e.secondLoading,handleEventInFront:!0,toolbarConfig:e.toolbarConfig,height:.4*e.windowOffsetHeight,columnsFormName:e.requstConfig.tab2FormName,params:{rowItem:e.currentSelectRowItem.row,updateFlag:e.updateFlag}},on:{handleEventInFront:e.loadData_resourcereportFm},scopedSlots:e._u([{key:"toolbar_buttons",fn:function(){return[r("div",{staticClass:"resourceReportList"},[e._v("资源所属报表列表")])]},proxy:!0}])})],1)])]},proxy:!0}])})],1),r("editBox",{ref:"editBox",on:{submitSuccess:e.submitSuccess}}),r("editSlaveBox",{ref:"editSlaveBox",attrs:{mainRowItem:e.mainRowItem,actionType:e.actionType,currentRowItem:e.currentRowItem},on:{closeWindowAction:e.closeWindowAction,submitSlaveSuccess:e.submitSlaveSuccess}})],1)},o=[],i=r("60b5"),s=(r("b3b0"),r("a5f8"),r("16ca"),r("62f9"),r("6a61"),r("3083")),a=r("34ea"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nvxe-modal",{attrs:{title:e.title,subTitle:e.subTitle,loading:e.vxeModalLoading},on:{confirm:function(t){return e.submitEvent()}},model:{value:e.showEditBox,callback:function(t){e.showEditBox=t},expression:"showEditBox"}},[r("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[r("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[r("formItemRender",{ref:"renderForm",attrs:{formValueChangeRes:e.formValueChangeRes,showEditBox:e.showEditBox,firstFormRules:e.requiredRule[e.requstConfig.mainFormName],firstFormData:e.firstFormData,formItemList:e.formItemList},on:{formItemValueEvent:e.formItemValueEvent}})]},proxy:!0}])})],1)])},u=[],l=r("5180"),d=r.n(l),m=r("cb39"),f=r("bf8c"),h={name:"edit-resource",mixins:[f["a"]],components:{formItemRender:m["a"]},data:function(){return{subTitle:"系统资源 ",requstConfig:{modulePreUrl:"/sys/resource",mainFormName:"sysresourceFm",tab1FormName:"sysresourceexpFm",tab2FormName:"resourcereportFm"},formValueChangeRes:{parentName:{disabled:!0,visible:!0}}}},methods:{closeWindowAction:function(){this.firstFormData=d()(this.formDefaultDataObj)},setDefaultValue:function(e){this.firstFormData=d()(e),this.firstFormData.parentId||(this.firstFormData.parentId=this.currentSelectRowItem.row.id,this.firstFormData.parentName=this.currentSelectRowItem.row.resourceName),this.listActionType==this.operationType.iisAdd?this.formValueChangeRes.parentName.visible=!0:this.formValueChangeRes.parentName.visible=!1},submitEvent:function(){this.submitSingleTableEvent()}}},p=h,w=(r("002d"),r("5d22")),b=Object(w["a"])(p,c,u,!1,null,"2517cd11",null),g=b.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nvxe-modal",{attrs:{title:e.slaveTitle,subTitle:e.subTitle,loading:e.vxeModalLoading},on:{confirm:function(t){return e.submitEvent()}},model:{value:e.showEditBox,callback:function(t){e.showEditBox=t},expression:"showEditBox"}},[r("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[r("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[r("formItemRender",{ref:"renderForm",attrs:{formValueChangeRes:e.formValueChangeRes,showEditBox:e.showEditBox,firstFormRules:e.requiredRule[e.requstConfig.tab1FormName],firstFormData:e.firstFormData,formItemList:e.formItemList},on:{formItemValueEvent:e.formItemValueEvent}})]},proxy:!0}])})],1)])},x=[],y={name:"edit-resource",mixins:[f["a"]],components:{formItemRender:m["a"]},props:{actionType:{type:String,default:a["d"].iisAdd},currentRowItem:{type:Object,default:function(){return{}}},mainRowItem:{type:Object,default:function(){return{}}}},data:function(){return{secondOperationType:a["d"],slaveTitle:"添加",subTitle:"拓展功能 ",requstConfig:{modulePreUrl:"/sys/resource",mainFormName:"sysresourceFm",tab1FormName:"sysresourceexpFm",tab2FormName:"resourcereportFm"}}},watch:{actionType:function(e,t){e&&e!=a["d"].iisAdd?(this.loadDetailById(),this.slaveTitle="编辑"):this.slaveTitle="添加"}},methods:{loadDetailById:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.vxeModalLoading=!0,this.rowDetailItem={},t=this.currentRowItem.id,t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,r="".concat(this.requstConfig.modulePreUrl,"/exp/detail/").concat(t),n={},e.next=10,this.request["post"](r,n);case 10:this.rowDetailItem=e.sent,this._setDefaultValue(this.rowDetailItem),this.setDefaultValue(this.rowDetailItem),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),console.warn("==edit-resourceSlave====查询详细 err loadDetailById=======");case 18:this.vxeModalLoading=!1;case 19:case"end":return e.stop()}}),e,this,[[5,15]])})));function t(){return e.apply(this,arguments)}return t}(),_openWindowAction:function(){this.tableColumnsInfo?this._setformItemList(this.tableColumnsInfo):this.loadColumnsByName(this.requstConfig.tab1FormName)},_setformItemList:function(e){var t=this;if(t.formItemList=e.columns[t.requstConfig.tab1FormName].editColumns,t.requiredRule=d()(e.requiredRule),t.actionType==a["d"].iisAdd){var r=this._formatDefaultValue(e.initData[t.requstConfig.tab1FormName],t.formItemList);t.setDefaultValue(r),t.formDefaultDataObj=r}},closeWindowAction:function(){this.firstFormData=d()(this.formDefaultDataObj),this.$emit("closeWindowAction")},setDefaultValue:function(e){this.firstFormData=d()(e),this.actionType==a["d"].iisAdd&&(this.firstFormData.resourceId=this.mainRowItem.params.rowItem.id)},submitEvent:function(){this.submitSingleTableEvent()},submitSingleTableEvent:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,r=t.$refs["renderForm"].$refs["firstForm"],!r){e.next=21;break}return e.prev=3,e.next=6,r.validate();case 6:return e.sent,n="".concat(this.requstConfig.modulePreUrl,"/exp/save"),this.actionType==a["d"].iisEdit&&(n="".concat(this.requstConfig.modulePreUrl,"/exp/update")),o=this.postFormatSingleForm(this.firstFormData),i=this.getFormatSingleForm(this.firstFormData),e.next=13,this.request["update"](n,o);case 13:e.sent,t.showEditBox=!1,t.$emit("submitSlaveSuccess",i),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](3),console.error("=======".concat(this.subTitle,">>提交表单错误(表单验证错误):submitSingleTableEvent==========="));case 21:case"end":return e.stop()}}),e,this,[[3,18]])})));function t(){return e.apply(this,arguments)}return t}()}},I=y,C=(r("b61b"),Object(w["a"])(I,v,x,!1,null,"87d12998",null)),T=C.exports,F=r("1b62"),D=r("2ddf"),R=r("0e4a"),E={name:"resourceList",components:{editBox:g,editSlaveBox:T,commonButtonList:s["a"],bodyContentDownItem:R["a"]},data:function(){return{tableDataConfig:{seqColumn:[{showOverflow:!0,fixed:"left",type:"seq",visible:!0,title:"#",headerAlign:"center",align:"center",width:110,treeNode:!0}]},searchParamsConfig:{parentId:0},mainPageSearchType:"list",loadChildrenItem:{},secondOperationType:a["d"],actionType:"",firstLoading:!1,secondLoading:!1,currentRowItem:{},mainRowItem:{},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},requstConfig:{modulePreUrl:"/sys/resource",mainFormName:"sysresourceFm",tab1FormName:"sysresourceexpFm",tab2FormName:"resourcereportFm"}}},mixins:[F["a"],D["a"]],methods:{removeSomethingWhenRefresh:function(){this.$nextTick((function(){}))},submitSuccess:function(e){this.refreshTabsTableData();var t=this.$refs["mainTable"].$refs["originListTalbe"],r=t.getRowById(this.mainRowItem.params.rowItem.parentId);t.clearTreeExpandLoaded(r),setTimeout((function(){t.setTreeExpand([r],!0)}),300)},loadChildrenMethod:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.row,n="".concat(this.requstConfig.modulePreUrl,"/list"),o={parentId:r.id},e.prev=3,e.next=6,this.request["post"](n,o);case 6:if(i=e.sent,!(i&&i.length>0)){e.next=9;break}return e.abrupt("return",i);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](3);case 13:case"end":return e.stop()}}),e,this,[[3,11]])})));function t(t){return e.apply(this,arguments)}return t}(),loadData_sysresourceexpFm:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mainRowItem=t,this.currentRowItem={},r=this.$refs["firstTable"].$refs["originListTalbe"],r.loadData([]),n=t.params.rowItem,o=n.id,o&&"0"!=o&&(!n||!n.resourceType||n.resourceType.includes("2"))){e.next=8;break}return e.abrupt("return");case 8:return this.firstLoading=!0,e.prev=9,i="".concat(this.requstConfig.modulePreUrl,"/exp/list/").concat(o),s={},e.next=14,this.request["post"](i,s);case 14:a=e.sent,this.firstLoading=!1,a&&a.length>0&&r.loadData(a),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](9),this.firstLoading=!1;case 22:case"end":return e.stop()}}),e,this,[[9,19]])})));function t(t){return e.apply(this,arguments)}return t}(),loadData_resourcereportFm:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.$refs["secondTable"].$refs["originListTalbe"],r.loadData([]),n=t.params.rowItem,o=n.id,o&&"0"!=o&&(!n||!n.resourceType||n.resourceType.includes("2"))){e.next=6;break}return e.abrupt("return");case 6:return this.secondLoading=!0,e.prev=7,i="/sys/report/resource/".concat(o),s={},e.next=12,this.request["post"](i,s);case 12:a=e.sent,this.secondLoading=!1,a&&a.length>0&&r.loadData(a),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),this.secondLoading=!1;case 20:case"end":return e.stop()}}),e,this,[[7,17]])})));function t(t){return e.apply(this,arguments)}return t}(),operationEvent:function(e){switch(e.operationType){case a["d"].iisAdd:case a["d"].iisEdit:this.addOrEditAction(e);break;case a["d"].iisDel:this.delAction(e);break;default:break}},delAction:function(e){var t=this,r=this.currentRowItem.id,n="".concat(this.requstConfig.modulePreUrl,"/exp/delete/").concat(r),o={};this.$XModal.confirm({status:"warning",message:"确定要删除当前选中数据吗？"}).then((function(e){"confirm"===e&&t.request["update"](n,o).then((function(e){t.refreshTabsTableData()}))}))},addOrEditAction:function(e){var t=this.mainRowItem.params.rowItem;t.id;if(this.mainRowItem&&Object.keys(this.mainRowItem).length>0&&t.resourceType.includes("2")){this.actionType=e.operationType;var r=this.$refs["editSlaveBox"];r&&(r.showEditBox=!0)}else this.$XModal.message({message:"请选择模块资源数据",status:"warning"})},submitSlaveSuccess:function(){this.refreshTabsTableData()},closeWindowAction:function(){this.actionType=""},cellClickEvent_firstTable:function(e){var t=e.row,r=this;clearTimeout(this.rowDetaiTimer),this.rowDetaiTimer=setTimeout((function(){r.currentRowItem=t}),300)}}},B=E,O=(r("3454"),Object(w["a"])(B,n,o,!1,null,"4ff14f9b",null));t["default"]=O.exports},"0e4a":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:"column"===e.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[e.$slots.part1?r("div",{staticClass:"bodyContentDownItem",style:{width:e.config.windowOffsetWidth+"px"}},[e._t("part1",[e._v("part1")])],2):e._e(),e.$slots.part2?r("div",{staticClass:"bodyContentDownItem",style:{width:e.config.windowOffsetWidth+"px"}},[e._t("part2",[e._v("part2")])],2):e._e(),e.$slots.part3?r("div",{staticClass:"bodyContentDownItem",style:{width:e.config.windowOffsetWidth+"px"}},[e._t("part3",[e._v("part3")])],2):e._e()])},o=[],i={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},s=i,a=(r("33bc"),r("5d22")),c=Object(a["a"])(s,n,o,!1,null,"550d1612",null);t["a"]=c.exports},"33bc":function(e,t,r){"use strict";r("c294")},3454:function(e,t,r){"use strict";r("feae")},"3cfd":function(e,t,r){},b61b:function(e,t,r){"use strict";r("d581")},c294:function(e,t,r){},d581:function(e,t,r){},feae:function(e,t,r){}}]);