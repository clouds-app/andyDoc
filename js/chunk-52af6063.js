(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52af6063"],{"038c":function(t,e,a){},"0e4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},r=[],o={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},s=o,n=(a("33bc"),a("5d22")),l=Object(n["a"])(s,i,r,!1,null,"550d1612",null);e["a"]=l.exports},"0ee7":function(t,e,a){},"1d82":function(t,e,a){},2043:function(t,e,a){},"33bc":function(t,e,a){"use strict";a("c294")},"363f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bodyContentBox"},[a("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[a("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/sPaper/sPaperOut/item/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),a("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}}),a("spaperWebsocket",{attrs:{weighData:t.weighData,showEditBox:t.Websocket,windowOffsetHeight:t.windowOffsetHeight},on:{closeEvent:function(e){t.Websocket=!1}}})],1)},r=[],o=a("60b5"),s=(a("6a61"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{hideSubmitBtn:!0,title:"原纸进出卷号自动登记",subTitle:"",loading:t.formLoading,remember:"",fullscreen:""},on:{cancel:t.closeEvent,hide:t.closeEvent},model:{value:t.showweightBox,callback:function(e){t.showweightBox=e},expression:"showweightBox"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"letfBox"},[a("div",{staticClass:"topForm"},[a("div",{staticClass:"firstForm"},[a("vxe-form",{ref:"formLeft",attrs:{data:t.formData,loading:t.formLoading,"title-width":"90",size:"mini","title-align":"right"}},[a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"班别",field:"teamCode","title-width":"70",span:"12"}},[a("popUpPullDown",{attrs:{matchField:"teamCode:teamCode,teamName:teamCodeName",currentValue:t.formData.teamName,field:"teamCode",paramsItem:t.teamCodeParamsItem},on:{popupChange:t.popupChange}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"线别",field:"lineCode","title-width":"70",span:"12"}},[a("popUpPullDown",{attrs:{matchField:"lineCode:lineCode,lineName:lineCodeName",currentValue:t.formData.lineName,field:"lineCode",paramsItem:t.lineCodeParamsItem},on:{popupChange:t.popupChange}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"出/退人",field:"optWorkerCode","title-width":"70",span:"12"}},[a("popUpPullDown",{attrs:{matchField:"optWorkerCode:workerCode,optWorkerName:workerCodeName",currentValue:t.formData.optWorkerName,field:"optWorkerCode",paramsItem:t.optWorkerCodeParamsItem},on:{popupChange:t.popupChange}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"领/收人",field:"lsrWorkerCode","title-width":"70",span:"12"}},[a("popUpPullDown",{attrs:{matchField:"lsrWorkerCode:workerCode,lsrWorkerName:workerCodeName",currentValue:t.formData.lsrWorkerName,field:"lsrWorkerCode",paramsItem:t.lsrWorkerCodeParamsItem},on:{popupChange:t.popupChange}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"单号",field:"billCode","title-width":"70",span:"12"}},[a("vxe-input",{attrs:{type:"String",disabled:"",clearable:""},model:{value:t.formData.billCode,callback:function(e){t.$set(t.formData,"billCode",e)},expression:"formData.billCode"}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"出/退日",field:"billDate","title-width":"70",span:"12"}},[a("vxe-input",{attrs:{type:"String",disabled:"",clearable:""},model:{value:t.formData.billDate,callback:function(e){t.$set(t.formData,"billDate",e)},expression:"formData.billDate"}})],1)],1)],1),a("div",{staticClass:"radioList"},[a("vxe-radio",{attrs:{label:"0",content:"指令"},on:{change:t.radioChange},model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}}),a("vxe-radio",{staticStyle:{margin:"0"},attrs:{label:"1",content:"自动"},on:{change:t.radioChange},model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}})],1),a("div",{staticClass:"buttomList"},[a("vxe-button",{class:!0===t.billStatus&&"0"==t.radioValue?"bggreen":"",attrs:{content:"出ㅤㅤ仓",size:"small",disabled:""}}),a("vxe-button",{class:!1===t.billStatus&&"0"==t.radioValue?"bggreen":"",attrs:{content:"退ㅤㅤ仓",size:"small",disabled:""}}),a("vxe-button",{class:"1"==t.radioValue?"bggreen":"",attrs:{content:"自ㅤㅤ动",size:"small",disabled:""}})],1),a("div",{staticClass:"weightData"},[a("vxe-input",{model:{value:t.billWt,callback:function(e){t.billWt=e},expression:"billWt"}})],1),a("div",{staticClass:"buttomList"},[a("vxe-select",{staticStyle:{width:"100%"},attrs:{placeholder:"地磅",size:"mini"},model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}},t._l(t.weighData,(function(t){return a("vxe-option",{key:t.id,attrs:{value:t,label:t.serName}})})),1),a("vxe-button",{attrs:{size:"small",content:"连接地磅"},on:{click:t.initgetSerial}}),a("vxe-button",{attrs:{size:"small",content:"测试打印"}})],1)])]),a("div",{staticClass:"scanMsg"},[a("vxe-textarea",{ref:"inputRef",attrs:{autosize:{minRows:4,maxRows:4,showWordCount:!0},fieldKeyName:"preDesign",readonly:"",resize:"none",size:"mini"},model:{value:t.scanMsg,callback:function(e){t.scanMsg=e},expression:"scanMsg"}})],1)]),a("div",{staticClass:"secondForm"},[a("vxe-form",{ref:"formLeft",staticClass:"leftForm",attrs:{data:t.formData,loading:t.formLoading,"title-width":"90",size:"mini","title-align":"right"}},[a("vxe-form-item",{staticClass:"paddingNone",staticStyle:{color:"red","font-weight":"bold","font-size":"13px"},attrs:{title:"原纸卷号",field:"coilCode","title-width":"70",span:"24"}},[a("vxe-input",{attrs:{size:"default",type:"string",clearable:""},on:{change:t.getTableData_debounce},model:{value:t.formData.coilCode,callback:function(e){t.$set(t.formData,"coilCode",e)},expression:"formData.coilCode"}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"排程单",field:"pppNo","title-width":"70",span:"18"}},[a("vxe-select",{attrs:{placeholder:"",size:"mini"},model:{value:t.formData.pppNo,callback:function(e){t.$set(t.formData,"pppNo",e)},expression:"formData.pppNo"}},t._l(t.pppNoList,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t.value,label:t.value}})})),1)],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:" ",field:"","title-width":"15",span:"2"}},[a("vxe-button",{attrs:{size:"mini",content:"保存数据"},on:{click:t.submitEvent}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"扣重",field:"lostWt","title-width":"60",span:"12"}},[a("vxe-input",{attrs:{type:"number",clearable:""},model:{value:t.formData.lostWt,callback:function(e){t.$set(t.formData,"lostWt",e)},expression:"formData.lostWt"}})],1),a("vxe-form-item",{staticClass:"paddingNone",attrs:{title:"机台号",field:"macCode","title-width":"60",span:"12"}},[a("vxe-input",{attrs:{type:"String",clearable:""},model:{value:t.formData.macCode,callback:function(e){t.$set(t.formData,"macCode",e)},expression:"formData.macCode"}})],1)],1),a("div",{staticClass:"rightText",class:"boolean"==typeof t.billStatus?"fontgreen":"fontred"},[t._v(t._s(t.coilMsg))])],1),a("div",{staticClass:"bottomTable"},[a("div",{staticClass:"leftTable"},[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!1,loading:t.formLoading,height:.61*t.windowOffsetHeight-5,columnsFormName:t.requstConfig.mainFormName,showContextMenu:!1,toolbarConfigShow:!1,data:t.mainTableData}})],1),a("div",{staticClass:"rightTable"},[a("tabsTool",{attrs:{currentTab:t.selectTab,defaulttabList:t.defaulttabList},on:{tabsChange:t.tabsChange}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab === 'tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{isMainTable:!1,loading:t.formLoading,height:.61*t.windowOffsetHeight-30,columnsFormName:t.requstConfig.tab1FormName,showContextMenu:!1,toolbarConfigShow:!1,data:t.firstTableData},on:{"cell-click":t.firstCellClick}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab2"===t.selectTab,expression:"selectTab === 'tab2'"}]},[a("nvxe-grid",{ref:"secondTable",attrs:{isMainTable:!1,loading:t.formLoading,height:.61*t.windowOffsetHeight-30,columnsFormName:t.requstConfig.tab2FormName,showContextMenu:!1,toolbarConfigShow:!1,data:t.secondTableData},on:{"cell-click":t.secondCellClick}})],1)],1)])])}),n=[],l=a("58c8"),c=a("0d11"),d=a("6abc"),u=(a("24a8"),a("3bae"),a("4200"),a("5b12"),a("9b5f"),a("27ae"),a("d447"),a("16ca"),a("62f9"),a("5180")),f=a.n(u),m=a("6b6c"),p=a("1472"),b=a.n(p),h=a("1b62"),g=a("79dc"),C=a("18b8"),v=(a("5d08"),function(t,e){var a=t.startStr,i=t.endStr,r=t.validDataLen;switch(!0){case!!a:return-1!=e.lastIndexOf(a)?w({value:e.slice(e.lastIndexOf(a)+1),endStr:i,startStr:a,validDataLen:r}):{withData:0,lastData:""};case!!i:return-1!=e.lastIndexOf(i)?D({value:e,validDataLen:r,endStr:i}):{withData:"",lastData:e};default:break}}),w=function(t){var e=t.value,a=t.endStr,i=t.startStr,r=t.validDataLen;if(!e)return{lastData:i,withData:""};if(a){var o=e.indexOf(a);return-1==o?{lastData:i+e,withData:""}:{withData:Number(e.slice(0,o)),lastData:""}}if(e.length>=r){var s=Object(l["a"])(e),n=0;for(n=s.length-1;n>0;n--)if(Number(s[n])!=s[n])break;return 0==n?{withData:Number(e.slice(0,r)),lastData:""}:{withData:"",lastData:""}}return{lastData:i+e,withData:""}},D=function(t){var e=t.value,a=t.validDataLen,i=t.endStr;if(!e)return{withData:"",lastData:""};if(a){if(e.slice(0,e.lastIndexOf(i)).length>=a){var r=e.slice(-a-1,-1);return r==Number(r)?{withData:Number(r),lastData:""}:{withData:"",lastData:""}}return{lastData:e.slice(e.indexOf(i)+1),withData:""}}var o=e.lastIndexOf(i),s=Object(l["a"])(e),n=0;for(n=o-1;n>=0;n--)if(Number(s[n])!=s[n])break;return{withData:Number(e.slice(n+1,o)),lastData:e.slice(e.lastIndexOf(i)+1)}},x={lineCode:"",lineName:"",teamCode:"",teamName:"",optWorkerCode:"",optWorkerName:"",lsrWorkerCode:"",lsrWorkerName:"",lostWt:0,coilCode:"",pppNo:"",macCode:"",billCode:"",billDate:""},T={align:"left",cellRender:null,children:[],editRender:{defaultText:"",defaultValue:"",matchField:"teamCode:teamCode,teamName:teamCodeName",name:"popup",sourceKey:"teamSingleBox"},field:"teamCode",fieldOrder:65,formatter:"",headerAlign:"center",iisMoney:!1,labelWidth:80,query:!0,readOnly:!0,sortable:!1,title:"班别",titleGroup:"",virtual:!0,visible:!0,width:12},k={align:"left",cellRender:null,children:[],editRender:{defaultText:"",defaultValue:"",matchField:"lineCode:lineCode,lineName:lineCodeName",name:"popup",sourceKey:"lineSingleBox"},field:"lineCode",fieldOrder:65,formatter:"",headerAlign:"center",iisMoney:!1,labelWidth:80,query:!0,readOnly:!0,sortable:!1,title:"线别",titleGroup:"",virtual:!0,visible:!0,width:12},N={align:"left",cellRender:null,children:[],editRender:{defaultText:"",defaultValue:"",matchField:"optWorkerCode:workerCode,optWorkerName:workerCodeName",name:"popup",sourceKey:"oneWorkerMultiBox"},field:"optWorkerCode",fieldOrder:65,formatter:"",headerAlign:"center",iisMoney:!1,labelWidth:80,query:!0,readOnly:!0,sortable:!1,title:"出退人",titleGroup:"",virtual:!0,visible:!0,width:12},y={align:"left",cellRender:null,children:[],editRender:{defaultText:"",defaultValue:"",matchField:"lsrWorkerCode:workerCode,lsrWorkerName:workerCodeName",name:"popup",sourceKey:"oneWorkerMultiBox"},field:"lsrWorkerCode",fieldOrder:65,formatter:"",headerAlign:"center",iisMoney:!1,labelWidth:80,query:!0,readOnly:!0,sortable:!1,title:"领收人",titleGroup:"",virtual:!0,visible:!0,width:12},S={provide:function(){var t=this;return{getPopupConfig:function(){return t.popupConfig}}},mixins:[h["a"]],components:{tabsTool:g["a"]},props:{showEditBox:{type:Boolean,default:!1},windowOffsetHeight:{type:Number|String,default:500},weighData:{type:Array,default:function(){return[]}}},data:function(){return{optionValue:"",radioValue:"1",firstTableData:[],secondTableData:[],mainTableData:[],pppNoList:[],billStatus:"",selectTableRow:{},selectTab:"tab1",defaulttabList:[{key:"tab1",value:"原纸出仓"},{key:"tab2",value:"原纸退仓"}],formData:f()(x),formLoading:!1,billWt:210708001,scanMsg:"",coilMsg:"",requstConfig:{modulePreUrl:"",mainFormName:"spaperScanPlanFm",tab1FormName:"spaperScanOutFm",tab2FormName:"spaperScanBackFm"},teamCodeParamsItem:f()(T),lineCodeParamsItem:f()(k),optWorkerCodeParamsItem:f()(N),lsrWorkerCodeParamsItem:f()(y),showweightBox:!1,port:null,reader:null,keepReading:!0,lastData:"",WithData:""}},watch:{showEditBox:function(t,e){var a=this;this.showweightBox=t,t&&(this.getLineTeam(),this.$nextTick((function(){a.tabsChange("tab1")})))}},created:function(){var t=this;this.getTableData_debounce=Object(C["debounce"])(800,!1,(function(e){t.getrightTableData(e)})),this.getMainTableData_debounce=Object(C["debounce"])(800,!1,(function(e){t.getMainTableData(e)}))},methods:{initgetSerial:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,a=this.optionValue.frequency,!(!1 in navigator)){t.next=4;break}return e.$XModal.message({message:"浏览器页面不支持读取串口数据，请联系客服人员！",status:"error"}),t.abrupt("return");case 4:if(a){t.next=7;break}return e.$XModal.message({message:"请选择地磅参数！",status:"error"}),t.abrupt("return");case 7:return t.next=9,navigator.serial.requestPort();case 9:return e.port=t.sent,this.scanMsg="串口连接成功"+this.scanMsg,t.prev=11,t.next=14,e.port.open({baudRate:a});case 14:e.scanMsg="串口打开成功\n"+e.scanMsg,e.keepReading=!0,e.reader=e.port.readable.getReader(),e.watchSerialData(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](11),e.scanMsg="串口打开失败：\n"+t.t0+"\n"+e.scanMsg;case 23:case"end":return t.stop()}}),t,this,[[11,20]])})));function e(){return t.apply(this,arguments)}return e}(),watchSerialData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this;case 1:if(!this.port.readable||!e.keepReading){t.next=24;break}t.prev=2;case 3:return t.next=6,e.reader.read();case 6:if(a=t.sent,i=a.value,r=a.done,!r){t.next=12;break}return e.reader.releaseLock(),t.abrupt("break",15);case 12:i&&e.dealWithData(i),t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),console.log(t.t0);case 20:return t.prev=20,t.finish(20);case 22:t.next=1;break;case 24:return t.next=26,e.port.close();case 26:e.scanMsg="串口已断开\n"+e.scanMsg;case 27:case"end":return t.stop()}}),t,this,[[2,17,20,22]])})));function e(){return t.apply(this,arguments)}return e}(),dealWithData:function(t){var e=this;t.forEach((function(t,a){e.WithData=e.WithData+String.fromCharCode(t)})),e.scanMsg="串口传入数据："+e.WithData+"\n"+e.scanMsg,e.WithData=e.lastData+e.WithData;var a=v(e.optionValue,e.WithData),i=a.withData,r=a.lastData;"number"==typeof i?(i=e.optionValue.iisSwapStr?Number(i.toString().split("").reverse().join("")):i,e.lastData=r,e.WithData="",e.billWt=i):(e.lastData=r,e.WithData=""),console.log(i)},websocketclose:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.reader.cancel(),this.keepReading=!1,console.log("断开连接");case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getLineTeam:function(){var t=this,e={iisAuto:this.radioValue,instructions:this.formData.coilCode};m["a"].post("/sPaper/sPaperOut/quickly/lineTeam",e).then((function(e){var a=e.line?e.line:{},i=a.lineCode,r=a.lineName,o=e.team?e.team:{},s=o.teamCode,n=o.teamCodeName;t.billStatus=e.spaperStatus?e.spaperStatus:"",t.formData=Object(d["a"])(Object(d["a"])({},t.formData),{},{lineCode:i,lineName:r,teamCode:s,teamName:n,coilCode:""}),t.coilMsg=""})).catch((function(e){t.coilMsg=e}))},checkInstructions:function(){var t=this.sysParams,e=t.SPaperBackFlagForBarCode,a=t.SPaperOutFlagForBarCode,i=this.formData.coilCode;return(-1!=i.indexOf(e)||-1!=i.indexOf(a))&&(this.getLineTeam(),!0)},getrightTableData:function(){var t=this,e=this.formData,a=e.coilCode,i=e.lostWt,r=e.lineCode,o=e.teamCode,s=e.optWorkerCode,n=e.lsrWorkerCode,d=this;if(a&&("0"!=this.radioValue||!this.checkInstructions())){this.mainTableData=[],this.formLoading=!0;var u={coilCode:a,lostWt:i,billWt:this.billWt,iisAuto:this.radioValue,iisOut:this.billStatus,lineCode:r,teamCode:o,optWorkerCode:s,lsrWorkerCode:n};m["a"].post("/sPaper/sPaperOut/quickly/spSpaperScanOutBack",u).then((function(t){var e=Object(c["a"])(t.list,3),a=Object(c["a"])(e[0],1),i=a[0].billStatus,r=(e[1],e[2]);d.billStatus=i,i?(d.firstTableData=0==d.firstTableData.length?r:[].concat(Object(l["a"])(r),Object(l["a"])(d["firstTableData"])),d.coilMsg="出仓成功",d.tabsChange("tab1")):(d.secondTableData=0==d.secondTableData.length?r:[].concat(Object(l["a"])(r),Object(l["a"])(d["secondTableData"])),d.coilMsg="退仓成功",d.tabsChange("tab2")),d.formData.coilCode="",d.formLoading=!1})).catch((function(e){d.billStatus="",t.coilMsg=e,t.formLoading=!1}))}},firstCellClick:function(t){this.getMainTableData_debounce(t)},secondCellClick:function(t){this.getMainTableData_debounce(t)},getMainTableData:function(t){var e=this;this.selectTableRow=t.row;var a=t.row,i=(a.spaperWidth,a.billStatus),r=a.pid,o=this;this.formLoading=!0,m["a"].post("/proc/spaper/list/spSpaperScanGetPlan",{pppWidth:200,billStatus:i,id:r}).then((function(t){var a=Object(c["a"])(t.list,2),i=Object(c["a"])(a[0],1),r=i[0],s=a[1];o.mainTableData=s,o.formData=Object(d["a"])(Object(d["a"])({},o.formData),r),e.getpppNoList(),e.formLoading=!1})).catch((function(t){e.formLoading=!1}))},getpppNoList:function(){var t=this;this.pppNoList=[],this.mainTableData.forEach((function(e){t.pppNoList.push({value:e.pppNo})}))},submitEvent:function(){var t=this,e=this.formData,a=e.lineCode,i=e.teamCode,r=e.optWorkerCode,o=e.lsrWorkerCode,s=e.pppNo,n=e.macCode,l=e.billCode,c=e.billDate,d=e.id,u=this.billStatus,f=this.selectTableRow.pid,p={lineCode:a,teamCode:i,ctrCode:r,lsrCode:o,pppNo:s,macCode:n,billDate:c,id:d,pid:f,billStatus:u,billNo:l};this.formLoading=!0,m["a"].post("/proc/spaper/list/spSpaperScanSave",p).then((function(e){t.$XModal.message({message:"保存成功",status:"success"}),t.formLoading=!1})).catch((function(e){t.formLoading=!1}))},closeEvent:function(){this.firstTableData=[],this.secondTableData=[],this.mainTableData=[],this.billWt=0,this.scanMsg="",this.coilMsg="",this.optionValue="",this.formData=f()(x),this.port=null,this.reader=null,this.keepReading=!0,this.lastData="",this.WithData="",this.billStatus=null,this.selectTableRow={},this.selectTab="tab1",this.radioValue="1",this.pppNoList=[],this.$emit("closeEvent")},popupChange:function(t){var e=this,a=t.matchField,i=Object.keys(a);i&&i.forEach((function(t){!e.formData[t]&&e.formData[t]||(e.formData[t]=a[t])}))},tabsChange:function(t){this.selectTab=t;var e=this.$refs.firstTable.$refs.originListTalbe,a=this.$refs.mainTable.$refs.originListTalbe;"tab2"==t&&(e=this.$refs.secondTable.$refs.originListTalbe),this.$nextTick((function(){e.refreshColumn().then((function(){return e.refreshScroll()})),a.refreshColumn().then((function(){return e.refreshScroll()}))}))},radioChange:function(t){"0"==t.label&&(this.billStatus="",this.coilMsg="")}}},W=S,O=(a("af0a"),a("a320"),a("5d22")),F=Object(O["a"])(W,s,n,!1,null,"b6367fba",null),M=F.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{remember:"",fullscreen:"",title:t.title,subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showEditBox,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[a("nvxe-edit-grid",{ref:"firstTable",attrs:{isMainTable:!0,"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData},on:{"edit-closed":t.editClosedEvent,"cell-click":t.cellClickEvent}})],1)]},proxy:!0}])})],1)])},P=[],B=(a("1d43"),a("cb39")),R=a("bf8c"),I={mapList:{sPaperOutItems:"firstTable"}},$={name:"edit-sPaperOut",mixins:[R["a"]],components:{formItemRender:B["a"],tabsTool:g["a"]},provide:function(){var t=this;return{getPopupModalConfig:function(){return t.popupModalConfig}}},data:function(){return{editBoxFormHeight:80,requstConfig:{modulePreUrl:"/sPaper/sPaperOut",mainFormName:"spaperoutFm",tab1FormName:"spaperoutitemFm"},popupModalConfig:{firstTable:{title:"原纸出库列表",mainFormName:"spSpaperOutPopFm",fieldName:"coilCode",requstTab1Config:{isStoredProcedure:!0,modulePreUrl:"/proc/prod/page/spSpaperOutPop",filterName:"coilCode",params:{},subformName:"spSpaperOutPopItemFm"}}}}},methods:{iisDelActionEvent:function(){var t=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.firstFormDataMaster["sumCoilQty"]=t.length,this.getMasterField("outWt",t,"sumWt")},rewriteInsertEvent:function(){var t=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.firstFormDataMaster["sumCoilQty"]=t.length,t[t.length-1]["outDate"]=b()().format("YYYY-MM-DD HH:mm:ss")},popupModalDataResEvent:function(t,e){var a=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.getMasterField("outWt",a,"sumWt"),this.firstFormDataMaster["sumCoilQty"]=a.length},editClosedEvent:function(t){var e=t.column,a=(t.$rowIndex,this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData),i=this;switch(e.property){case"outWt":i.getMasterField("outWt",a,"sumWt");break;default:break}},cellClickEvent:function(t){t.column.editRender&&"popupModal"==t.column.editRender.name&&this.setFirstTableFilterList()},setFirstTableFilterList:function(){try{var t=this.$refs["firstTable"].$refs["originEditTalbe"];if(t){var e=t.getTableData().tableData,a="",i=this.popupModalConfig.firstTable.requstTab1Config.filterName;e.forEach((function(t){t[i]&&(""==a?a=t[i]:a+=","+t[i])})),this.popupModalConfig.firstTable.requstTab1Config.params.filterList=a}}catch(r){console.warn("====setFirstTableFilterList=====")}},closeWindowAction:function(){this.firstFormDataMaster=f()(this.formDefaultDataObj),this.setTableDefaultData(I,[])},setDefaultValue:function(t){t.master?(this.firstFormData=Object.assign({},I),this.firstFormDataMaster=f()(t.master),this.setTableDefaultData(I,t)):(this.firstFormData=Object.assign({},I),this.firstFormDataMaster=f()(t),this.setTableDefaultData(I,[]))}}},V=$,E=(a("f1fe"),Object(O["a"])(V,L,P,!1,null,"8aa1e804",null)),j=E.exports,_=a("2ddf"),q=a("0e4a"),H={name:"sPaperOut",components:{editBox:j,tabsTool:g["a"],bodyContentDownItem:q["a"],spaperWebsocket:M},data:function(){return{requstConfig:{modulePreUrl:"/sPaper/sPaperOut",mainFormName:"spaperoutFm",tab1FormName:"spaperoutitemFm"},Websocket:!1,weigHingModel:!1,weighData:[]}},mixins:[h["a"],_["a"]],methods:{extBtnFunction:function(t){switch(t){case"sPaperSimpleScanFn":this.sPaperSimpleScanFn();break;default:break}},sPaperSimpleScanFn:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getSerialData();case 2:this.Websocket=!0;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSerialData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.request.post("/basic/serial/list");case 2:e=t.sent,this.weighData=e.length?e:[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sPaperSerial:function(){if(this.weighData.hasOwnProperty("startStr")){var t=this.weighData,e=t.startStr,a=t.endStr,i=t.validDataLen;return!!(e&&a||e&&i||a&&i)||(this.$XModal.message({message:"请先设置地磅参数",status:"error"}),!1)}return this.$XModal.message({message:"请先设置地磅参数",status:"error"}),!1}}},z=H,U=(a("f3e5"),Object(O["a"])(z,i,r,!1,null,"46cb8a64",null));e["default"]=U.exports},"79dc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsButtonListBox"},[a("div",{staticClass:"tabsButtonListItem leftItem"},[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,i){return[a("vxe-radio-button",{key:i,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(a){return t.selectTabClick(e.key)}}})]}))],2)],1),a("div",{staticClass:"tabsButtonListItem rightItem"})])},r=[],o={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},s=(a("5180"),{name:"tabs-formList",mixins:[o],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],a=this.$store.state.app.currentRouterName;if("sysFrom"!=a&&""!=a){var i=this.$store.state.app.tableColumnsInfo;if(i[a]){for(var r in i[a].listView)if("2"===i[a].listView[r].tableType){var o=i[a].listView[r].tableDesc,s=i[a].listView[r].formSort,n=i[a].listView[r].formSort;e.push({key:"tab"+s,value:o,formSort:n})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),n=s,l=(a("e551"),a("5d22")),c=Object(l["a"])(n,i,r,!1,null,"19af0b3a",null);e["a"]=c.exports},"90f8":function(t,e,a){},a320:function(t,e,a){"use strict";a("90f8")},af0a:function(t,e,a){"use strict";a("2043")},c294:function(t,e,a){},e551:function(t,e,a){"use strict";a("0ee7")},f1fe:function(t,e,a){"use strict";a("038c")},f3e5:function(t,e,a){"use strict";a("1d82")}}]);