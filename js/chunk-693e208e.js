(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-693e208e"],{"0e4a":function(o,t,e){"use strict";var n=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{class:"column"===o.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[o.$slots.part1?e("div",{staticClass:"bodyContentDownItem",style:{width:o.config.windowOffsetWidth+"px"}},[o._t("part1",[o._v("part1")])],2):o._e(),o.$slots.part2?e("div",{staticClass:"bodyContentDownItem",style:{width:o.config.windowOffsetWidth+"px"}},[o._t("part2",[o._v("part2")])],2):o._e(),o.$slots.part3?e("div",{staticClass:"bodyContentDownItem",style:{width:o.config.windowOffsetWidth+"px"}},[o._t("part3",[o._v("part3")])],2):o._e()])},i=[],s={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},a=s,l=(e("33bc"),e("5d22")),r=Object(l["a"])(a,n,i,!1,null,"550d1612",null);t["a"]=r.exports},"33bc":function(o,t,e){"use strict";e("c294")},7110:function(o,t,e){},8674:function(o,t,e){"use strict";e("7110")},b72f:function(o,t,e){"use strict";e.r(t);var n=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"bodyContentBox"},[e("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[e("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:o.windowOffsetHeight,windowOffsetWidth:o.windowOffsetWidth}},scopedSlots:o._u([{key:"part1",fn:function(){return[e("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,operationColumnShow:!0,loading:o.listLoading,height:o.windowOffsetHeight,columnsFormName:o.requstConfig.mainFormName,dataUrl:o.requstConfig.modulePreUrl+"/"+o.mainPageSearchType},scopedSlots:o._u([{key:"operate",fn:function(t){var n=t.row;return[e("div",{staticClass:"operationBox"},[e("div",{staticClass:"operationItem",on:{click:function(t){return o.operateBtnEmitRowEvent("flowInfoRowEvent",n)}}},[e("i",{staticClass:"el-icon-document"}),o._v(" "),e("span",[o._v("流程信息")])]),e("div",{staticClass:"operationItem",on:{click:function(t){return o.operateBtnEmitRowEvent("onoffProRowEvent",n)}}},[1==n.SUSPENSION_STATE_?[e("i",{staticClass:"el-icon-video-pause",staticStyle:{color:"red"}}),o._v(" "),e("span",[o._v("禁用")])]:[e("i",{staticClass:"el-icon-video-play",staticStyle:{color:"green"}}),o._v(" "),e("span",[o._v("启用")])]],2)])]}}])})]},proxy:!0}])})],1),e("nvxe-modal",{attrs:{title:"委派对象",subTitle:"",showZoom:!1,width:350,height:180,loading:!1},on:{confirm:function(t){return o.submitAppointEvent()}},model:{value:o.showAppointBox,callback:function(t){o.showAppointBox=t},expression:"showAppointBox"}},[e("div",{staticClass:"appointSomeoneBox"},[e("div",{staticClass:"appointSomeoneItem oneItem"},[e("popUpPullDown",{ref:"popUpPullDownRef",attrs:{returnSelectedRow:!0,placeholder:"委派对象",disabled:!0,size:"medium",matchField:o.popUpPullDownConfig.editRender.matchField,currentValue:o.appointSomeoneValue,field:o.popUpPullDownConfig.field,paramsItem:o.popUpPullDownConfig},on:{popupChange:o.popupChange}})],1),e("div",{staticClass:"appointSomeoneItem twoItem"},[e("vxe-button",{attrs:{content:"用户"},on:{click:function(t){return o.loadUserData()}}})],1),e("div",{staticClass:"appointSomeoneItem threeItem"},[e("vxe-button",{attrs:{content:"角色"},on:{click:function(t){return o.loadRoleData()}}})],1)])]),e("nvxe-modal",{attrs:{showZoom:!1,title:"要作废此流程吗?",subTitle:"",width:400,height:200,loading:!1},on:{confirm:function(t){return o.submitDisableFlowEvent()}},model:{value:o.showDisableFlowBox,callback:function(t){o.showDisableFlowBox=t},expression:"showDisableFlowBox"}},[e("div",{staticStyle:{overflow:"hidden"}},[e("vxe-textarea",{ref:"inputRef",attrs:{autosize:{minRows:3,maxRows:3},placeholder:"作废理由",resize:"none"},model:{value:o.disableFlowReason,callback:function(t){o.disableFlowReason=t},expression:"disableFlowReason"}})],1)]),e("nvxe-modal",{attrs:{title:"流程信息",subTitle:"",loading:o.loadingFlow,hideSubmitBtn:!0},model:{value:o.showFlowInfoBox,callback:function(t){o.showFlowInfoBox=t},expression:"showFlowInfoBox"}},[e("div",[e("vxe-radio-group",{model:{value:o.flowInfoType,callback:function(t){o.flowInfoType=t},expression:"flowInfoType"}},[e("vxe-radio-button",{attrs:{label:"1",content:"流程图"}}),e("vxe-radio-button",{attrs:{label:"2",content:"审批流程"}}),e("vxe-radio-button",{attrs:{label:"3",content:"申请详情"}})],1),e("div",{staticClass:"flowInfoTypeBox"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"1"==o.flowInfoType,expression:"flowInfoType=='1'"}],staticClass:"flowInfoTypeItem",staticStyle:{height:"350px",overflow:"auto"}},[o.base64ImgStr?e("img",{attrs:{src:o.base64ImgStr,alt:"图片未上传"}}):o._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:"2"==o.flowInfoType,expression:"flowInfoType=='2'"}],staticClass:"flowInfoTypeItem"},[e("nvxe-grid",{ref:"applicationItems",attrs:{"sync-resize":o.flowInfoType,toolbarConfigShow:!1,height:350,columnsFormName:"actprochiinfoFm"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"3"==o.flowInfoType,expression:"flowInfoType=='3'"}],staticClass:"flowInfoTypeItem"},[e("flowInfoBox",{attrs:{dataList:o.resDataList,showFlowInfoBox:o.showFlowInfoBox}})],1)])],1)])],1)},i=[],s=(e("c22d"),e("9b5f"),e("5213")),a=e("f3f3"),l=e("1b62"),r=e("2ddf"),p=e("0e4a"),f={name:"bpmnBeans",components:{flowInfoBox:s["a"],bodyContentDownItem:p["a"],popUpPullDown:a["a"]},provide:function(){var o=this;return{getPopupConfig:function(){return o.popupConfig}}},data:function(){return{resDataList:[],loadingFlow:!1,popupConfig:{},popUpPullDownConfig:{field:"appointSomeoneValue",editRender:{defaultText:"",defaultValue:"",matchField:"appointSomeoneValue",name:"popup",sourceKey:"bpmnActInstUserBox"}},loadDataType:"user",appointSomeoneValue:"",flowInfoType:"1",showFlowInfoBox:!1,showAppointBox:!1,showDisableFlowBox:!1,disableFlowReason:"",base64ImgStr:"",centerBtnConfig:{iisEnable:!1,iisAdd:!1,iisEdit:!1,iisDisabled:!1,iisAudit:!1,iisNotAudit:!1,iisPrint:!1},tableDataConfig:{operationColumn:[{showOverflow:!0,fixed:"right",slots:{default:"operate"},visible:!0,title:"操作",headerAlign:"center",align:"center",width:140}]},requstConfig:{modulePreUrl:"/bpmn/ruprocdef",mainFormName:"actruprocdefFm"}}},computed:{tableColumnsInfo:function(){return this.$store.getters.tableColumnsInfo_getter}},watch:{showAppointBox:function(o,t){o||(this.appointSomeoneValue="")},showDisableFlowBox:function(o,t){o||(this.disableFlowReason="")},showFlowInfoBox:function(o,t){o||(this.flowInfoType="1",this.base64ImgStr="")}},mixins:[l["a"],r["a"]],methods:{popupChange:function(o){"user"==this.loadDataType?this.appointSomeoneValue=o.row.userCode:this.appointSomeoneValue=o.row.roleName},loadUserData:function(){this.loadDataType="user",this.popUpPullDownConfig.editRender.sourceKey="bpmnActInstUserBox";var o=this.$refs["popUpPullDownRef"];o&&o.inputFocusEvent()},loadRoleData:function(){this.loadDataType="role",this.popUpPullDownConfig.editRender.sourceKey="bpmnActInstRoleBox";var o=this.$refs["popUpPullDownRef"];o&&o.inputFocusEvent()},operateBtnEmitRowEvent:function(o,t){switch(o){case"flowInfoRowEvent":this.flowInfoRowEvent(t);break;case"appointRowEvent":this.appointRowEvent(t);break;case"onoffProRowEvent":this.onoffProRowEvent(t);break;default:break}},flowInfoRowEvent:function(o){var t=this;this.showFlowInfoBox=!0,this.loadingFlow=!0;var e="/bpmn/rutask/getHandleData",n={procInstId:o.PROC_INST_ID_,fileName:o.DGRM_RESOURCE_NAME_};this.request.post(e,n).then((function(o){t.loadingFlow=!1,t.base64ImgStr=o.imgSrc;var e=t.$refs["applicationItems"].$refs["originListTalbe"];e&&e.reloadData(o.hitaskList),t.resDataList=o.varList}))},submitAppointEvent:function(){var o=this;if(""!=this.appointSomeoneValue){var t="/bpmn/ruprocdef/delegate",e={id:this.currentSelectRowItem.row.ID_,assignee:this.appointSomeoneValue};this.request.update(t,e).then((function(t){o.showAppointBox=!1,o.search()}))}else this.$XModal.message({message:"请选择委派对象！",status:"error"})},appointRowEvent:function(o){this.showAppointBox=!0},onoffProRowEvent:function(o){var t=this,e="/bpmn/ruprocdef/onoffTask",n={id:o.ID_,status:o.SUSPENSION_STATE_};this.request.update(e,n).then((function(o){t.search()}))},iisDelAction:function(){this.showDisableFlowBox=!0},submitDisableFlowEvent:function(){if(""!=this.disableFlowReason){var o=this,t=this.currentSelectRowItem.row.PROC_INST_ID_,e="/bpmn/ruprocdef/delete",n={procInstId:t,reason:this.disableFlowReason};this.request["update"](e,n).then((function(t){o.showDisableFlowBox=!1,o.search()}))}else this.$XModal.message({message:"请输入作废理由！",status:"error"})}}},c=f,u=(e("8674"),e("5d22")),d=Object(u["a"])(c,n,i,!1,null,"0e5030e4",null);t["default"]=d.exports},c294:function(o,t,e){}}]);