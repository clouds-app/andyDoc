(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70c6eca3"],{2283:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bodyContentBox"},[a("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[a("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:e.listLoading,height:.6*e.windowOffsetHeight,columnsFormName:e.requstConfig.mainFormName,dataUrl:e.requstConfig.modulePreUrl+"/"+e.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===e.selectTab,expression:"selectTab==='tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/sale/paperArtPrice/paperArtPriceItem/list",params:{pid:e.currentSelectRowItem.row.id,updateFlag:e.updateFlag},height:.4*e.windowOffsetHeight,columnsFormName:e.requstConfig.tab1FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:e.selectTab},on:{tabsChange:e.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),a("editBox",{ref:"editBox",on:{submitSuccess:e.submitSuccess}}),a("paperArtPriceCopyFn",{ref:"paperCopy",attrs:{title:e.title},on:{submitSuccess:e.submitSuccess}}),a("aatchDeleteFn",{ref:"delFn",attrs:{title:e.title},on:{submitSuccess:e.submitSuccess}})],1)},s=[],i=(a("c22d"),a("9b5f"),a("2f92")),o=a("c23f"),n=a("79dc"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nvxe-modal",{attrs:{resize:"",remember:"",fullscreen:"",title:e.title,width:"80%",height:"88%",subTitle:e.subTitle,loading:e.vxeModalLoading},on:{confirm:function(t){return e.submitEvent()}},model:{value:e.showEditBox,callback:function(t){e.showEditBox=t},expression:"showEditBox"}},[a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:e.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{showEditBox:e.showEditBox,formValueChangeRes:e.formValueChangeRes,firstFormRules:e.requiredRule[e.requstConfig.mainFormName],firstFormData:e.firstFormDataMaster,mainFormName:e.requstConfig.mainFormName,formItemList:e.formItemList},on:{formItemValueEvent:e.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[a("tabsTool",{attrs:{currentTab:e.selectTab},on:{tabsChange:e.tabsChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==e.selectTab,expression:"selectTab == 'tab1'"}]},[a("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":e.requiredRule[e.requstConfig.tab1FormName],height:e.windowOffsetHeight-e.defaultBorderHeight-e.editBoxFormHeight-e.tabHeight,columnsFormName:e.requstConfig.tab1FormName,data:e.firstTableData},on:{"edit-closed":e.editClosedEvent}})],1)]},proxy:!0}])})],1)])},l=[],f=(a("5d08"),a("529f"),a("24a8"),a("3337"),a("cb39")),u=a("5180"),m=a.n(u),d=(a("1472"),a("bf8c")),p=a("6b6c"),h={mapList:{artPriceItems:"firstTable"}},b={name:"edit-paperArtPriceJK",mixins:[d["a"]],components:{formItemRender:f["a"],tabsTool:n["a"]},data:function(){var e=this;return{cumulativeField:{indexNo:10},editBoxFormHeight:80,requstConfig:{modulePreUrl:"/sale/paperArtPrice",mainFormName:"salepaperartpricejkFm",tab1FormName:"salepaperartpriceitemjkFm"},popupConfig:{artCode:{getshowPopUpDown:function(){return e.getshowPopUpBox({field:"custName"})}}}}},methods:{closeWindowAction:function(){this.firstFormDataMaster=m()(this.formDefaultDataObj),this.setTableDefaultData(h,[])},setDefaultValue:function(e){if(e.master)this.firstFormData=Object.assign({},h),this.firstFormDataMaster=m()(e.master),this.setTableDefaultData(h,e);else{e.returnDate="";var t=this.$store.getters.loginUserInfo_getter;e.priceUnit=t.sysParams.PaperMeasure,"1"==e.priceUnit?e.priceUnitText="1:公制(平方米)":e.priceUnitText="0:英制(千平方英寸)",this.firstFormData=Object.assign({},h),this.firstFormDataMaster=m()(e),this.setTableDefaultData(h,[])}},popUpTableChange:function(e){var t=this;setTimeout((function(){var a=t.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData,r=!1;if(1!=a.length){var s=a.slice(0,a.length-1);r=s.some((function(e){return a[a.length-1].artCode===e.artCode}))}if(r)t.$XModal.message({message:"纸质编号相同了",status:"error"}),a[e.tableInfo.$rowIndex].artCode="",a[e.tableInfo.$rowIndex].holeName="";else{var i="/sale/paperArtPrice/getCostPrice",o={artCode:e.resParams.matchField.artCode};p["a"]["post"](i,o).then((function(r){a[e.tableInfo.$rowIndex].costPrice=r,"0"==t.firstFormDataMaster.priceUnit?a[e.tableInfo.$rowIndex].newPrice=parseFloat((Number(r)/1.55).toFixed(4)):a[e.tableInfo.$rowIndex].newPrice=r,e.tableInfo.row.spaperRate=parseFloat((Number(e.tableInfo.row.costPrice)/Number(e.tableInfo.row.newPrice)).toFixed(4))}))}}),500)},selectChange:function(e){var t=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;"0"==e.value?t.map((function(e){e.newPrice=parseFloat((Number(e.costPrice)/1.55).toFixed(4))})):t.map((function(e){e.newPrice=e.costPrice}))},popupChange:function(e){var t=this;if(e.matchField){var a="/sale/paperArtPrice/checkCustomer",r={custCode:e.matchField.custCode,effectiveDate:this.firstFormDataMaster.effectiveDate,kbType:1};p["a"]["post"](a,r).then((function(e){null!=e&&(t.firstFormDataMaster.custName="",t.$XModal.message({message:e,status:"error"}))}))}},editClosedEvent:function(e){var t=e.column,a=(e.$rowIndex,e.row);switch(t.property){case"newPrice":a.spaperRate=parseFloat((Number(a.costPrice)/Number(a.newPrice)).toFixed(4));break;default:break}}}},g=b,w=(a("d970"),a("5d22")),F=Object(w["a"])(g,c,l,!1,null,"4843a13b",null),x=F.exports,v=a("1b62"),C=a("2ddf"),P=a("0e4a"),T={name:"paperArtPriceJK",components:{editBox:x,tabsTool:n["a"],bodyContentDownItem:P["a"],paperArtPriceCopyFn:o["a"],aatchDeleteFn:i["a"]},data:function(){return{requstConfig:{modulePreUrl:"/sale/paperArtPrice",mainFormName:"salepaperartpricejkFm",tab1FormName:"salepaperartpriceitemjkFm"},searchParamsConfig:{kbType:1},title:"见坑报价复制"}},mixins:[v["a"],C["a"]],methods:{extBtnFunction:function(e){switch(e){case"copyFn":this.copyFn();break;case"passUrl":this.pass();break;case"delFn":this.delFn();break;default:break}},getRequest:function(){var e=this,t="/sale/paperArtPrice/returnPaperArtPrice?id="+this.currentSelectRowItem.rowid,a={};p["a"]["post"](t,a).then((function(t){e.search()}))},copyFn:function(){var e=this.$refs["paperCopy"];e&&(e.showPopupBox=!0)},delFn:function(){var e=this.$refs["delFn"];e&&(e.showPopupBox=!0)},pass:function(){var e=this;this.currentSelectRowItem.row.iisReturn?this.$XModal.confirm({status:"warning",message:this.$t("app.errMessage.sureToNoPassItem",{msg:""})}).then((function(t){"confirm"===t&&e.getRequest()})):this.$XModal.confirm({status:"warning",message:this.$t("app.errMessage.sureToPassItem",{msg:""})}).then((function(t){"confirm"===t&&e.getRequest()}))}}},D=T,I=(a("cf3c"),Object(w["a"])(D,r,s,!1,null,"5aadb718",null));t["default"]=I.exports},2396:function(e,t,a){},"761c":function(e,t,a){},cf3c:function(e,t,a){"use strict";a("2396")},d970:function(e,t,a){"use strict";a("761c")}}]);