(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72e37633"],{"0c1e":function(e,t,i){"use strict";i("3d87")},"0e4a":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"column"===e.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[e.$slots.part1?i("div",{staticClass:"bodyContentDownItem",style:{width:e.config.windowOffsetWidth+"px"}},[e._t("part1",[e._v("part1")])],2):e._e(),e.$slots.part2?i("div",{staticClass:"bodyContentDownItem",style:{width:e.config.windowOffsetWidth+"px"}},[e._t("part2",[e._v("part2")])],2):e._e(),e.$slots.part3?i("div",{staticClass:"bodyContentDownItem",style:{width:e.config.windowOffsetWidth+"px"}},[e._t("part3",[e._v("part3")])],2):e._e()])},l=[],r={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},n=r,s=(i("33bc"),i("5d22")),d=Object(s["a"])(n,a,l,!1,null,"550d1612",null);t["a"]=d.exports},"0ee7":function(e,t,i){},"33bc":function(e,t,i){"use strict";i("c294")},"3d87":function(e,t,i){},"6ae5":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bodyContentBox"},[i("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[i("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[i("nvxe-grid",{ref:"mainTable",attrs:{toolbarConfigShow:!0,isMainTable:!0,name:"formList_firstTable",height:.6*e.windowOffsetHeight,columns:e.firstTableColumn,dataUrl:"/sys/table/page"}})]},proxy:!0},{key:"part2",fn:function(){return[i("vxe-radio-group",{attrs:{size:"mini"},model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[i("tabsTool",{attrs:{defaulttabList:e.defaulttabList,currentTab:e.selectTab},on:{tabsChange:e.tabsChange}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===e.selectTab,expression:"selectTab === 'tab1'"}]},[i("nvxe-grid",{ref:"firstTable",attrs:{"sync-resize":e.selectTab,toolbarConfigShow:!1,params:{tableId:e.currentSelectRowItem.row.id,updateFlag:e.updateFlag},dataUrl:"/sys/table/tableField/list",name:"secondTable",height:.4*(e.windowOffsetHeight-70),columns:e.secondTableColumn}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab2"===e.selectTab,expression:"selectTab === 'tab2'"}]},[i("nvxe-grid",{ref:"secondTable",attrs:{"sync-resize":e.selectTab,toolbarConfigShow:!1,dataUrl:"/sys/table/tablePage/list",params:{tableId:e.currentSelectRowItem.row.id,updateFlag:e.updateFlag},name:"formList_thirdTable",height:.4*(e.windowOffsetHeight-70),columns:e.thirdTableColumn}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab3"===e.selectTab,expression:"selectTab === 'tab3'"}]},[i("nvxe-grid",{ref:"thirdTable",attrs:{"sync-resize":e.selectTab,toolbarConfigShow:!1,dataUrl:"/sys/table/tableForeign/list",params:{tableId:e.currentSelectRowItem.row.id,updateFlag:e.updateFlag},name:"formList_fourthTable",height:.4*(e.windowOffsetHeight-70),columns:e.fourthTableColumn}})],1)]},proxy:!0}])})],1),i("editBox",{ref:"editBox",on:{submitSuccess:e.submitSuccess}})],1)},l=[],r=i("79dc"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nvxe-modal",{attrs:{remember:"",fullscreen:"",title:e.title,subTitle:e.subTitle,loading:e.vxeModalLoading},on:{confirm:function(t){return e.submitEvent()}},scopedSlots:e._u([{key:"footerExt",fn:function(){return[i("vxe-button",{attrs:{loading:e.syncLoading,status:"primary",content:"数据库同步到单页面属性"},on:{click:function(t){return e.syncData()}}})]},proxy:!0}]),model:{value:e.showEditBox,callback:function(t){e.showEditBox=t},expression:"showEditBox"}},[i("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[i("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:e.windowOffsetHeight,windowOffsetWidth:e.windowOffsetWidth}},scopedSlots:e._u([{key:"part1",fn:function(){return[i("div",{staticStyle:{overflow:"auto"},style:{height:e.editBoxFormHeight+"px"}},[i("vxe-form",{ref:"firstForm",attrs:{rules:e.firstFormRules,size:"mini","title-align":"right","title-width":"70",data:e.firstFormData.master}},[i("vxe-form-item",{attrs:{title:"表名",field:"tableName"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{transfer:!0,placeholder:"表名",clearable:""},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.tableName,callback:function(t){e.$set(e.firstFormData.master,"tableName",t)},expression:"firstFormData.master.tableName"}})]}}])}),i("vxe-form-item",{attrs:{title:"说明",field:"tableDesc"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{placeholder:"说明"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.tableDesc,callback:function(t){e.$set(e.firstFormData.master,"tableDesc",t)},expression:"firstFormData.master.tableDesc"}})]}}])}),i("vxe-form-item",{attrs:{title:"表单名",field:"formName"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{placeholder:"表单名"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.formName,callback:function(t){e.$set(e.firstFormData.master,"formName",t)},expression:"firstFormData.master.formName"}})]}}])}),i("vxe-form-item",{attrs:{title:"排序字段",field:"orderFields"}},[i("vxe-input",{attrs:{placeholder:"排序字段"},on:{input:function(t){return e.inputChange(e.scope)}},model:{value:e.firstFormData.master.orderFields,callback:function(t){e.$set(e.firstFormData.master,"orderFields",t)},expression:"firstFormData.master.orderFields"}})],1),i("vxe-form-item",{attrs:{title:"表类型",field:"tableType"}},[i("vxe-select",{attrs:{options:e.tableTypeOption,transfer:!0,placeholder:"请选择性别",clearable:""},on:{change:function(t){return e.settableList()}},model:{value:e.firstFormData.master.tableType,callback:function(t){e.$set(e.firstFormData.master,"tableType",t)},expression:"firstFormData.master.tableType"}})],1),i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.firstFormData.master.tableType,expression:"firstFormData.master.tableType == '2'"}],attrs:{title:"主表名称",field:"parentForm"}},[i("vxe-pulldown",{ref:"xDown2",attrs:{transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[i("vxe-input",{attrs:{placeholder:"可搜索的下拉框"},on:{focus:e.focusEvent,keyup:e.keyupEvent},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0},{key:"dropdown",fn:function(){return[i("vxe-list",{staticClass:"my-dropdown2",attrs:{height:"200",data:e.list,"auto-resize":"",transfer:!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.items;return e._l(a,(function(t){return i("div",{key:t.value,staticClass:"list-item2",on:{click:function(i){return e.selectEvent(t)}}},[i("i",{staticClass:"fa fa-envelope-o"}),i("span",[e._v(e._s(t.label))])])}))}}])})]},proxy:!0}])})],1),i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.firstFormData.master.tableType,expression:"firstFormData.master.tableType == '2'"}],attrs:{title:"子表顺序",field:"formSort"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{type:"integer",placeholder:"子表顺序"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.formSort,callback:function(t){e.$set(e.firstFormData.master,"formSort",t)},expression:"firstFormData.master.formSort"}})]}}])}),i("vxe-form-item",{attrs:{title:"页大小",field:"pageSize"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{type:"integer",placeholder:"页大小"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.pageSize,callback:function(t){e.$set(e.firstFormData.master,"pageSize",t)},expression:"firstFormData.master.pageSize"}})]}}])}),i("vxe-form-item",{attrs:{title:"描述-英文",field:"tableEnDesc"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{placeholder:"描述-英文"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.tableEnDesc,callback:function(t){e.$set(e.firstFormData.master,"tableEnDesc",t)},expression:"firstFormData.master.tableEnDesc"}})]}}])}),i("vxe-form-item",{attrs:{title:"描述-其他",field:"tableOtherDesc"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{placeholder:"描述-其他"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.tableOtherDesc,callback:function(t){e.$set(e.firstFormData.master,"tableOtherDesc",t)},expression:"firstFormData.master.tableOtherDesc"}})]}}])}),i("vxe-form-item",{attrs:{title:"DTO属性",field:"dtoAttribute"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("vxe-input",{attrs:{placeholder:"与表单名称不一致时配置"},on:{input:function(i){return e.inputChange(t)}},model:{value:e.firstFormData.master.dtoAttribute,callback:function(t){e.$set(e.firstFormData.master,"dtoAttribute",t)},expression:"firstFormData.master.dtoAttribute"}})]}}])}),i("vxe-form-item",{attrs:{title:"启用流程",field:"iisProcess"}},[i("vxe-checkbox",{model:{value:e.firstFormData.master.iisProcess,callback:function(t){e.$set(e.firstFormData.master,"iisProcess",t)},expression:"firstFormData.master.iisProcess"}})],1)],1)],1)]},proxy:!0},{key:"part2",fn:function(){return[i("vxe-radio-group",{attrs:{size:"mini"},model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[i("tabsTool",{attrs:{defaulttabList:e.defaulttabList,currentTab:e.selectTab},on:{tabsChange:e.tabsChange}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==e.selectTab,expression:"selectTab == 'tab1'"}]},[i("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":e.firstTableRules,height:e.windowOffsetHeight-e.defaultBorderHeight-e.editBoxFormHeight-e.tabHeight,columns:e.firstTableColumn,data:e.firstTableData}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab2"==e.selectTab,expression:"selectTab == 'tab2'"}]},[i("nvxe-edit-grid",{ref:"secondTable",attrs:{"edit-rules":e.secondTableRules,height:e.windowOffsetHeight-e.defaultBorderHeight-e.editBoxFormHeight-e.tabHeight,columns:e.secondTableColumn,data:e.secondTableData},on:{"cell-click":e.cellClickEvent}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"tab3"==e.selectTab,expression:"selectTab == 'tab3'"}]},[i("nvxe-edit-grid",{ref:"thirdTable",attrs:{"edit-rules":e.thirdTableRules,height:e.windowOffsetHeight-e.defaultBorderHeight-e.editBoxFormHeight-e.tabHeight,columns:e.thirdTableColumn,data:e.thirdTableData},on:{"cell-click":e.cellClickEvents}})],1)]},proxy:!0}])})],1)])},s=[],d=i("60b5"),o=i("58c8"),f=i("7dd6"),u=(i("6a61"),i("24a8"),i("fc13"),i("9b5f"),i("3337"),i("16ca"),i("e3b5"),i("1472"),i("bf8c")),c=i("5180"),m=i.n(c),h=i("da82"),b=void 0,p={master:{formName:"",formSort:0,orderDesc:!1,orderFields:"",pageSize:20,parentForm:"",parentTable:"",tableCreated:!1,tableDesc:"",tableName:"",tableType:"2",tableEnDesc:"",tableOtherDesc:""},tablePages:{addList:[],defaultList:[],deleteList:[],updateList:[]},tableFields:{addList:[],defaultList:[],deleteList:[],updateList:[]},tableForeigners:{addList:[],defaultList:[],deleteList:[],updateList:[]},mapList:{tablePages:"secondTable",tableFields:"firstTable",tableForeigners:"thirdTable"}},w={name:"edit-formList",mixins:[u["a"]],components:{tabsTool:r["a"]},getPopupConfig:function(){return b.popupConfig},data:function(){var e,t,i=this;return{popupConfig:{masterTableField:{id:""}},masterTableNameId:"",defaulttabList:[{key:"tab1",value:"数据库属性"},{key:"tab2",value:"单页面属性"},{key:"tab3",value:"关联表信息"}],editBoxFormHeight:115,subTitle:"表单设置",requstConfig:{modulePreUrl:"/sys/table"},tableTypeOption:[{value:"0",label:"单表"},{value:"1",label:"主表"},{value:"2",label:"从表"}],firstFormData:m()(p),value:"",list:[],mainFormList:[],masterTableList:[],Options_colorPickerItem:{paramsItem:{},currentValue:"",field:"color",disabled:!1},firstFormRules:{tableName:[{required:!0,message:"请输入名称"}],tableDesc:[{required:!0,message:"请输入说明"}],formName:[{required:!0,message:"请输入表单名"}]},firstTableColumn:[{field:"fieldName",title:"列名",width:"120",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"fieldDesc",title:"说明",width:"120",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"fieldDataType",title:"数据类型",width:"90",editRender:{name:"$select",events:{change:function(e,t){return i.setFieldLength(e,t)}},options:h["c"],defaultValue:"sudCode"}},{field:"fieldLength",title:"数据长度",width:"100",align:"right",editRender:{name:"$input",autoselect:!0,defaultValue:20,props:{disabled:!0}}},{field:"fieldDefault",title:"默认值",width:"80",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"fieldPk",title:"主键",width:"68",align:"left",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"fieldNotNull",title:"不为空",width:"78",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"fieldOrder",title:"字段顺序",width:"90",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:10}},{field:"iisSync",title:"同步",width:"65",align:"center",editRender:{name:"disvxeCheckbox",defaultValue:!0}},{field:"iisLog",title:"记录日志",width:"90",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"iisBillNo",title:"单据编号",width:"90",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"iisBillDate",title:"单据日期",width:"90",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"iisSubBillNo",title:"子表单据编号",width:"110",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"id",title:"ID",width:"100",visible:!1},{field:"tableId",title:"系统表id",width:"100",visible:!1}],firstTableData:[],firstTableRules:{fieldName:[{required:!0,message:"列名不能为空"}],fieldDesc:[{required:!0,message:"说明不能为空"}]},secondTableRules:{},secondTableColumn:[{field:"fieldName",title:"字段名",width:"120",fixed:"left",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"fieldDesc",title:"描述-中文",width:"100",fixed:"left",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"virtual",title:"虚拟",width:"50",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"listShow",title:"列表显示",width:"80",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!0}},{field:"editShow",title:"编辑显示",align:"center",width:"80",editRender:{name:"vxeCheckbox",defaultValue:!0}},{field:"detailShow",title:"详情显示",align:"center",width:"80",editRender:{name:"vxeCheckbox",defaultValue:!0}},{field:"width",title:"列表宽",width:"70",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:100}},{field:"editWidth",title:"编辑宽",width:"70",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:100}},{field:"labelWidth",title:"标题宽度",width:"80",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:90}},{field:"fieldOrder",title:"字段顺序",width:"80",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:10}},{field:"editOrder",title:"编辑页字段顺序",width:"130",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:10}},{field:"iisRequired",title:"必填",width:"50",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"tooltip",title:"提示",width:"100",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1},visible:!1},{field:"titleAlign",title:"表头对齐",width:"80",editRender:{name:"$select",options:h["a"],defaultValue:"center"}},{field:"align",title:"表格对齐",width:"80",editRender:{name:"$select",options:h["a"],defaultValue:"left"}},{field:"query",title:"查询",align:"center",width:"50",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"fieldReadOnly",title:"只读",width:"50",align:"center",editRender:{name:"vxeCheckbox"}},{field:"controlType",title:"控件类型",width:"90",editRender:{name:"$select",options:h["b"],defaultValue:"text"}},{field:"sourceKey",title:"数据源key",width:"110",align:"left",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"matchField",title:"匹配字段",width:"110",align:"left",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"parentField",title:"上级字段",width:"100",editRender:{name:"$select",options:this.parentFieldList,defaultValue:""}},{field:"fieldFormat",title:"列格式化",width:"90",editRender:{name:"$select",options:h["e"],defaultValue:""}},{field:"color",title:"列颜色",width:"60",align:"center",editRender:{name:"colorPickerItem",options:this.Options_colorPickerItem,defaultValue:""}},{field:"iisMoney",title:"金额",width:"68",align:"center",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"titleGroup",title:"字段分类",width:"100",align:"center",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"sortable",title:"排序",align:"center",width:"68",editRender:{name:"vxeCheckbox",defaultValue:!1}},{field:"fieldEnDesc",title:"描述-英文",width:"100",editRender:(e={name:"input",autoselect:!0},Object(f["a"])(e,"autoselect",!0),Object(f["a"])(e,"defaultValue",""),e)},{field:"fieldOtherDesc",title:"描述-其他",width:"100",editRender:(t={name:"input",autoselect:!0},Object(f["a"])(t,"autoselect",!0),Object(f["a"])(t,"defaultValue",""),t)},{field:"id",title:"ID",width:"100",visible:!1}],secondTableData:[],thirdTableRules:{},thirdTableColumn:[{field:"fieldName",title:"外键字段",width:"100",editRender:{name:"input",autoselect:!0,defaultValue:""}},{field:"masterTableName",title:"关联主表名",width:"200",editRender:{name:"popUpPullDown",options:{currentValue:null,disabled:!1,field:"masterTableName",matchField:"id,masterTableName:tableName",paramsItem:{editRender:{defaultText:"",defaultValue:"",matchField:"id,masterTableName:tableName",name:"popup",sourceKey:"basicTableBox"}},selectType:"single"},defaultValue:null}},{field:"masterTableField",title:"关联主表列名",width:"110",editRender:{name:"popUpPullDown",options:{currentValue:null,disabled:!1,field:"masterTableField",matchField:"masterTableField:fieldName",paramsItem:{editRender:{defaultText:"",defaultValue:"",matchField:"masterTableField:fieldName",name:"popup",sourceKey:"basicTableFeildBox"}},selectType:"single"},defaultValue:null}},{field:"fieldOrder",title:"字段顺序",width:"100",align:"right",editRender:{name:"$input",autoselect:!0,props:{type:"number",min:1,max:99999},defaultValue:10}},{field:"id",title:"ID",width:"100",visible:!1,showOverflow:!0},{field:"tableId",title:"系统表id",visible:!1,width:"100"}],thirdTableData:[],parentFieldList:Object(o["a"])(h["f"]),dataTypeList:Object(o["a"])(h["c"]),defaultList:[{fieldName:"iisStatus",fieldDesc:"状态",fieldOrder:""},{fieldName:"createUser",fieldDesc:"创建人",fieldOrder:""},{fieldName:"createTime",fieldDesc:"创建时间",fieldOrder:""},{fieldName:"updateUser",fieldDesc:"修改人",fieldOrder:""},{fieldName:"updateTime",fieldDesc:"修改时间",fieldOrder:""},{fieldName:"iisAudit",fieldDesc:"审核状态",fieldOrder:""},{fieldName:"auditUser",fieldDesc:"审核人",fieldOrder:""},{fieldName:"auditTime",fieldDesc:"审核时间",fieldOrder:""}],isinsert:!0,syncLoading:!1}},mounted:function(){this.getmainFormList()},watch:{showEditBox:function(e,t){var i=this;e&&setTimeout((function(){i.getisinsert()}),1e3)}},methods:{cellClickEvents:function(e){"masterTableField"==e.column.property&&(this.popupConfig.masterTableField.id=e.row.id)},insertEvent:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var i,a,l,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.length>1&&void 0!==n[1]?n[1]:{},i=this,a=this.getdefaultRecord(),l=i.$refs[this.currentRefTableName].$refs["originEditTalbe"],!l){e.next=11;break}return null,Number(t)>0?l.getTableData().tableData[t]:t,e.next=9,l.insertAt(a,-1);case 9:r=e.sent,r.row;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getdefaultRecord:function(){var e;switch(this.selectTab){case"tab1":e="firstTable";break;case"tab2":e="secondTable";break;default:e="thirdTable";break}var t=this.$refs[e].getTableData().tableData,i={fieldOrder:""},a=t.length;return 0==a?{}:(i.fieldOrder=10*(a+1),i)},getisinsert:function(){var e=this.$store.state.app.currentOperationType.replace("_stop","");if("iisAdd"==e)this.isinsert=!0;else{if(this.value=this.firstFormData.master.parentTable,!this.firstFormData.master.tableName){var t=this;return void setTimeout((function(){t.getisinsert()}),300)}this.isinsert=!1,this.getparentList("secondTable","fieldDesc","fieldName","parentField")}},settableList:function(){var e=m()(this.defaultList),t=this.$refs.firstTable.getTableData().tableData.length;e.map((function(e,i){e.fieldOrder=10*(i+t+1)})),"2"!=this.firstFormData.master.tableType&&this.isinsert&&(this.$refs.firstTable.$refs.originEditTalbe.insertAt(e,-1),this.isinsert=!1)},syncData:function(){this.syncLoading=!0;var e=[],t=this.$refs.firstTable.getRecordset(),i=[].concat(Object(o["a"])(t.insertRecords),Object(o["a"])(t.updateRecords));i.map((function(t){t.iisSync&&e.push({fieldDesc:t.fieldDesc,fieldName:t.fieldName,fieldOrder:t.fieldOrder})})),this.$refs.secondTable.$refs.originEditTalbe.insertAt(e,-1),this.loadingData(),this.$XModal.message({message:"同步成功!!",status:"success"}),this.syncLoading=!1},loadingData:function(){var e=this.$refs.firstTable.getRecordset().insertRecords;e=e.map((function(e){e.iisSync&&(e.iisSync=!e.iisSync)}))},setFieldLength:function(e,t){this.dataTypeList.map((function(i){i.value==t.value&&(e.row.fieldLength=i.fieldLength)}))},setDefaultValue:function(e){this.firstFormData=Object.assign({},p),this.firstFormData=Object.assign({},this.firstFormData,e),this.setTableDefaultData(p,e)},closeWindowAction:function(){this.firstFormData=m()(p),this.setTableDefaultData(p,[]),this.isinsert=!0},cellClickEvent:function(e){e.row,e.rowIndex,e.$rowIndex;var t=e.column;e.columnIndex;"virtual"==t.property&&this.getparentList("secondTable","fieldDesc","fieldName","parentField")},getmainFormList:function(){var e=this;this.request.get("/sys/table/listSingleOrMasterForm").then((function(t){e.mainFormList=t})),this.request.get("sys/table/listTable").then((function(t){e.masterTableList=t}))},selectEvent:function(e){var t=this;this.value=e.label,this.firstFormData.master.parentTable=e.parentTable,this.firstFormData.master.parentForm=e.parentForm,this.$refs.xDown2.hidePanel().then((function(){t.list=JSON.parse(JSON.stringify(t.mainFormList))}))},keyupEvent:function(){var e=this.value;this.list=e?this.mainFormList.filter((function(t){return t.label.indexOf(e)>-1})):this.mainFormList},focusEvent:function(){this.list=JSON.parse(JSON.stringify(this.mainFormList)),this.$refs.xDown2.showPanel()},submitEvent:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,i,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,i=this.$refs["firstForm"],!i){e.next=20;break}return e.prev=3,e.next=6,i.validate();case 6:return e.sent,e.next=9,t.fullValidEvent("firstTable");case 9:return e.sent,e.next=12,t.getRecordset(t.firstFormData);case 12:a=e.sent,l="/sys/table/saveOrUpdateTable",t.request["update"](l,a).then((function(e){setTimeout((function(){t.showEditBox=!1}),1e3),t.$emit("submitSuccess")})),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),console.error("=======提交表单错误:edit-formList===========");case 20:case"end":return e.stop()}}),e,this,[[3,17]])})));function t(){return e.apply(this,arguments)}return t}()}},g=w,v=(i("8f8e"),i("5d22")),x=Object(v["a"])(g,n,s,!1,null,"0523f7bc",null),T=x.exports,D=i("1b62"),y=i("2ddf"),F=i("0e4a"),k={name:"formList",components:{editBox:T,bodyContentDownItem:F["a"],tabsTool:r["a"]},mixins:[D["a"],y["a"]],data:function(){return{defaulttabList:[{key:"tab1",value:"数据库属性"},{key:"tab2",value:"单页面属性"},{key:"tab3",value:"关联表信息"}],requstConfig:{modulePreUrl:"/sys/table",mainFormName:""},tableToolbar:{custom:!0,slots:{buttons:"toolbar_buttons"}},firstTableColumn:[{field:"id",title:"ID",width:"100",visible:!1},{field:"tableName",title:"表名",width:"120",filters:[{data:null}],filterRender:{name:"multipleFilterItem",cellRender:{name:"text"},itemType:"text"}},{field:"formName",title:"表单名",width:"120",filters:[{data:null}],filterRender:{name:"multipleFilterItem",cellRender:{name:"text"},itemType:"text"}},{field:"tableDesc",title:"描述",width:"120",filters:[{data:null}],filterRender:{name:"multipleFilterItem",cellRender:{name:"text"},itemType:"text"}},{field:"tableCreated",title:"创建表",width:"58",align:"center",cellRender:{name:"vxeCheckbox"}},{field:"parentTable",title:"父表名",width:"90"},{field:"parentForm",title:"父表单名",width:"100"},{field:"tableEnDesc",title:"描述-中文",width:"75"},{field:"tableOtherDesc",title:"描述-其他",width:"75"},{field:"pageSize",title:"分页",align:"right",width:"50"},{field:"orderFields",title:"排序字段",width:"80"},{field:"orderDesc",title:"降序",width:"46",align:"left",cellRender:{name:"vxeCheckbox"},visible:!1},{field:"createUser",title:"创建人",width:"60"},{field:"createTime",title:"创建时间",width:"90"},{field:"updateUser",title:"修改人",width:"60"},{field:"updateTime",title:"修改时间",width:"90"},{field:"formSort",title:"子表排序",width:"100",visible:!1},{field:"tableType",title:"表类型",width:"100",visible:!1}],secondTableColumn:[{field:"fieldName",title:"列名",width:"100",align:"center",headerAlign:"center"},{field:"fieldDesc",title:"注释",width:"100"},{field:"fieldDataType",title:"数据类型",width:"100"},{field:"fieldLength",title:"数据长度",align:"right",width:"80"},{field:"fieldDefault",title:"默认值",width:"80"},{field:"fieldPk",title:"主键",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"fieldNotNull",title:"不为空",align:"center",cellRender:{name:"vxeCheckbox"},width:"58"},{field:"fieldOrder",title:"字段顺序",align:"right",width:"70"},{field:"iisLog",title:"记录日志",width:"70",align:"center",cellRender:{name:"vxeCheckbox"}},{field:"iisBillNo",title:"单据编号",width:"70",align:"center",cellRender:{name:"vxeCheckbox"}},{field:"iisBillDate",title:"单据日期",width:"70",align:"center",cellRender:{name:"vxeCheckbox"}},{field:"iisSubBillNo",title:"子表单据编号",width:"95",align:"center",cellRender:{name:"vxeCheckbox"}},{field:"iisSync",title:"同步",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"createUser",title:"创建人",width:"60"},{field:"createTime",title:"创建时间",width:"100"},{field:"updateUser",title:"修改人",width:"60"},{field:"updateTime",title:"修改时间",width:"100"},{field:"id",title:"ID",width:"100",visible:!1},{field:"tableId",title:"系统表id",width:"100",visible:!1}],thirdTableColumn:[{field:"fieldName",title:"字段名",width:"100",align:"center",headerAlign:"center"},{field:"fieldDesc",title:"描述-中文",width:"100"},{field:"virtual",title:"虚拟",width:"30",align:"center",cellRender:{name:"vxeCheckbox"}},{field:"listShow",title:"列表显示",width:"30",resizable:!1,align:"center",cellRender:{name:"vxeCheckbox"}},{field:"editShow",title:"编辑显示",resizable:!1,align:"center",cellRender:{name:"vxeCheckbox"},width:"30"},{field:"detailShow",title:"详情显示",resizable:!1,align:"center",cellRender:{name:"vxeCheckbox"},width:"30"},{field:"width",title:"列表宽",width:"88",align:"right"},{field:"labelWidth",title:"标题宽度",width:"88",align:"right"},{field:"editWidth",title:"编辑宽",width:"88",align:"right"},{field:"titleAlign",title:"表头对齐",width:"70"},{field:"align",title:"表格对齐",width:"70"},{field:"query",title:"查询",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"fieldReadOnly",title:"只读",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"controlType",title:"控件类型",width:"80"},{field:"parentField",title:"上级字段",width:"80"},{field:"fieldFormat",title:"列格式化",width:"80"},{field:"color",title:"列颜色",width:"60"},{field:"fieldOrder",title:"字段顺序",width:"70",align:"right"},{field:"editOrder",title:"编辑页字段顺序",width:"110",align:"right"},{field:"sourceKey",title:"数据源key",width:"100",align:"left"},{field:"matchField",title:"匹配字段",width:"100",align:"left"},{field:"iisRequired",title:"必填",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"iisMoney",title:"金额",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"sortable",title:"排序",width:"46",align:"left",cellRender:{name:"vxeCheckbox"}},{field:"fieldEnDesc",title:"描述-英文",width:"100"},{field:"fieldOtherDesc",title:"描述-其他",width:"100"},{field:"createUser",title:"创建人",width:"80"},{field:"createTime",title:"创建时间",width:"100"},{field:"updateUser",title:"修改人",width:"80"},{field:"updateTime",title:"修改时间",width:"100"},{field:"id",title:"ID",width:"100",visible:!1},{field:"tableId",title:"系统表id",width:"100",visible:!1},{field:"title",title:"标题",width:"100",visible:!1},{field:"tooltip",title:"内容是否提示",width:"100",align:"center",cellRender:{name:"vxeCheckbox"},visible:!1}],fourthTableColumn:[{field:"fieldName",title:"外键字段",width:"80",align:"center",headerAlign:"center"},{field:"masterTableName",title:"关联主表名",width:"100"},{field:"masterTableField",title:"关联主表列名",width:"100"},{field:"issMultiple",title:"多选",align:"center",cellRender:{name:"vxeCheckbox"},width:"60"},{field:"fieldOrder",title:"字段顺序",align:"right",width:"70"},{field:"createUser",title:"创建人",width:"100"},{field:"createTime",title:"创建时间",width:"100"},{field:"updateUser",title:"修改人",width:"100"},{field:"updateTime",title:"修改时间",width:"100"},{field:"id",title:"ID",width:"100",visible:!1},{field:"tableId",title:"系统表id",visible:!1,width:"100"},{field:"tableName",title:"表名",width:"100",visible:!1}],allAlign:null}},methods:{}},C=k,R=(i("0c1e"),Object(v["a"])(C,a,l,!1,null,"6ab19f24",null));t["default"]=R.exports},"79dc":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tabsButtonListBox"},[i("div",{staticClass:"tabsButtonListItem leftItem"},[i("vxe-radio-group",{attrs:{size:"mini"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e._l(e.tabList,(function(t,a){return[i("vxe-radio-button",{key:a,staticClass:"borderRadio",attrs:{label:t.key,status:"my-purple",content:t.value},nativeOn:{click:function(i){return e.selectTabClick(t.key)}}})]}))],2)],1),i("div",{staticClass:"tabsButtonListItem rightItem"})])},l=[],r={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(e){this.selectTab=e,this.$emit("tabsChange",this.selectTab)}}},n=(i("5180"),{name:"tabs-formList",mixins:[r],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var e=this;if(0==this.defaulttabList.length){var t=[],i=this.$store.state.app.currentRouterName;if("sysFrom"!=i&&""!=i){var a=this.$store.state.app.tableColumnsInfo;if(a[i]){for(var l in a[i].listView)if("2"===a[i].listView[l].tableType){var r=a[i].listView[l].tableDesc,n=a[i].listView[l].formSort,s=a[i].listView[l].formSort;t.push({key:"tab"+n,value:r,formSort:s})}this.tabList=t.sort((function(e,t){return e.formSort-t.formSort}))}else setTimeout((function(){e.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),s=n,d=(i("e551"),i("5d22")),o=Object(d["a"])(s,a,l,!1,null,"19af0b3a",null);t["a"]=o.exports},"8f8e":function(e,t,i){"use strict";i("ec8c")},c294:function(e,t,i){},e551:function(e,t,i){"use strict";i("0ee7")},ec8c:function(e,t,i){}}]);