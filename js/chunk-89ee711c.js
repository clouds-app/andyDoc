(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89ee711c"],{"027e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bodyContentBox"},[i("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[i("centerButtonList",{ref:"centerButtonList",staticStyle:{"border-right":"solid 1px #a3c2e9","border-left":"solid 1px #a3c2e9"},attrs:{pagination:!1},on:{pushbuttonData:t.pushbuttonData}}),i("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[i("div",{style:{display:"flex",width:t.windowOffsetWidth+"px"}},[i("div",{staticClass:"leftTable",staticStyle:{width:"20%"}},[i("nvxe-grid",{ref:"mainTable",attrs:{isShowPagination:!0,loading:t.listLoading,toolbarConfigShow:!0,isMainTable:!0,height:.96*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType},scopedSlots:t._u([{key:"toolbar_buttons",fn:function(){return[i("page-config")]},proxy:!0}])})],1),i("div",{staticClass:"Rigthable",staticStyle:{width:"80%"}},[i("show-table-list",{attrs:{disabledAll:t.disabledAll,requstConfig:t.requstConfig,formaction:t.action},on:{setDisabled:t.setDisabled,submit:t.submit}})],1)])]},proxy:!0}])})],1)])},n=[],r=(i("c22d"),i("9b5f"),i("39b0")),o=i("cb39"),s=i("fc0e"),l=i("2ddf"),u=i("0e4a"),f=i("d587"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vxe-form",[i("div",{staticClass:"itemDiv"},[i("span",{staticClass:"itemSpan"},[t._v("基本信息")]),i("button",{staticClass:"button",on:{click:t.existClick}},[t._v("保存")]),i("span",{staticClass:"iconBox",on:{click:function(e){return t.iconClick(1)}}},[t.iconShow1?i("i",{staticClass:"vxe-icon--arrow-top"}):i("i",{staticClass:"vxe-icon--arrow-bottom"})])]),t.form1?i("div",{staticClass:"formContentBox"},[i("formItemRender",{ref:"renderForm",attrs:{disabledAll:t.disabledAll,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.modulePreUrl],firstFormData:t.firstFormData,mainFormName:t.modulePreUrl,formItemList:t.basicDocument},on:{formItemValueEvent:t.formItemValueEvent}})],1):t._e(),i("div",{staticClass:"itemDiv"},[i("span",{staticClass:"itemSpan"},[t._v("业务信息")]),i("span",{staticClass:"iconBox",on:{click:function(e){return t.iconClick(2)}}},[t.iconShow2?i("i",{staticClass:"vxe-icon--arrow-top"}):i("i",{staticClass:"vxe-icon--arrow-bottom"})])]),t.form2?i("div",{staticClass:"formContentBox"},[i("formItemRender",{ref:"renderForm",attrs:{disabledAll:t.disabledAll,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.modulePreUrl],firstFormData:t.firstFormData,mainFormName:t.modulePreUrl,formItemList:t.businessInformation},on:{formItemValueEvent:t.formItemValueEvent}})],1):t._e(),i("div",{staticClass:"itemDiv"},[i("span",{staticClass:"itemSpan"},[t._v("财务相关信息")]),i("span",{staticClass:"iconBox",on:{click:function(e){return t.iconClick(3)}}},[t.iconShow3?i("i",{staticClass:"vxe-icon--arrow-top"}):i("i",{staticClass:"vxe-icon--arrow-bottom"})])]),t.form3?i("div",{staticClass:"formContentBox"},[i("formItemRender",{ref:"renderForm",attrs:{disabledAll:t.disabledAll,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.modulePreUrl],firstFormData:t.firstFormData,mainFormName:t.modulePreUrl,formItemList:t.financingInfo},on:{formItemValueEvent:t.formItemValueEvent}})],1):t._e(),0!=t.deliverGoods.length?i("div",{staticClass:"itemDiv"},[i("span",{staticClass:"itemSpan"},[t._v("送货相关")]),i("span",{staticClass:"iconBox",on:{click:function(e){return t.iconClick(4)}}},[t.iconShow4?i("i",{staticClass:"vxe-icon--arrow-top"}):i("i",{staticClass:"vxe-icon--arrow-bottom"})])]):t._e(),t.form4?i("div",{staticClass:"formContentBox"},[i("formItemRender",{ref:"renderForm",attrs:{disabledAll:t.disabledAll,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.modulePreUrl],firstFormData:t.firstFormData,mainFormName:t.modulePreUrl,formItemList:t.deliverGoods},on:{formItemValueEvent:t.formItemValueEvent}})],1):t._e()])},c=[],d=i("60b5"),h=(i("6a61"),i("3bae"),i("62f9"),i("3337"),i("6b6c")),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.formItemList.length>0?i("vxe-form",{ref:"firstForm",attrs:{rules:t.firstFormRules,size:"mini","title-align":"right","title-width":"90",data:t.firstFormData}},[t._l(t.formItemList,(function(e){return["checkbox"==e.cellRender.name?[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field}},[i("vxe-checkbox",{attrs:{disabled:t.disabledAll||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled},on:{change:function(i){return t.checkboxChange(e,i)}},model:{value:t.firstFormData[e.field],callback:function(i){t.$set(t.firstFormData,e.field,i)},expression:"firstFormData[item.field]"}})],1)]:"popup"==e.cellRender.name?[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field}},[i("popUpPullDown",{attrs:{disabled:t.disabledAll||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled,matchField:e.cellRender.matchField,showEditBox:t.showEditBox,currentValue:t.firstFormData[e.field],field:e.field,paramsItem:e},on:{popupChange:t.formItemValueEvent}})],1)]:"upload"==e.cellRender.name?[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field}},[i("elUpload",{attrs:{disabled:t.disabledAll||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled,tipInfo:e.title,field:e.field,imageUrl:t.firstFormData[e.field]},on:{uploadChange:t.formItemValueEvent,reviseImageUrl:t.uploadChange}})],1)]:"select"==e.cellRender.name?[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field}},[t.$scopedSlots.select&&t.formValueChangeRes.hasOwnProperty(e.field)?[t._t("select",null,{slotParams:e})]:[i("selectOption",{attrs:{disabled:t.disabledAll||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled,paramsItem:e,showEditBox:t.showEditBox,currentValue:t.firstFormData[e.field],currentValueText:t.firstFormData[e.field+"Text"],field:e.field},on:{selectChange:t.formItemValueEvent}})]],2)]:"textarea"==e.cellRender.name?[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field}},[i("vxe-textarea",{attrs:{disabled:t.disabledAll||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled,resize:"vertical",placeholder:e.title},model:{value:t.firstFormData[e.field],callback:function(i){t.$set(t.firstFormData,e.field,i)},expression:"firstFormData[item.field]"}})],1)]:-1!=t.onlyCodeList.indexOf(e.cellRender.name)?[i("vxe-form-item",{key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field},scopedSlots:t._u([{key:"default",fn:function(a){return[i("only-code-input",{attrs:{primoData:e,defaultValue:t.firstFormData[e.field],firstFormData:t.firstFormData,scope:a,formName:t.mainFormName,typeName:e.cellRender.name,showEditBox:t.showEditBox},on:{onlyinputChange:function(i){t.firstFormData[e.field]=i}}})]}}],null,!0)})]:[0==e.children.length?[[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:e.field,attrs:{dataOriginKey:e.field,span:e.width?e.width:8,title:e.title,field:e.field}},[t.$scopedSlots.text&&t.formValueChangeRes.hasOwnProperty(e.field)?[t._t("text",null,{slotParams:e})]:[i("vxe-input",{attrs:{transfer:"",type:t.getInputType(e.cellRender.name),disabled:t.disabledAll||e.readOnly||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled,size:"small",clearable:""},on:{change:function(i){return t.inputValueChange(e,i)},input:function(i){return t.inputChange(e.field)}},model:{value:t.firstFormData[e.field],callback:function(i){t.$set(t.firstFormData,e.field,i)},expression:"firstFormData[item.field]"}})]],2)]]:[t._l(e.children,(function(a){return[[i("vxe-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formValueChangeRes.hasOwnProperty(e.field)||t.formValueChangeRes[e.field].visible,expression:"formValueChangeRes.hasOwnProperty(item.field)?formValueChangeRes[item.field].visible:true"}],key:a.field,attrs:{dataOriginKey:e.field,span:a.width?a.width:8,title:e.title+a.title,field:a.field}},[i("vxe-input",{attrs:{transfer:"",type:t.getInputType(a.cellRender.name),disabled:t.disabledAll||a.readOnly||!!t.formValueChangeRes.hasOwnProperty(e.field)&&t.formValueChangeRes[e.field].disabled,clearable:""},on:{change:function(i){return t.inputValueChange(e,i)},input:function(e){return t.inputChange(a.field)}},model:{value:t.firstFormData[a.field],callback:function(e){t.$set(t.firstFormData,a.field,e)},expression:"firstFormData[subItem.field]"}})],1)]]}))]]]}))],2):t._e()},b=[],v=(i("fc13"),i("6def")),g=i("4d16"),w=i("f3f3"),C=i("ff5d"),y=(i("71e7"),i("455d"),{name:"formItemRender",components:{popUpPullDown:w["a"],onlyCodeInput:C["a"],selectOption:g["a"],elUpload:v["a"]},props:{disabledAll:{type:Boolean,default:!1},showEditBox:{type:Boolean,default:!1},formItemList:{type:Array,default:function(){return[]}},firstFormData:{type:Object,default:function(){return{}}},firstFormRules:{type:Object,default:function(){return{}}},mainFormName:{type:String,default:""},formValueChangeRes:{type:Object,default:function(){return{}}}},data:function(){return{subTitle:localStorage.getItem("subTitle"),prefixIcon:"",vxeSelectOption:{},onlyCodeList:["onlyCode","onlyCode:cite","iisCite"]}},methods:{inputValueChange:function(t,e){var i={field:t.field,componentType:"input",eventType:"change",value:e.value,title:t.title};this.formItemValueEvent(i)},uploadChange:function(t){this.formItemValueEvent(t)},checkboxChange:function(t,e){var i={field:t.field,componentType:"checkbox",eventType:"change",value:e.checked};this.formItemValueEvent(i)},getInputType:function(t){return t?t.replace("input:",""):"text"},inputChange:function(t){var e={property:t},i=this.$refs["firstForm"];i&&i.updateStatus(e)},formItemValueEvent:function(t){this.$emit("formItemValueEvent",t)}}}),F=y,x=i("5d22"),D=Object(x["a"])(F,p,b,!1,null,null,null),R=D.exports,O=i("bf8c"),V=i("34ea"),I={components:{formItemRender:R},mixins:[O["a"]],props:{dataUrl:{type:String,default:""},params:{type:Object,default:function(){return{}}},pushbuttonList:{type:Object,default:function(){return{}}},columnsFormName:{type:String,default:""},modulePreUrl:{type:String,default:""},toolbarConfigShow:{type:Boolean,default:!0},toolbarConfig:{type:Object,default:function(){return{zoom:!0,export:!0,print:!0,custom:!0,slots:{buttons:"toolbar_buttons"}}}}},data:function(){return{requstConfig:{modulePreUrl:"/pur/vendor",mainFormName:"purvendorFm"},firstFormData:{},basicDocument:[],businessInformation:[],financingInfo:[],deliverGoods:[],form1:!0,form2:!0,form3:!0,form4:!0,iconShow1:!0,iconShow2:!0,iconShow3:!0,iconShow4:!0,disabledAll:!0,isAlter:!0}},watch:{params:function(t,e){if("undefined"!=typeof t.pid){if(t.pid==e.pid)return;if("{}"!=JSON.stringify(this.pushbuttonList)&&1!=this.isAlter)return void this.confirmEvent();this.disabledAll=!0,this.initData()}},pushbuttonList:function(t,e){var i=this;"{}"!=JSON.stringify(t)&&"iisAdd"==t.pushbutton?(this.disabledAll=!1,Object.keys(this.firstFormData).forEach((function(t){i.firstFormData[t]=""}))):"{}"!=JSON.stringify(t)&&"iisEdit"==t.pushbutton&&(this.disabledAll=!1)}},mounted:function(){this.loadColumnsByName()},methods:{confirmEvent:function(){var t=this;this.$XModal.confirm("需要保存吗!").then((function(e){"confirm"==e?t.existClick():(t.initData(),t.isAlter=!0,t.disabledAll=!0)}))},formItemValueEvent:function(t){this.isAlter=!1;var e=t.field;this.$set(this.firstFormData,e,t.value)},existClick:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.modulePreUrl,"/update"),this.pushbuttonList.pushbutton==V["c"].iisAdd&&(e="".concat(this.modulePreUrl,"/save")),i=this.postFormatSingleForm(this.firstFormData),t.next=6,this.request["update"](e,i);case 6:t.sent,this.initData(),this.disabledAll=!0,this.isAlter=!0,this.$emit("submitSuccess",i),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("=======>>提交表单错误(表单验证错误):submitSingleTableEvent===========");case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),iconClick:function(t){1==t?(this.form1?this.form1=!1:this.form1=!0,this.iconShow1?this.iconShow1=!1:this.iconShow1=!0):2==t?(this.form2?this.form2=!1:this.form2=!0,this.iconShow2?this.iconShow2=!1:this.iconShow2=!0):3==t?(this.form3?this.form3=!1:this.form3=!0,this.iconShow3?this.iconShow3=!1:this.iconShow3=!0):(this.form4?this.form4=!1:this.form4=!0,this.iconShow4?this.iconShow4=!1:this.iconShow4=!0)},initData:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.dataUrl+this.params.pid,"salecustomerFm"!=this.columnsFormName){t.next=8;break}return t.next=4,h["a"]["post"](e);case 4:i=t.sent,this.firstFormData=i.master,t.next=11;break;case 8:return t.next=10,h["a"]["post"](e);case 10:this.firstFormData=t.sent;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadColumnsByName:function(){var t=this,e=this,i="/sys/form/init/".concat(this.columnsFormName),a={};h["a"]["get"](i,a).then((function(i){var a=i.columns[e.columnsFormName].listColumns;i&&Object.keys(i).length>0&&"salecustomerFm"==t.columnsFormName?a.map((function(e){"客户编号"==e.title||"客户名称"==e.title||"客户简称"==e.title||"英文名称"==e.title||"助记码"==e.title||"地区id"==e.title||"地区名称(虚拟)"==e.title||"详细地址"==e.title||"创建人"==e.title||"创建时间"==e.title||"修改人"==e.title||"修改时间"==e.title||"审核人"==e.title||"审核时间"==e.title?t.basicDocument.push(e):"客户类型"==e.title||"客户等级"==e.title||"单价小数位"==e.title||"金额小数位"==e.title||"单价处理方式"==e.title||"金额处理方式"==e.title||"业务员Code"==e.title||"业务员提成"==e.title||"跟单员"==e.title||"是否停单"==e.title||"是否放行"==e.title||"纸板订单根据原纸报价计算"==e.title||"纸板订单根据计价纸度计算"==e.title||"见坑是否默认净料"==e.title||"见坑订单根据纸度计算"==e.title||"纸板默认净料"==e.title||"纸板送货默认自提"==e.title||"最后下单时间"==e.title||"纸板订单纸宽单位"==e.title||"纸板订单纸长单位"==e.title||"纸箱是否计算内径"==e.title||"纸箱最后下单时间"==e.title||"纸板金额计算方式(纸板金额=报价*总面积)"==e.title||"备品每订单数"==e.title||"备品数"==e.title?t.businessInformation.push(e):"结算货币"==e.title||"税号"==e.title||"开户银行"==e.title||"银行账号"==e.title||"税别"==e.title||"税率"==e.title||"折扣"==e.title||"结算方式(月结方式0.明细1.主档)"==e.title||"月结天数"==e.title||"付款方式"==e.title||"付款天数"==e.title||"月结终止日期"==e.title||"回传天数"==e.title||"是否自提"==e.title||"自提优惠折扣"==e.title||"月结传真号"==e.title||"月结邮箱"==e.title||"月结微信号"==e.title?t.financingInfo.push(e):"送货传真号"!=e.title&&"送货邮箱"!=e.title&&"送货微信号"!=e.title&&"送货距离"!=e.title&&"运价资料"!=e.title&&"送货单是否打印单价"!=e.title&&"送货单是否打印重量"!=e.title&&"不同PO号不能开在同一送货单"!=e.title&&"是否需要回签才转财务"!=e.title||t.deliverGoods.push(e)})):i&&Object.keys(i).length>0&&a.map((function(e){"供应商编号"==e.title||"简称"==e.title||"排序"==e.title||"联系人"==e.title||"电话"==e.title||"传真"==e.title||"地区"==e.title||"详细地址"==e.title||"供应商类型"==e.title||"分类（供应商等级）"==e.title||"创建人"==e.title||"创建时间"==e.title||"修改人"==e.title||"修改时间"==e.title||"审核人"==e.title||"审核时间"==e.title?t.basicDocument.push(e):"报价模式"==e.title||"采购计价"==e.title||"计价方式"==e.title||"计量标准"==e.title||"纸板金额=报价*总面积"==e.title||"量程公里"==e.title||"备品数"==e.title||"备品每订单数"==e.title?t.businessInformation.push(e):"货币"!=e.title&&"折扣"!=e.title&&"小数位"!=e.title&&"付款方式"!=e.title&&"月结方式"!=e.title&&"月结终止日"!=e.title&&"月结天数"!=e.title&&"税率"!=e.title&&"开户银行"!=e.title&&"银行帐号"!=e.title&&"税号"!=e.title&&"税费有效期"!=e.title&&"开票率"!=e.title||t.financingInfo.push(e)}))}))}},created:function(){}},k=I,S=(i("a954"),Object(x["a"])(k,m,c,!1,null,null,null)),P=S.exports,A={name:"vendInfoList",components:{formItemRender:o["a"],bodyContentDownItem:u["a"],centerButtonList:f["a"],formInputList:P,pageConfig:s["a"],showTableList:r["a"]},data:function(){return{action:"",disabledAll:!0,selectTab:"tab1",requstConfig:{modulePreUrl:"/pur/vendor",mainFormName:"purvendorFm"}}},mixins:[l["a"]],methods:{pushbuttonData:function(t){switch(t.pushbutton){case"iisAdd":this.action=t.pushbutton,this.disabledAll=!1;break;default:this.action=t.pushbutton,this.disabledAll=!1;break}this.$store.dispatch("set_currentOperationTypeAction",this.action)},submit:function(){this.search(),this.disabledAll=!0,this.action=""},setDisabled:function(){this.disabledAll=!0,this.action=""}}},N=A,_=(i("adbe"),Object(x["a"])(N,a,n,!1,null,"c0d53c0e",null));e["default"]=_.exports},"0e4a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?i("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?i("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?i("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},n=[],r={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},o=r,s=(i("33bc"),i("5d22")),l=Object(s["a"])(o,a,n,!1,null,"550d1612",null);e["a"]=l.exports},"33bc":function(t,e,i){"use strict";i("c294")},"39b0":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.titleGroup,(function(e,a){return i("div",{key:a},[i("div",{staticClass:"top"},[i("div",{staticClass:"topLift"},[i("span",{staticStyle:{"font-weight":"bold",color:"#606266"}},[t._v(t._s(e.titleGroup))])]),i("div",{staticClass:"topRigth"},[(t.showsubmitBtn?0==a:t.showsubmitBtn)?i("vxe-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.disabledAll,size:"mini",content:"保存"},on:{click:t.submitMasterForm}}):t._e(),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.icontop,expression:"!item.icontop"}],staticClass:"vxe-icon--caret-bottom icon",on:{click:function(e){return t.getshotForm(a)}}}),i("i",{directives:[{name:"show",rawName:"v-show",value:e.icontop,expression:"item.icontop"}],staticClass:"vxe-icon--caret-top icon",on:{click:function(e){return t.getshotForm(a)}}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.icontop,expression:"item.icontop"}],staticClass:"form"},[i("formItemRender",{ref:"renderForm"+a,refInFor:!0,attrs:{disabledAll:t.disabledAll,formValueChangeRes:t.formValueChangeRes,showEditBox:!0,firstFormRules:e.requiredRule,firstFormData:t.fromData[a],formItemList:e.fromTitleList,mainFormName:t.requstConfig.mainFormName,ifFoucus:t.ifFoucus},on:{formItemValueEvent:t.formItemValueEvent}})],1)])})),0)},n=[],r=i("6abc"),o=i("60b5"),s=(i("6a61"),i("62f9"),i("e3b5"),i("27ae"),i("feb3"),i("3bae"),i("cb39")),l=i("bf8c"),u=i("6b6c"),f=i("5180"),m=i.n(f),c=function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}}(),d={mixins:[l["a"]],components:{formItemRender:s["a"]},name:"showtableList",props:{requstConfig:{type:Object,default:function(){return{}}},disabledAll:{type:Boolean,default:!0},formaction:{type:String,default:""},showsubmitBtn:{type:Boolean,default:!0},modelName:{type:String,default:""},ifFoucus:{type:Boolean,default:!0},isOutsizeInitData:{type:Boolean,default:!1},forminitData:{type:Object,default:function(){return{}}}},data:function(){return{titleGroup:[],initData:{},fromData:[],requiredRule:[],formChanges:!1,popupField:{}}},computed:{tableColumnsInfo:function(){return this.$store.getters.tableColumnsInfo_getter},currentSelectRowItem:function(){return this.$store.getters.currentSelectRowItem_getter}},created:function(){this.getCache()},watch:{forminitData:function(t,e){this.initData=m()(t),this.getDefaultFormData()},currentSelectRowItem:{handler:function(t,e){this.isOutsizeInitData||(this.initData=m()(t.row),this.checkdefaultFormData())},deep:!0},disabledAll:{handler:function(t,e){t||""==this.formaction||(this.setFormData(),this.popupField={})},deep:!0,immediate:!0}},methods:{getCache:function(){this.tableColumnsInfo&&this.tableColumnsInfo.columns[this.requstConfig.mainFormName]?this.getFormDataList(this.tableColumnsInfo.columns[this.requstConfig.mainFormName].editColumns,this.tableColumnsInfo.requiredRule[this.requstConfig.mainFormName]):this.getloadColumnsByName()},getloadColumnsByName:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i="/sys/form/init/".concat(this.requstConfig.mainFormName),a={},t.prev=3,t.next=6,u["a"]["get"](i,a);case 6:return n=t.sent,n&&Object.keys(n).length>0&&(e.getFormDataList(n.columns[e.requstConfig.mainFormName].editColumns,n.requiredRule[e.requstConfig.mainFormName]),e.set_tableColumnsInfo(n)),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t["catch"](3),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this,[[3,11]])})));function e(){return t.apply(this,arguments)}return e}(),getFormDataList:function(t,e){var i=this;t.filter((function(t){0==i.titleGroup.length?(i.titleGroup.push({titleGroup:t.titleGroup,icontop:!0,fromTitleList:[t],requiredRule:e}),i.fromData.push({})):i.titleGroup[i.titleGroup.length-1].titleGroup==t.titleGroup?i.titleGroup[i.titleGroup.length-1].fromTitleList.push(t):(i.titleGroup.push({titleGroup:t.titleGroup,icontop:!0,fromTitleList:[t],requiredRule:e}),i.fromData.push({}))})),this.getDefaultFormData()},getDefaultFormData:function(){if(this.fromData[0]){var t=this.initData,e=this;this.titleGroup.filter((function(i,a){i.fromTitleList.filter((function(i){e.$set(e.fromData[a],i.field,t[i.field])}))})),this.$emit("renderFull",this.initData),this.formaction&&setTimeout((function(){e.$refs.renderForm0[0].$refs.inputRef[0].focus()}),2e3)}},setFormData:function(){if("iisAdd"==this.formaction){var t=this.$store.state.app.currentRouterName,e=this.$store.state.app.tableColumnsInfo[t];this.initData=m()(e.initData.master),this.getDefaultFormData()}else if("iisEdit"==this.formaction){if(this.showsubmitBtn)return;var i=this.currentSelectRowItem.row;this.initData=m()(i),this.checkdefaultFormData()}},checkdefaultFormData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.formChanges||!this.showsubmitBtn){t.next=3;break}return t.next=3,this.showModel();case 3:this.$emit("setDisabled"),this.formChanges=!1,this.getDefaultFormData(),this.clearFormRules();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clearFormRules:function(){if(!this.disabledAll)for(var t in this.$refs)this.$refs[t][0].$refs.firstForm.clearValidate()},showModel:function(){var t=this;return new Promise((function(e,i){t.$XModal.confirm("需要保存吗!").then((function(i){"confirm"==i?(t.submitMasterForm(),e()):(t.$emit("setDisabled"),e())}))}))},submitMasterForm:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,e.validateForm();case 4:return t.sent,i="".concat(e.requstConfig.modulePreUrl,"/update"),"iisAdd"==e.formaction&&(i="".concat(e.requstConfig.modulePreUrl,"/save")),a=e.getFormMaster(),t.next=10,e.request["update"](i,a);case 10:t.sent,e.formChanges=!1,e.$emit("submit"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),console.error("=======>>提交表单错误(表单验证错误):submitSingleTableEvent===========");case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(){return t.apply(this,arguments)}return e}(),validateForm:function(){var t=this;return new Promise(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(i,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,e.t0=regeneratorRuntime.keys(t.$refs);case 2:if((e.t1=e.t0()).done){e.next=9;break}return n=e.t1.value,e.next=6,t.$refs[n][0].$refs.firstForm.validate();case 6:e.sent,e.next=2;break;case 9:i(123),e.next=15;break;case 12:e.prev=12,e.t2=e["catch"](0),a(e.t2);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,i){return e.apply(this,arguments)}}())},getFormMaster:function(){var t=this;return this.fromData.filter((function(e){t.initData=Object(r["a"])(Object(r["a"])({},t.initData),e)})),this.initData=Object(r["a"])(Object(r["a"])({},this.initData),this.popupField),this.initData},getshotForm:function(t){this.titleGroup[t].icontop=!this.titleGroup[t].icontop},selectChange:function(t){this.setFromDataCheck(t),this.formChanges=!0},popupChange:function(t){var e=this,i=t.field,a=t.matchField,n=Object.keys(t.matchField);n&&n.forEach((function(t){e.popupField[t]=a[t]?a[t]:""})),this.setFromDataCheck({field:i,value:e.popupField[i]}),this.formChanges=!0},setFromDataCheck:function(t){var e=this,i=t.field,a=t.value;this.fromData.filter((function(t,n){if(t[i]||""==t[i]){t[i]=a;var r="renderForm"+n;e.$refs[r][0].$refs.firstForm.clearValidate(i)}}))},checkboxChange:function(t){this.formChanges=!0},inputValueChange:function(t){var e=this,i=this,a=t.value;c(Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("简称"!=t.title||"customer"!=i.modelName){n.next=7;break}if(r="/prod/prodInfo/rememberCode?id=".concat(t.value),""==t.value){n.next=6;break}return n.next=5,i.request["post"](r);case 5:a=n.sent;case 6:i.fromData.filter((function(t,e){(t["remarkCode"]||""==t["remarkCode"])&&i.$set(i.fromData[e],"remarkCode",a)}));case 7:e.formChanges=!0;case 8:case"end":return n.stop()}}),n)}))),800)},regionChange:function(t){var e=t.event,i=e.areaCode,a=e.areaName;this.popupField={areaCode:i,areaName:a}}}},h=d,p=(i("8737"),i("5d22")),b=Object(p["a"])(h,a,n,!1,null,"5ba93ed2",null);e["a"]=b.exports},5033:function(t,e,i){},8737:function(t,e,i){"use strict";i("c218")},"8bc7":function(t,e,i){},a954:function(t,e,i){"use strict";i("8bc7")},adbe:function(t,e,i){"use strict";i("5033")},c218:function(t,e,i){},c294:function(t,e,i){}}]);