(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9d8afda"],{"0757":function(t,e,a){"use strict";a("b66c")},"0e4a":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},r=[],i={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},s=i,n=(a("33bc"),a("5d22")),c=Object(n["a"])(s,o,r,!1,null,"550d1612",null);e["a"]=c.exports},"0ea9":function(t,e,a){},"0ee7":function(t,e,a){},"33bc":function(t,e,a){"use strict";a("c294")},"79dc":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsButtonListBox"},[a("div",{staticClass:"tabsButtonListItem leftItem"},[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,o){return[a("vxe-radio-button",{key:o,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(a){return t.selectTabClick(e.key)}}})]}))],2)],1),a("div",{staticClass:"tabsButtonListItem rightItem"})])},r=[],i={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},s=(a("5180"),{name:"tabs-formList",mixins:[i],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],a=this.$store.state.app.currentRouterName;if("sysFrom"!=a&&""!=a){var o=this.$store.state.app.tableColumnsInfo;if(o[a]){for(var r in o[a].listView)if("2"===o[a].listView[r].tableType){var i=o[a].listView[r].tableDesc,s=o[a].listView[r].formSort,n=o[a].listView[r].formSort;e.push({key:"tab"+s,value:i,formSort:n})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),n=s,c=(a("e551"),a("5d22")),l=Object(c["a"])(n,o,r,!1,null,"19af0b3a",null);e["a"]=l.exports},b66c:function(t,e,a){},c0e1:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bodyContentBox"},[a("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[a("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/sale/paperSPaperPrice/paperSPaperPriceItem/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),a("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}}),a("paperSPaperPriceCopyFn",{ref:"paperCopy",on:{submitSuccess:t.submitSuccess}})],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{title:"单层报价复制",width:"30%",height:"40%",subTitle:"",loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showPopupBox,callback:function(e){t.showPopupBox=e},expression:"showPopupBox"}},[a("vxe-form",{ref:"firstForm",attrs:{data:t.formData,size:"small",span:"24",rules:t.formRules,"title-align":"right","title-width":"90"}},[a("vxe-form-item",{attrs:{title:"合同编号",field:"pactNo"}},[a("vxe-input",{attrs:{disabled:"",placeholder:"合同编号"},model:{value:t.formData.pactNo,callback:function(e){t.$set(t.formData,"pactNo",e)},expression:"formData.pactNo"}})],1),a("vxe-form-item",{attrs:{title:"客户编号",field:"custCode"}},[a("popUpPullDown",{attrs:{matchField:t.popUpPullDownConfig.editRender.matchField,currentValue:t.formData.custCode,field:t.popUpPullDownConfig.field,paramsItem:t.popUpPullDownConfig},on:{popupChange:t.popupChange}})],1),a("vxe-form-item",{attrs:{title:"生效日期",field:"effectiveDate"}},[a("vxe-input",{attrs:{placeholder:"请选择日期",type:"date",transfer:""},model:{value:t.formData.effectiveDate,callback:function(e){t.$set(t.formData,"effectiveDate",e)},expression:"formData.effectiveDate"}})],1),a("vxe-form-item",{attrs:{title:"备注",field:"remark"}},[a("vxe-input",{attrs:{placeholder:"请输入备注"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)},s=[],n=a("60b5"),c=(a("6a61"),a("1472")),l=a.n(c),u=a("6b6c"),f=a("f3f3"),p={pactNo:"",custCode:"",effectiveDate:l()().format("YYYY-MM-DD"),remark:""},m={name:"paperSPaperPriceCopyFn",components:{popUpPullDown:f["a"]},provide:function(){var t=this;return{getPopupConfig:function(){return t.popupConfig}}},data:function(){return{popUpPullDownConfig:{field:"custCode",editRender:{defaultText:"",defaultValue:"",matchField:"custCode:custCode",name:"popup",sourceKey:"customerMultiBox_common"}},popupConfig:{},formRules:{custCode:[{required:!0,message:"请输入客户编号"}]},vxeModalLoading:!1,showPopupBox:!1,formData:Object.assign({},p)}},computed:{currentSelectRowItem:function(){var t=this.$store.state.app.currentSelectRowItem;return t}},watch:{showPopupBox:function(t,e){t?this.initData():this.formData=Object.assign({},p)}},methods:{initData:function(){var t=this.currentSelectRowItem.row;t&&(this.formData.pactNo=t.pactNo)},popupChange:function(t){this.formData=Object.assign({},this.formData,t.matchField)},submitEvent:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,o,r,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,a=e.$refs["firstForm"],!a){t.next=14;break}return t.prev=3,t.next=6,a.validate();case 6:t.sent,o="sale/paperSPaperPrice/copy",r={pactNo:e.formData.pactNo,custCodeList:e.formData.custCode,billDate:e.formData.effectiveDate+" "+l()().format("HH:mm:ss"),remark:e.formData.remark},u["a"].post(o,r).then((function(t){i.showPopupBox=!1,i.$XModal.message({message:"操作成功!",status:"success"}),i.$emit("submitSuccess")})),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](3);case 14:case"end":return t.stop()}}),t,this,[[3,12]])})));function e(){return t.apply(this,arguments)}return e}()}},d=m,h=a("5d22"),b=Object(h["a"])(d,i,s,!1,null,"278fcb82",null),g=b.exports,w=a("79dc"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{resize:"",remember:"",fullscreen:"",title:t.title,width:"80%",height:"88%",subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showEditBox,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[a("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData}})],1)]},proxy:!0}])})],1)])},x=[],C=(a("5d08"),a("cb39")),D=a("5180"),y=a.n(D),F=a("bf8c"),T={mapList:{spaperPriceItems:"firstTable"}},P={name:"edit-paperSPaperPrice",mixins:[F["a"]],components:{formItemRender:C["a"],tabsTool:w["a"]},data:function(){var t=this;return{editBoxFormHeight:80,requstConfig:{modulePreUrl:"/sale/paperSPaperPrice",mainFormName:"salepaperspaperpriceFm",tab1FormName:"salepaperspaperpriceitemFm"},popupConfig:{spaperCode:{getshowPopUpDown:function(){return t.getshowPopUpBox({field:"custName"})}}}}},methods:{closeWindowAction:function(){this.firstFormDataMaster=y()(this.formDefaultDataObj),this.setTableDefaultData(T,[])},setDefaultValue:function(t){if(t.master)this.firstFormData=Object.assign({},T),this.firstFormDataMaster=y()(t.master),this.setTableDefaultData(T,t);else{var e=this.$store.getters.loginUserInfo_getter;t.priceUnit=e.sysParams.PaperMeasure,"1"==t.priceUnit?t.priceUnitText="1:公制(平方米)":t.priceUnitText="0:英制(千平方英寸)",this.firstFormData=Object.assign({},T),this.firstFormDataMaster=y()(t),this.setTableDefaultData(T,[])}},popupChange:function(t){var e=this;if(t.matchField){var a="/sale/paperSPaperPrice/checkCustomer",o={custCode:t.matchField.custCode,effectiveDate:this.firstFormDataMaster.effectiveDate,kbType:0};u["a"]["post"](a,o).then((function(t){null!=t&&(e.firstFormDataMaster.custName="",e.$XModal.message({message:t,status:"error"}))}))}},popUpTableChange:function(t){var e=this;setTimeout((function(){var a=e.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;if(1!=a.length){var o=a.slice(0,a.length-1),r=o.some((function(t){return a[a.length-1].spaperCode===t.spaperCode}));r&&(e.$XModal.message({message:"原纸编号相同了",status:"error"}),a[t.tableInfo.$rowIndex].spaperCode="")}}),500)}}},k=P,B=(a("ff02"),Object(h["a"])(k,v,x,!1,null,"555472c1",null)),S=B.exports,O=a("1b62"),I=a("2ddf"),N=a("0e4a"),$={name:"paperSPaperPrice",components:{editBox:S,tabsTool:w["a"],bodyContentDownItem:N["a"],paperSPaperPriceCopyFn:g},data:function(){return{requstConfig:{modulePreUrl:"/sale/paperSPaperPrice",mainFormName:"salepaperspaperpriceFm",tab1FormName:"salepaperspaperpriceitemFm"}}},mixins:[O["a"],I["a"]],methods:{extBtnFunction:function(t){switch(t){case"copyFn":this.copyFn();break;default:break}},copyFn:function(){var t=this.$refs["paperCopy"];t&&(t.showPopupBox=!0)}}},_=$,L=(a("0757"),Object(h["a"])(_,o,r,!1,null,"3942ecbc",null));e["default"]=L.exports},c294:function(t,e,a){},e551:function(t,e,a){"use strict";a("0ee7")},ff02:function(t,e,a){"use strict";a("0ea9")}}]);