(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c81ce6e6"],{"0e4a":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?o("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?o("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?o("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},i=[],s={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},r=s,n=(o("33bc"),o("5d22")),l=Object(n["a"])(r,a,i,!1,null,"550d1612",null);e["a"]=l.exports},"0ee7":function(t,e,o){},"15a7":function(t,e,o){},"33bc":function(t,e,o){"use strict";o("c294")},6830:function(t,e,o){"use strict";o("6cb6")},"6cb6":function(t,e,o){},"79dc":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tabsButtonListBox"},[o("div",{staticClass:"tabsButtonListItem leftItem"},[o("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,a){return[o("vxe-radio-button",{key:a,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(o){return t.selectTabClick(e.key)}}})]}))],2)],1),o("div",{staticClass:"tabsButtonListItem rightItem"})])},i=[],s={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},r=(o("5180"),{name:"tabs-formList",mixins:[s],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],o=this.$store.state.app.currentRouterName;if("sysFrom"!=o&&""!=o){var a=this.$store.state.app.tableColumnsInfo;if(a[o]){for(var i in a[o].listView)if("2"===a[o].listView[i].tableType){var s=a[o].listView[i].tableDesc,r=a[o].listView[i].formSort,n=a[o].listView[i].formSort;e.push({key:"tab"+r,value:s,formSort:n})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),n=r,l=(o("e551"),o("5d22")),u=Object(l["a"])(n,a,i,!1,null,"19af0b3a",null);e["a"]=u.exports},"92d0":function(t,e,o){"use strict";o("15a7")},c294:function(t,e,o){},de8d:function(t,e,o){"use strict";o.r(e);var a,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bodyContentBox"},[o("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[o("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[o("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[o("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[o("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/sale/lbProcessPrice/lbProcessPriceItem/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[o("template",{slot:"toolbar_buttons"},[o("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),o("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}}),o("lbpCopyFn",{ref:"lbpCopyFn",on:{submitSuccess:t.submitSuccess}})],1)},s=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nvxe-modal",{attrs:{title:"楞别加工费复制",width:"30%",height:"40%",subTitle:"",loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showPopupBox,callback:function(e){t.showPopupBox=e},expression:"showPopupBox"}},[o("vxe-form",{ref:"firstForm",attrs:{data:t.formData,size:"small",span:"24",rules:t.formRules,"title-align":"right","title-width":"90"}},[o("vxe-form-item",{attrs:{title:"复制单号"},scopedSlots:t._u([{key:"default",fn:function(){return[o("vxe-input",{attrs:{disabled:""},model:{value:t.formData.billNo,callback:function(e){t.$set(t.formData,"billNo",e)},expression:"formData.billNo"}})]},proxy:!0}])}),o("vxe-form-item",{attrs:{title:"客户编号",field:"guestCode"}},[o("popUpPullDown",{attrs:{matchField:t.popUpPullDownConfig.editRender.matchField,currentValue:t.formData.guestCode,field:t.popUpPullDownConfig.field,paramsItem:t.popUpPullDownConfig},on:{popupChange:t.popupChange}})],1),o("vxe-form-item",{attrs:{title:"生效日期",field:"date"},scopedSlots:t._u([{key:"default",fn:function(){return[o("vxe-input",{attrs:{type:"datetime",placeholder:"请选择日期","label-format":"",transfer:!0},model:{value:t.formData.billDate,callback:function(e){t.$set(t.formData,"billDate",e)},expression:"formData.billDate"}})]},proxy:!0}])}),o("vxe-form-item",{attrs:{title:"审核"},scopedSlots:t._u([{key:"default",fn:function(){return[o("vxe-checkbox",{model:{value:t.formData.iisAudit,callback:function(e){t.$set(t.formData,"iisAudit",e)},expression:"formData.iisAudit"}})]},proxy:!0}])})],1)],1)},n=[],l=o("60b5"),u=(o("6a61"),o("1472")),c=o.n(u),f=o("6b6c"),m=o("f3f3"),d=o("de33"),p={billNo:"",guestCode:"",custCodeList:"",billDate:"",iisAudit:!1},b={name:"paperRepPriceCarFeeCopyFn",components:{popUpPullDown:m["a"],regionInput:d["a"]},provide:function(){var t=this;return{getPopupConfig:function(){return t.popupConfig}}},data:function(){return{popUpPullDownConfig:{field:"guestName",editRender:{defaultText:"",defaultValue:"",matchField:"guestCode:custCode,guestName:shortName",name:"popup",sourceKey:"customerMultiBox_common"}},popupConfig:{},formRules:{guestCode:[{required:!0,message:"请输入客户"}]},vxeModalLoading:!1,showPopupBox:!1,formData:Object.assign({},p)}},computed:{currentSelectRowItem:function(){var t=this.$store.state.app.currentSelectRowItem;return t}},watch:{showPopupBox:function(t,e){t?this.initData():this.formData=Object.assign({},p)}},methods:{initData:function(){var t=this.currentSelectRowItem.row;t&&(this.formData.billNo=t.billNo,this.formData.billDate=c()().format("YYYY-MM-DD HH:mm:ss"))},regionChange:function(t){this.formData.areaName=t.areaName,this.formData.areaCode=t.areaCode},popupChange:function(t){this.formData=Object.assign({},this.formData,t.matchField),this.formData.custCodeList=t.matchField.guestCode},submitEvent:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,o,a,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,o=e.$refs["firstForm"],!o){t.next=14;break}return t.prev=3,t.next=6,o.validate();case 6:t.sent,a="sale/lbProcessPrice/copy",i={billNo:this.formData.billNo,custCodeList:this.formData.custCodeList,billDate:this.formData.billDate,iisAudit:this.formData.iisAudit},f["a"].post(a,i).then((function(t){s.showPopupBox=!1,s.$XModal.message({message:"操作成功!",status:"success"}),s.$emit("submitSuccess")})),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](3);case 14:case"end":return t.stop()}}),t,this,[[3,12]])})));function e(){return t.apply(this,arguments)}return e}()}},h=b,g=o("5d22"),w=Object(g["a"])(h,r,n,!1,null,"4ce717cb",null),v=w.exports,x=o("79dc"),C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nvxe-modal",{attrs:{resize:"",remember:"",fullscreen:"",title:t.title,width:"80%",height:"88%",subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[o("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[o("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[o("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[o("formItemRender",{ref:"renderForm",attrs:{formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],showEditBox:t.showEditBox,firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[o("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[o("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[o("nvxe-edit-grid",{ref:"firstTable",attrs:{"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData},on:{"cell-click":t.cellClickEvent}})],1)]},proxy:!0}])})],1)])},D=[],y=o("7dd6"),F=o("cb39"),T=o("5180"),k=o.n(T),P=o("bf8c"),B={mapList:{lbProcessPriceItems:"firstTable"}},O={name:"edit-lbProcessPrice",mixins:[P["a"]],components:{formItemRender:F["a"],tabsTool:x["a"]},provide:function(){var t=this;return{getPopupConfig:function(){return t.popupConfig}}},data:function(){var t=this;return{editBoxFormHeight:40,requstConfig:{modulePreUrl:"/sale/lbProcessPrice",mainFormName:"salelbprocesspriceFm",tab1FormName:"salelbprocesspriceitemFm"},popupConfig:{ppiCS:{lbCode:""},lbCode:{getshowPopUpDown:function(){return t.getshowPopUpBox({field:"custName"})}}}}},methods:(a={cellClickEvent:function(t){var e=t.column.property;if("ppiCS"==e){var o=t.row["lbCode"];this.popupConfig.ppiCS.lbCode=o}},closeWindowAction:function(){this.firstFormDataMaster=k()(this.formDefaultDataObj),this.setTableDefaultData(B,[]),this.popupConfig.ppiCS.lbCode=""},setDefaultValue:function(t){t.master?(this.firstFormData=Object.assign({},B),this.firstFormDataMaster=k()(t.master),this.setTableDefaultData(B,t)):(this.firstFormData=Object.assign({},B),this.firstFormDataMaster=k()(t),this.setTableDefaultData(B,[]))}},Object(y["a"])(a,"closeWindowAction",(function(){})),Object(y["a"])(a,"submitEvent",function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,o,a,i,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,o=e.$refs["renderForm"].$refs["firstForm"],!o){t.next=33;break}return t.prev=3,t.next=6,o.validate();case 6:return t.sent,t.next=9,this.fullValidEvent("firstTable");case 9:t.sent,a=this.$refs.firstTable.getRecordset().insertRecords,i=0;case 12:if(!(i<a.length-1)){t.next=25;break}s=i+1;case 14:if(!(s<a.length)){t.next=22;break}if(a[i].lbCode!==a[s].lbCode||a[i].ppiCS!==a[s].ppiCS){t.next=19;break}return console.error("==".concat(this.subTitle,">>=====提交表单<<包含重复数据>>错误===========")),this.$XModal.message({message:"请勿添加重复数据!",status:"error"}),t.abrupt("return");case 19:s++,t.next=14;break;case 22:i++,t.next=12;break;case 25:r=this.getRecordset(this.firstFormData),n="".concat(this.requstConfig.modulePreUrl,"/saveOrUpdate"),this.request["update"](n,r).then((function(t){setTimeout((function(){e.showEditBox=!1}),1e3),e.$emit("submitSuccess",r)})),t.next=33;break;case 30:t.prev=30,t.t0=t["catch"](3),console.error("==".concat(this.subTitle,">>=====提交表单<<验证>>错误==========="));case 33:case"end":return t.stop()}}),t,this,[[3,30]])})));function e(){return t.apply(this,arguments)}return e}()),a)},N=O,S=(o("92d0"),Object(g["a"])(N,C,D,!1,null,"4f4805fc",null)),I=S.exports,_=o("1b62"),L=o("2ddf"),R=o("0e4a"),$={name:"lbProcessPrice",components:{editBox:I,tabsTool:x["a"],bodyContentDownItem:R["a"],popUpPullDown:m["a"],lbpCopyFn:v},data:function(){return{requstConfig:{modulePreUrl:"/sale/lbProcessPrice",mainFormName:"salelbprocesspriceFm",tab1FormName:"salelbprocesspriceitemFm"}}},mixins:[_["a"],L["a"]],methods:{copyFn:function(){var t=this.$refs["lbpCopyFn"];t&&(t.showPopupBox=!0)},extBtnFunction:function(t){switch(t){case"copyFn":this.copyFn();break;default:break}}}},E=$,H=(o("6830"),Object(g["a"])(E,i,s,!1,null,"75ca50d6",null));e["default"]=H.exports},e551:function(t,e,o){"use strict";o("0ee7")}}]);