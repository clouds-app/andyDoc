(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f042a250"],{"0d11":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("301b");r("01e5"),r("e487"),r("27ae"),r("c2f8"),r("591f"),r("feb3");function i(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0)if(r.push(s.value),t&&r.length===t)break}catch(u){i=!0,n=u}finally{try{a||null==o["return"]||o["return"]()}finally{if(i)throw n}}return r}}var n=r("caff"),s=r("cb47");function o(e,t){return Object(a["a"])(e)||i(e,t)||Object(n["a"])(e,t)||Object(s["a"])()}},"301b":function(e,t,r){"use strict";function a(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return a}))},bf8c:function(e,t,r){"use strict";var a=r("6abc"),i=r("0d11"),n=r("60b5"),s=(r("6a61"),r("fc13"),r("9b5f"),r("b3b0"),r("a5f8"),r("5b12"),r("3bae"),r("24a8"),r("e3b5"),r("529f"),r("27ae"),r("3337"),r("4d0b"),r("bf2f"),r("62f9"),r("16ca"),r("1d43"),r("1472")),o=r.n(s),u=r("5180"),c=r.n(u),f=r("6b6c"),l=r("34ea");t["a"]={name:"editBaseMixin",provide:function(){var e=this;return{getPopupConfig:function(){return e.popupConfig},getPopupModalConfig:function(){return e.popupModalConfig}}},props:{otherParam:{type:Object,default:function(){return{}}}},data:function(){return{customConfig:{amtDot:2,amtWay:0},initResData:{},isRecordNumber:!1,cumulativeField:{},popupModalConfig:{},formValueChangeRes:{},subTitle:"",formDefaultDataObj:{},formItemList:[],request:f["a"],currentRefTableName:"firstTable",currentRefSubTbName:"sub1Table",rowDetailItem:{},selectTab:"tab1",selectSubTab:"sub1",tabHeight:26,valType:l["g"],moduleType:l["b"],operationType:l["c"],listActionType:l["c"].iisAdd,editActionType:l["c"].iisAdd,editBoxFormHeight:130,vxeModalLoading:!1,defaultBorderHeight:10,showEditBox:!1,windowOffsetHeight:0,windowOffsetWidth:0,requiredRule:{},firstFormData:{},firstFormDataMaster:{},firstTableData:[],secondTableData:[],thirdTableData:[]}},computed:{tableColumnsInfo:function(){return this.$store.getters.tableColumnsInfo_getter},windowOperation:function(){return this.$store.getters.windowOperation},editWindowOperation:function(){return this.$store.getters.editWindowOperation},windowIsResize:function(){return this.$store.state.app.windowIsResize.editWindow},editSelectRowItem:function(){var e=this.$store.state.app.editSelectRowItem;return e},currentSelectRowItem:function(){return this.$store.getters.currentSelectRowItem_getter},title:function(){var e=this.$store.state.app.currentOperationType;return this.listActionType=e.replace("_stop",""),e==l["c"].iisAdd+"_stop"?(this.showEditBox,this.$t("app.operationType.iisAdd")):e==l["c"].iisEdit+"_stop"?(this.showEditBox&&this.loadDetailById(),this.$t("app.operationType.iisEdit")):e==l["c"].iisDetail+"_stop"?(this.showEditBox&&this.loadDetailById(),"查看"):void 0},currentDetailId:function(){return this.$store.state.app.currentDetailId}},watch:{currentDetailId:function(e,t){e&&this.loadDetailById(e)},selectTab:function(e,t){this.refreshSelectedColumn(e),this.setCurrentRefTableName(e),this.selectTabChangeEvent(e)},selectSubTab:function(e,t){this.refreshSelectedSubColumn(e),this.setCurrentRefSubTbName(e)},editSelectRowItem:{handler:function(e,t){},immediate:!0,deep:!0},showEditBox:function(e,t){var r=this;this.subTitle=localStorage.getItem("subTitle"),e?(this.getContentWindowWidthHeight(),setTimeout((function(){r._openWindowAction(),r.openWindowAction()}),300)):(this._closeWindowAction(),this.closeWindowAction())},windowIsResize:function(e,t){this.getContentWindowWidthHeight()},editWindowOperation:function(e,t){e&&this.editWindowOperationAction(e)}},created:function(){},methods:{getSumTableDataToFormBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isSumToForm:!0,tableRefName:"firstTable"},r=e,a=e;if(e.includes(":")){var i=e.split(":");r=i[0],a=i[1]}var n=this,s=0;try{var o=this.$refs[t.tableRefName].$refs["originEditTalbe"].getTableData().tableData;o.length>0&&o.forEach((function(e){s+=Number(e[a])}))}catch(u){return s}return s=this.formatAmountByCustom(s),t.isSumToForm&&(n.firstFormDataMaster[r]=s),s},formatAmountByCustom:function(e){return this.formatAmountByType(e,this.customConfig.amtDot,this.customConfig.amtWay)},formatAmountByType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(isNaN(e)||void 0==e||null==e)return 0;switch((isNaN(t)||void 0==t||null==t)&&(t=2),(isNaN(r)||void 0==r||null==r)&&(r=0),t=Math.pow(10,Number(t)),Number(r)){case 0:e=Math.round(e*t)/t;break;case 1:e=Math.floor(e*t)/t;break;case 2:e=Math.ceil(e*t)/t;break;default:e=Math.round(e*t)/t;break}return e},editClosedEvent:function(e){},getMasterField:function(e,t,r){var a=0;t.filter((function(t){a+=t[e]?Number(t[e]):0})),this.firstFormDataMaster[r]=Number(a.toFixed(2))},getTableTotal:function(e,t,r){var a=1;e.forEach((function(e){a*=Number(r[e])})),r[t]=a.toFixed(2)},getshowPopUpBox:function(e){var t=this,r=e.field;return new Promise((function(e,a){var i={property:r},n=t.$refs.renderForm.$refs["firstForm"];n&&(n.data[r]?e(!0):(n.updateStatus(i),e(!1))),e(!1)}))},_popupModalDataRes:function(e){this.$refs[this.currentRefTableName].$refs["originEditTalbe"].remove(),this.$refs[this.currentRefTableName].$refs["originEditTalbe"].insertAt(e.dataList),this.popupModalDataBeforeRes(e)},popupModalDataRes:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.popupModalDataBeforeRes(t),r=this.editSelectRowItem.rowIndex,a=this.$refs[this.currentRefTableName].$refs["originEditTalbe"],this,!a){e.next=21;break}if(n=t.dataList,s=a.getTableData().tableData,s=s.map((function(e,t){if(t==r)for(var a=0,s=Object.entries(n[0]);a<s.length;a++){var o=Object(i["a"])(s[a],2),u=o[0],c=o[1];"id"!=u&&(e[u]=c)}return e})),n.splice(0,1),o=[],!t.dataFrom){e.next=14;break}o=n,e.next=17;break;case 14:return e.next=16,this.setColumnsDefaultValue(a,n,s[s.length-1]);case 16:o=e.sent;case 17:if(!(o.length>0)){e.next=20;break}return e.next=20,a.insertAt(o,-1);case 20:this.popupModalDataResEvent(r,n.length+r);case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setColumnsDefaultValue:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,i){var n,s,o,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},s={},o=t.getColumns(),o.forEach((function(e){e.editRender&&e.editRender.defaultValue+""!=""&&(n[e.property]=e.editRender.defaultValue,(e.editRender.defaultValue+"").includes("-")&&(s[e.property]=Math.abs(e.editRender.defaultValue)))})),r=r.map((function(e,t){var r=Object.assign({},s),o=u.setAutoCumulativeField(i,r,t),c=Object.assign({},n,o);return e=Object(a["a"])(Object(a["a"])({},c),e),delete e.id,e})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),setAutoCumulativeField:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=0,n=Object.entries(e);a<n.length;a++){var s=Object(i["a"])(n[a],2),o=s[0],u=s[1];t.hasOwnProperty(o)&&(t[o]=(r+1)*Math.abs(t[o])+Math.abs(u))}return t},popupModalDataResEvent:function(e,t){},popupModalDataBeforeRes:function(e){return this.isRecordNumber&&(e.dataList=e.dataList.map((function(e){return e.id=parseInt(9998*Math.random()+1),e}))),e},tabsChange:function(e){this.selectTab=e},formItemValueEvent:function(e){e.field;var t=e.componentType;e.eventType,e.value;if(t)switch(t){case"select":this._selectChange(e),this.selectChange(e);break;case"popup":this._popupChange(e),this.popupChange(e);break;case"checkbox":this.checkboxChange(e);break;case"fileUpload":this._fileUploadChange(e);break;case"upload":this._uploadChange(e);break;case"boxFormula":this._boxFormulaChange(e);break;case"discountMode":this._discountModeChange(e);break;case"region":this._regionChange(e),this.regionChange(e);break;default:this._inputValueChange(e),this.inputValueChange(e);break}},_regionChange:function(e){this.firstFormData[e.field]&&this.firstFormData[e.field]||(this.firstFormData[e.field]=e.event.areaCode,this.firstFormData["areaName"]=e.event.areaName),!this.firstFormDataMaster[e.field]&&this.firstFormDataMaster[e.field]||(this.firstFormDataMaster[e.field]=e.event.areaCode,this.firstFormDataMaster["areaName"]=e.event.areaName)},regionChange:function(e){},_inputValueChange:function(e){this.firstFormData[e.field]=e.value,this.firstFormDataMaster[e.field]=e.value},inputValueChange:function(e){},checkboxChange:function(e){},_selectChange:function(e){!this.firstFormData[e.field]&&this.firstFormData[e.field]||(this.firstFormData[e.field]=e.value),!this.firstFormDataMaster[e.field]&&this.firstFormDataMaster[e.field]||(this.firstFormDataMaster[e.field]=e.value)},setCustomConfig:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"setDefaultValue";if("setDefaultValue"==t)e.master?(this.customConfig.amtDot=e.master.amtDot,e.master.hasOwnProperty("amtWay")&&(this.customConfig.amtWay=Number(e.master.amtWay))):(this.customConfig.amtDot=e.amtDot,e.hasOwnProperty("amtWay")&&(this.customConfig.amtWay=Number(e.amtWay)));else{var r=["custName"];r.includes(e.field)&&(this.customConfig.amtDot=e.matchField.amtDot,e.matchField.hasOwnProperty("amtWay")&&(this.customConfig.amtWay=Number(e.matchField.amtWay)))}},selectChange:function(e){},popUpTableChange:function(e){return e},_popupChange:function(e){this.setCustomConfig(e,"popupChange");var t=this,r=e.matchField,a=Object.keys(r);if(a){if(a.forEach((function(e){!t.firstFormData[e]&&t.firstFormData[e]||(t.firstFormData[e]=r[e]),!t.firstFormDataMaster[e]&&t.firstFormDataMaster[e]||(t.firstFormDataMaster[e]=r[e])})),!t.$refs.renderForm)return;a.forEach((function(e){t.$refs.renderForm.$refs.firstForm.updateStatus({property:e})}))}},_discountModeChange:function(e){var t=this,r=e.matchField,a=Object.keys(r);a&&(!t.firstFormData[e.field]&&t.firstFormData[e.field]||(t.firstFormData[e.field]=r[a[0]],t.firstFormData[e.field+"Str"]=r[a[1]],t.firstFormData[e.field+"Json"]=r[a[2]]),!t.firstFormDataMaster[e.field]&&t.firstFormDataMaster[e.field]||(t.firstFormDataMaster[e.field]=r[a[0]],t.firstFormDataMaster[e.field+"Str"]=r[a[1]],t.firstFormDataMaster[e.field+"Json"]=r[a[2]]))},_boxFormulaChange:function(e){var t=this,r=e.matchField,a=Object.keys(r);a&&(!t.firstFormData[e.field]&&t.firstFormData[e.field]||(t.firstFormData[e.field]=r[a]),!t.firstFormDataMaster[e.field]&&t.firstFormDataMaster[e.field]||(t.firstFormDataMaster[e.field]=r[a]))},_fileUploadChange:function(e){var t=this,r=e.matchField,a=Object.keys(r);a&&(!t.firstFormData[e.field]&&t.firstFormData[e.field]||(t.firstFormData[e.field]=r[a]),!t.firstFormDataMaster[e.field]&&t.firstFormDataMaster[e.field]||(t.firstFormDataMaster[e.field]=r[a]))},_uploadChange:function(e){var t=this,r=e.matchField,a=Object.keys(r);a&&a.forEach((function(e){!t.firstFormData[e]&&t.firstFormData[e]||(t.firstFormData[e]=r[e]),!t.firstFormDataMaster[e]&&t.firstFormDataMaster[e]||(t.firstFormDataMaster[e]=r[e])}))},popupChange:function(e){},getInputType:function(e){return e?e.replace("input:",""):"text"},getparentList:function(e,t,r,a){var i=this.$refs[e].$refs["originEditTalbe"],n=i.getTableData().fullData;setTimeout((function(){var e=[];n.filter((function(a){a.virtual&&a.fieldDesc&&e.push({label:a[t],value:a[r]})}));var s=i.getColumnByField(a);s.editRender.options=e}),500)},selectTabChangeEvent:function(e){},setCurrentRefTableName:function(e){switch(e){case"tab1":this.currentRefTableName="firstTable";break;case"tab2":this.currentRefTableName="secondTable";break;case"tab3":this.currentRefTableName="thirdTable";break;default:break}},setCurrentRefSubTbName:function(e){switch(e){case"sub1":this.currentRefSubTbName="sub1Table";break;case"sub2":this.currentRefSubTbName="sub2Table";break;case"sub3":this.currentRefSubTbName="sub3Table";break;default:break}},refreshSelectedColumn:function(e){switch(e){case"tab1":var t=this.$refs["firstTable"];t&&t.refreshColumn();break;case"tab2":var r=this.$refs["secondTable"];r&&r.refreshColumn();break;case"tab3":var a=this.$refs["thirdTable"];a&&a.refreshColumn();break;default:break}},refreshSelectedSubColumn:function(e){switch(e){case"sub1":var t=this.$refs["sub1Table"];t&&t.refreshColumn();break;case"sub2":var r=this.$refs["sub2Table"];r&&r.refreshColumn();break;case"sub3":var a=this.$refs["sub3Table"];a&&a.refreshColumn();break;default:break}},tableOperationChange:function(){},editWindowOperationAction:function(e){var t=this;switch(this.editActionType=e.operationType,this.tableOperationChange(),e.operationType){case l["c"].iisAdd:this.iisAddAction();break;case l["c"].iisEdit:this.iisEditAction();break;case l["c"].iisDel:this.iisDelAction();break;case l["c"].iisInsert:this.iisInsertAction();break;default:break}e.operationType.includes("_stop")||setTimeout((function(){t.setEditOperationType(e.operationType+"_stop")}),200)},iisAddAction:function(){console.log("=eidtBox==iisAddAction========="),this.insertEvent(-1)},insertEvent:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(i,n){var s=t,o=r;if(s.$refs[t.currentRefTableName]){var u=s.$refs[t.currentRefTableName].$refs["originEditTalbe"];if(u){var c=u.getTableData().tableData,f=c[c.length-1];a&&(o=t.setNewRecordDefaultValue(f,o,c));var l=null;l=Number(e)>0?c[e]:e,t.isRecordNumber&&(o.id=parseInt(9998*Math.random()+1)),u.insertAt(o,l).then((function(e){var t=u.getTableData().tableData,r=t[t.length-1],a={data:e,lastItem:r};i(a)})).catch((function(e){n(e)})),s.rewriteInsertEvent({currentRefTableName:t.currentRefTableName})}}}))},setCumulativeField:function(e,t,r){var a=t,i=Object.entries(this.cumulativeField),n=r.length;return 0==n?n=1:n+=1,i.length>0&&i.forEach((function(t,r){var i=t[0];e&&Object.keys(e).length>0?a[i]=Math.abs(e[i])+Math.abs(t[1]):a[i]=Math.abs(t[1])})),t},setNewRecordDefaultValue:function(e,t,r){var a=this.setCumulativeField(e,t,r);return a},rewriteInsertEvent:function(){},iisEditAction:function(){console.log("=eidtBox==iisEditAction=========")},iisDelAction:function(){console.log("=eidtBox==iisDelAction=========");var e=this.$refs[this.currentRefTableName].$refs["originEditTalbe"];e&&(e.removeCheckboxRow(),this.iisDelActionEvent())},iisDelActionEvent:function(){},iisInsertAction:function(){if(console.log("=eidtBox==iisInsertAction========="),null!=this.editSelectRowItem&&null!=this.editSelectRowItem.rowIndex){var e=Number(this.editSelectRowItem.rowIndex);this.insertEvent(e)}},loadDetailById:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:"",this.vxeModalLoading=!0,this.rowDetailItem={},r=this.currentSelectRowItem.rowid,t&&(r=t),r){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,a="".concat(this.requstConfig.modulePreUrl,"/detail?id=").concat(r),i={},e.next=12,this.request["post"](a,i);case 12:this.rowDetailItem=e.sent,this.$store.dispatch("set_currentDetailAction",this.rowDetailItem),this._setDefaultValue(this.rowDetailItem),this.setDefaultValue(this.rowDetailItem),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](7),console.warn("======查询详细 err loadDetailById=======");case 21:this.vxeModalLoading=!1;case 22:case"end":return e.stop()}}),e,this,[[7,18]])})));function t(){return e.apply(this,arguments)}return t}(),setTableDefaultData:function(e,t){var r=this,a=this;if(e&&e.mapList){var i=Object.entries(e.mapList);i.forEach((function(e,i){if(e[0]){var n=e[0],s=e[1],o=[];t&&t[n]&&t[n].defaultList&&(o=t[n].defaultList),a.$refs[s].$refs["originEditTalbe"].reloadData(o),"firstTable"==s&&t[n]&&r.setFirstTableCurrentRow(t,o[0])}}))}},setFirstTableCurrentRow:function(e,t){this.initResData=c()(e);var r=this.$refs["firstTable"].$refs["originEditTalbe"];r&&r.setCurrentRow(t),this.tabTableRowItem=t,this.lastTimeRowId=t.id},setEditOperationType:function(e){this.$store.dispatch("set_editOperationTypeAction",e)},_setDefaultValue:function(e){this.setCustomConfig(e,"setDefaultValue")},setDefaultValue:function(e){},_openWindowAction:function(){this.tableColumnsInfo?this._setformItemList(this.tableColumnsInfo):this.loadColumnsByName(this.requstConfig.mainFormName)},openWindowAction:function(){},_closeWindowAction:function(){var e=this,t=e.$refs["renderForm"];t&&t.$refs["firstForm"].clearValidate()},closeWindowAction:function(){},otherValidateCheck:function(){return!0},submitEvent:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,r=t.$refs["renderForm"].$refs["firstForm"],a=t.otherValidateCheck(),!r||!a){e.next=19;break}return e.prev=4,e.next=7,r.validate();case 7:return e.sent,e.next=10,this.fullValidEvent("firstTable");case 10:e.sent,i=this.getRecordset(this.firstFormData),n=!0,n&&(s="".concat(this.requstConfig.modulePreUrl,"/saveOrUpdate"),this.request["update"](s,i).then((function(e){setTimeout((function(){t.showEditBox=!1}),1e3),t.$emit("submitSuccess",i)}))),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](4),console.error("==".concat(this.subTitle,">>=====提交表单<<验证>>错误==========="));case 19:case"end":return e.stop()}}),e,this,[[4,16]])})));function t(){return e.apply(this,arguments)}return t}(),submitThreeTbEvent:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,r=t.$refs["renderForm"].$refs["firstForm"],!r){e.next=19;break}return e.prev=3,e.next=6,r.validate();case 6:return e.sent,e.next=9,this.fullValidEvent("firstTable");case 9:e.sent,a=this.getRecordset(this.firstFormData),a=this.pushThreeTbToForm(a,this.subFormDataMapList),i=!0,i&&(n="".concat(this.requstConfig.modulePreUrl,"/saveOrUpdate"),this.request["update"](n,a).then((function(e){setTimeout((function(){t.showEditBox=!1}),1e3),t.$emit("submitSuccess",a)}))),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](3),console.error("==".concat(this.subTitle,">>=====提交表单<<验证>>错误==========="));case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));function t(){return e.apply(this,arguments)}return t}(),checkTableDataList:function(e){var t=this,r=e.allRecordset;return new Promise((function(e,a){for(var i in t.firstFormData.mapList){if(!(r[i].addList.length||r[i].updateList.length||r[i].defaultList.length)){t.$XModal.confirm("子表数据为空,是否提交?").then((function(t){"cancel"==t&&e(!1),e(!0)}));break}e(!0)}}))},inputChange:function(e){var t=this.$refs["firstForm"];t&&t.updateStatus(e)},fullValidEvent:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){r.$refs[t].$refs["originEditTalbe"].fullValidate().then((function(t){e()})).catch((function(e){if(e){a("====errMap===")}}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),masterFormat:function(e){return e},insertRecordsFormat:function(e){return e},updateRecordsFormat:function(e){return e},removeRecordsFormat:function(e){return e},defaultListRecordsFormat:function(e){return e},getRecordset:function(e){var t=this,r={},a=Object.entries(e.mapList);return a.forEach((function(e,a){var i={};if(e[0]){var n=e[0],s=e[1],o=t.$refs[s];if(o){i=o.getRecordset();var u=o.getTableData().tableData;i&&(i.insertRecords=i.insertRecords.map((function(e){return e.id&&!t.isRecordNumber&&delete e.id,e})),i.removeRecords=i.removeRecords.map((function(e){return e.hasDelete=!0,e})),r[n]={addList:t.insertRecordsFormat(i.insertRecords),defaultList:t.defaultListRecordsFormat(u),deleteList:t.updateRecordsFormat(i.removeRecords),updateList:t.removeRecordsFormat(i.updateRecords)})}else r[n]={addList:[],defaultList:[],deleteList:[],updateList:[]}}else r.master=t.masterFormat(e[1])})),r.master||(t.firstFormDataMaster&&Object.keys(t.firstFormDataMaster).length>0?r.master=c()(t.firstFormDataMaster):r.master=c()(e.master)),r},postFormatSingleForm:function(e){return e.startTime&&(e.startTime=o()(e.startTime).format("YYYY-MM-DD HH:mm:ss")),e.endTime&&(e.endTime=o()(e.endTime).format("YYYY-MM-DD HH:mm:ss")),e},getFormatSingleForm:function(e){return e},submitSingleTableEvent:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,r=t.$refs["renderForm"].$refs["firstForm"],!r){e.next=21;break}return e.prev=3,e.next=6,r.validate();case 6:return e.sent,a="".concat(this.requstConfig.modulePreUrl,"/save"),this.listActionType==l["c"].iisEdit&&(a="".concat(this.requstConfig.modulePreUrl,"/update")),i=this.postFormatSingleForm(this.firstFormData),n=this.getFormatSingleForm(this.firstFormData),e.next=13,this.request["update"](a,i);case 13:e.sent,t.showEditBox=!1,t.$emit("submitSuccess",n),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](3),console.error("=======".concat(this.subTitle,">>提交表单错误(表单验证错误):submitSingleTableEvent==========="));case 21:case"end":return e.stop()}}),e,this,[[3,18]])})));function t(){return e.apply(this,arguments)}return t}(),loadColumnsByName:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=this,a="/sys/form/init/".concat(t),i={},e.prev=5,e.next=8,f["a"]["get"](a,i);case 8:return n=e.sent,n&&Object.keys(n).length>0&&(r._setformItemList(n),r.set_tableColumnsInfo(n)),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e["catch"](5),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(t){return e.apply(this,arguments)}return t}(),_setformItemList:function(e){var t=this;if(e.columns[t.requstConfig.mainFormName]||t.loadColumnsByName(t.requstConfig.mainFormName),t.formItemList=e.columns[t.requstConfig.mainFormName].editColumns,t.requiredRule=Object.assign({},e.requiredRule,t.requiredRule),t.listActionType==l["c"].iisAdd){var r=e.initData.master;r||(r=e.initData[t.requstConfig.mainFormName]);var a=this._formatDefaultValue(r,t.formItemList);t.setDefaultValue(a),t.formDefaultDataObj=a}},_formatDefaultValue:function(e,t){var r=t.filter((function(e){return!!e.visible&&("select"==e.editRender.name||"date"==e.editRender.name||"month"==e.editRender.name||"datetime"==e.editRender.name)}));return r&&r.length>0&&r.forEach((function(t){var r=Object.prototype.toString.call(e[t.field]);if(r==l["g"].String){var a="YYYY-MM-DD HH:mm:ss";switch(t.editRender.name){case"date":a="YYYY-MM-DD";break;case"datetime":a="YYYY-MM-DD HH:mm:ss";break;case"month":a="YYYYMM";break;default:break}if(e[t.field]=o()().format(a),"select"!=t.editRender.name&&t.editRender.defaultValue){var i=t.editRender.defaultValue.split("-");e[t.field]=o()()[i[0]](Number(i[1]),i[2]).format(a)}}"select"==t.editRender.name&&(e[t.field]=t.editRender.defaultValue,e[t.field+"Text"]=t.editRender.defaultText)})),e},set_tableColumnsInfo:function(e){var t=this.$route.path;this.currentRouterName||(t=t.replace("/",""),this.$store.commit("set_currentRouterName",t)),this.$store.dispatch("set_tableColumnsInfoAction",e)},getContentWindowWidthHeight:function(){this.vxeModalLoading=!0;var e=this;this.$nextTick((function(){e.windowOffsetHeight=0,e.windowOffsetWidth=0,clearTimeout(e.editWindowReSizeTimer),e.editWindowReSizeTimer=setTimeout((function(){var t=e.$refs["editBoxBodyContent"];if(t&&t.offsetHeight){var r=t.offsetHeight,a=t.offsetWidth;e.windowOffsetHeight=Number(r),e.windowOffsetWidth=Number(a)}e.vxeModalLoading=!1}),300)}))}}}},cb47:function(e,t,r){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,"a",(function(){return a}))}}]);