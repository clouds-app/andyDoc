(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f36ac45e"],{"0e4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"column"===t.flexDirection?"bodyContentDownBox-V":"bodyContentDownBox-H"},[t.$slots.part1?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part1",[t._v("part1")])],2):t._e(),t.$slots.part2?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part2",[t._v("part2")])],2):t._e(),t.$slots.part3?a("div",{staticClass:"bodyContentDownItem",style:{width:t.config.windowOffsetWidth+"px"}},[t._t("part3",[t._v("part3")])],2):t._e()])},s=[],r={name:"bodyContentDownItem",props:{flexDirection:{type:String,default:"column"},config:{type:Object,default:function(){return{windowOffsetHeight:0,windowOffsetWidth:0}}}},data:function(){return{}},methods:{}},n=r,o=(a("33bc"),a("5d22")),l=Object(o["a"])(n,i,s,!1,null,"550d1612",null);e["a"]=l.exports},"0ee7":function(t,e,a){},"1b67":function(t,e,a){"use strict";a("f354")},"33bc":function(t,e,a){"use strict";a("c294")},"79dc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsButtonListBox"},[a("div",{staticClass:"tabsButtonListItem leftItem"},[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[t._l(t.tabList,(function(e,i){return[a("vxe-radio-button",{key:i,staticClass:"borderRadio",attrs:{label:e.key,status:"my-purple",content:e.value},nativeOn:{click:function(a){return t.selectTabClick(e.key)}}})]}))],2)],1),a("div",{staticClass:"tabsButtonListItem rightItem"})])},s=[],r={props:{currentTab:{type:String,default:"tab1"}},data:function(){return{selectTab:"tab1"}},methods:{selectTabClick:function(t){this.selectTab=t,this.$emit("tabsChange",this.selectTab)}}},n=(a("5180"),{name:"tabs-formList",mixins:[r],props:{defaulttabList:{type:Array,default:function(){return[]}}},data:function(){return{tabList:[]}},mounted:function(){this.gettabList()},methods:{gettabList:function(){var t=this;if(0==this.defaulttabList.length){var e=[],a=this.$store.state.app.currentRouterName;if("sysFrom"!=a&&""!=a){var i=this.$store.state.app.tableColumnsInfo;if(i[a]){for(var s in i[a].listView)if("2"===i[a].listView[s].tableType){var r=i[a].listView[s].tableDesc,n=i[a].listView[s].formSort,o=i[a].listView[s].formSort;e.push({key:"tab"+n,value:r,formSort:o})}this.tabList=e.sort((function(t,e){return t.formSort-e.formSort}))}else setTimeout((function(){t.gettabList()}),300)}}else this.tabList=this.defaulttabList}}}),o=n,l=(a("e551"),a("5d22")),f=Object(l["a"])(o,i,s,!1,null,"19af0b3a",null);e["a"]=f.exports},"7fd1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bodyContentBox"},[a("div",{ref:"refBodyContent",staticClass:"bodyContentItem lastItem"},[a("bodyContentDownItem",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("nvxe-grid",{ref:"mainTable",attrs:{isMainTable:!0,loading:t.listLoading,height:.6*t.windowOffsetHeight,columnsFormName:t.requstConfig.mainFormName,dataUrl:t.requstConfig.modulePreUrl+"/"+t.mainPageSearchType}})]},proxy:!0},{key:"part2",fn:function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.selectTab,expression:"selectTab==='tab1'"}]},[a("nvxe-grid",{ref:"firstTable",attrs:{dataUrl:"/sPaper/sPaperIn/item/list",params:{pid:t.currentSelectRowItem.row.id,updateFlag:t.updateFlag},height:.4*t.windowOffsetHeight,columnsFormName:t.requstConfig.tab1FormName}},[a("template",{slot:"toolbar_buttons"},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1)],2)],1)]},proxy:!0}])})],1),a("editBox",{ref:"editBox",on:{submitSuccess:t.submitSuccess}})],1)},s=[],r=a("79dc"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nvxe-modal",{attrs:{remember:"",fullscreen:"",title:t.title,subTitle:t.subTitle,loading:t.vxeModalLoading},on:{confirm:function(e){return t.submitEvent()}},model:{value:t.showEditBox,callback:function(e){t.showEditBox=e},expression:"showEditBox"}},[a("div",{ref:"editBoxBodyContent",staticClass:"editBoxBodyContentDefaultHW"},[a("editBoxContentPartition",{attrs:{config:{windowOffsetHeight:t.windowOffsetHeight,windowOffsetWidth:t.windowOffsetWidth}},scopedSlots:t._u([{key:"part1",fn:function(){return[a("div",{staticStyle:{overflow:"auto"},style:{height:t.editBoxFormHeight+"px"}},[a("formItemRender",{ref:"renderForm",attrs:{showEditBox:t.showEditBox,formValueChangeRes:t.formValueChangeRes,firstFormRules:t.requiredRule[t.requstConfig.mainFormName],firstFormData:t.firstFormDataMaster,mainFormName:t.requstConfig.mainFormName,formItemList:t.formItemList},on:{formItemValueEvent:t.formItemValueEvent}})],1)]},proxy:!0},{key:"part2",fn:function(){return[a("vxe-radio-group",{attrs:{size:"mini"},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[a("tabsTool",{attrs:{currentTab:t.selectTab},on:{tabsChange:t.tabsChange}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"tab1"==t.selectTab,expression:"selectTab == 'tab1'"}]},[a("nvxe-edit-grid",{ref:"firstTable",attrs:{isMainTable:!0,"edit-rules":t.requiredRule[t.requstConfig.tab1FormName],height:t.windowOffsetHeight-t.defaultBorderHeight-t.editBoxFormHeight-t.tabHeight,columnsFormName:t.requstConfig.tab1FormName,data:t.firstTableData},on:{"edit-closed":t.editClosedEvent,"cell-click":t.cellClickEvent}})],1)]},proxy:!0}])})],1)])},o=[],l=(a("1d43"),a("3bae"),a("24a8"),a("529f"),a("cb39")),f=a("5180"),u=a.n(f),c=a("1472"),d=a.n(c),m=a("bf8c"),b={mapList:{sPaperInItems:"firstTable"}},p={name:"edit-sPaperIn",mixins:[m["a"]],components:{formItemRender:l["a"],tabsTool:r["a"]},provide:function(){var t=this;return{getPopupModalConfig:function(){return t.popupModalConfig},getshowPopUpBox:function(){return t.getshowPopUpBox({field:"vendName"})}}},data:function(){return{editBoxFormHeight:160,requstConfig:{modulePreUrl:"/sPaper/sPaperIn",mainFormName:"spaperinFm",tab1FormName:"spaperinitemFm"},popupConfig:{stationInfo:{whType:"0"}},popupModalConfig:{firstTable:{title:"原纸入库列表",mainFormName:"spSPaperInPopFm",fieldName:"poLine",requstTab1Config:{isStoredProcedure:!0,modulePreUrl:"/proc/prod/page/spSPaperInPop",filterName:"poLine",params:{},subformName:"spSPaperInItemPop"}}}}},methods:{popupModalDataResEvent:function(t,e){var a=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.getMasterField("swt",a,"sendWt"),this.getMasterField("spaperInWt",a,"inWt");for(var i=0;i<e;i++)this.getunitPrice(a[i]),this.getdiffWt(a[i]);this.firstFormDataMaster["coilQty"]=a.length},cellClickEvent:function(t){t.column.editRender&&"popupModal"==t.column.editRender.name&&this.setFirstTableFilterList()},setFirstTableFilterList:function(){try{var t=this.$refs["firstTable"].$refs["originEditTalbe"],e=this.$refs["renderForm"].$refs["firstForm"].data;if(t){var a=t.getTableData().tableData,i="",s=this.popupModalConfig.firstTable.requstTab1Config.filterName;a.forEach((function(t){t[s]&&(""==i?i=t[s]:i+=","+t[s])})),this.popupModalConfig.firstTable.requstTab1Config.params.filterList=i,this.popupModalConfig.firstTable.requstTab1Config.params["vendCode"]=e["vendCode"]}}catch(r){console.warn("====setFirstTableFilterList=====")}},iisDelActionEvent:function(){var t=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.firstFormDataMaster["coilQty"]=t.length,this.againGetMasterField(t)},rewriteInsertEvent:function(){var t=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData;this.firstFormDataMaster["coilQty"]=t.length,t[t.length-1]["inDate"]=d()().format("YYYY-MM-DD HH:mm:ss")},againGetMasterField:function(t){this.getMasterField("swt",t,"sendWt"),this.getMasterField("spaperInWt",t,"inWt"),this.getMasterField("taxAmt",t,"taxAmt"),this.getMasterField("amt",t,"amt")},closeWindowAction:function(){this.firstFormDataMaster=u()(this.formDefaultDataObj),this.setTableDefaultData(b,[])},setDefaultValue:function(t){var e=this.$store.getters.loginUserInfo_getter.sysParams.POToInWithSPaper,a=this.$refs.firstTable.$refs.originEditTalbe.getColumnByField("poLine");a.disabled="1"!=e,t.master?(this.firstFormData=Object.assign({},b),this.firstFormDataMaster=u()(t.master),this.setTableDefaultData(b,t)):(this.firstFormData=Object.assign({},b),this.firstFormDataMaster=u()(t),this.setTableDefaultData(b,[]))},editClosedEvent:function(t){var e=t.column,a=t.$rowIndex,i=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData,s=this;switch(e.property){case"swt":s.getMasterField("swt",i,"sendWt"),s.getdiffWt(i);break;case"spaperInWt":s.getMasterField("spaperInWt",i,"inWt"),s.getTableTotal(["spaperInWt","taxPrice"],"taxAmt",i[a]),s.getTableTotal(["price","spaperInWt"],"amt",i[a]),s.getMasterField("taxAmt",i,"taxAmt"),s.getMasterField("amt",i,"amt"),s.getdiffWt(i[a]);break;case"ysPrice":s.getunitPrice(i[a]);break;case"spPrice":s.getunitPrice(i[a]);break;case"rate":s.getunitPrice(i[a]);break;case"invPar":s.getunitPrice(i[a]);break;default:break}},getdiffWt:function(t){var e=t.swt,a=t.spaperInWt;t["diffWt"]=Number(e)-Number(a)},getunitPrice:function(t){var e=this.$refs.firstTable.$refs.originEditTalbe.getTableData().fullData,a=t.invPar,i=t.rate,s=t.ysPrice,r=t.spPrice,n=Number(s)+Number(r);if(t["taxPrice"]=n,a&&i){var o=n*(Number(a)/100);t["price"]=Number(n-o*(Number(i)/(1+Number(i)))).toFixed(2)}else t["price"]=t["taxPrice"];this.getTableTotal(["taxPrice","spaperInWt"],"taxAmt",t),this.getMasterField("taxAmt",e,"taxAmt"),this.getTableTotal(["price","spaperInWt"],"amt",t),this.getMasterField("amt",e,"amt")},getTableTotal:function(t,e,a){var i=1;t.forEach((function(t){i*=Number(a[t])})),a[e]=(i/1e3).toFixed(2)}}},h=p,g=(a("a04e"),a("5d22")),T=Object(g["a"])(h,n,o,!1,null,"e2bd6478",null),w=T.exports,v=a("1b62"),x=a("2ddf"),F=a("0e4a"),C={name:"sPaperIn",components:{editBox:w,tabsTool:r["a"],bodyContentDownItem:F["a"]},data:function(){return{requstConfig:{modulePreUrl:"/sPaper/sPaperIn",mainFormName:"spaperinFm",tab1FormName:"spaperinitemFm"}}},mixins:[v["a"],x["a"]],methods:{}},y=C,D=(a("1b67"),Object(g["a"])(y,i,s,!1,null,"5948c8a8",null));e["default"]=D.exports},a04e:function(t,e,a){"use strict";a("b084")},b084:function(t,e,a){},c294:function(t,e,a){},e551:function(t,e,a){"use strict";a("0ee7")},f354:function(t,e,a){}}]);